<ion-header>
  <ion-toolbar>
    <ion-title>Eventos</ion-title>
    <ion-buttons slot="end">
      <ion-button color="primary" (click)="goToCreate()">
        <ion-icon name="add-outline" slot="start"></ion-icon>
        <ion-text>Agregar evento</ion-text>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-row class="ion-margin">

    <ion-col [size]="12">
      <div>
        <div class="ion-margin-bottom">
          <ion-button color="medium" (click)="setShowFilter()">
            <ion-icon name="filter-outline" slot="start" *ngIf="!showFilter"></ion-icon>
            <ion-icon name="close-outline" slot="start" *ngIf="showFilter"></ion-icon>
            <ion-text>Filtrar</ion-text>
          </ion-button>
        </div>

        <ion-card *ngIf="showFilter">
          <ion-card-content>
            <ion-row>
              <ion-col size="12" size-sm="4">
                <ion-item>
                  <ion-label position="floating" color="medium">Ordenar por:</ion-label>
                  <ion-input
                    [readonly]="true"
                    class="no-selected-text no-selected-text"
                    [value]="queryParams.value === -1 ? 'Fecha ascendente' : 'Fecha descendente'"
                    (click)="setOrderData()"
                  ></ion-input>
                </ion-item>
              </ion-col>
              <ion-col size="12" size-sm="4">
                <ion-item>
                  <ion-label position="floating" color="medium">A partir de:</ion-label>
                  <ion-datetime
                    [value]="queryParams.initDate"
                    displayFormat="DD/MM/YYYY"
                    min="2021-01-01"
                    doneText="Listo"
                    cancelText="Cancelar"
                    (ionChange)="setDate('initDate', $event.target.value)"
                  >
                  </ion-datetime>
                </ion-item>
              </ion-col>
              <ion-col size="12" size-sm="4">
                <ion-item>
                  <ion-label position="floating" color="medium">Hasta:</ion-label>
                  <ion-datetime
                    [value]="queryParams.endDate"
                    displayFormat="DD/MM/YYYY"
                    min="2021-01-01"
                    doneText="Listo"
                    cancelText="Cancelar"
                    (ionChange)="setDate('endDate', $event.target.value)"
                  >
                  </ion-datetime>
                </ion-item>
              </ion-col>
            </ion-row>
            <ion-row class="ion-margin-top">
              <ion-col size="6" class="ion-justify-content-center">
                <ion-button class="ion-text-center" color="medium" expand="full" (click)="resetQueryParams()">
                  <ion-icon name="trash-outline"></ion-icon>
                  <ion-text>Limpiar</ion-text>
                </ion-button>
              </ion-col>
              <ion-col size="6" class="ion-justify-content-center">
                <ion-button class="ion-text-center" color="primary" expand="full" (click)="getEventsList()">
                  <ion-icon name="checkmark-outline"></ion-icon>
                  <ion-text>Aplicar</ion-text>
                </ion-button>
              </ion-col>
            </ion-row>
          </ion-card-content>
        </ion-card>

        <div *ngIf="events && events.length > 0; else noEvents">
          <ion-row>
            <ion-col size="12" size-sm="6" size-md="4" *ngFor='let e of events'>
              <app-eventcard [data]="e"> </app-eventcard>
            </ion-col>
          </ion-row>
        </div>
        <ng-template #noEvents>
          <ion-card class="ion-no-padding">
            <ion-text color="medium">
              <p class="ion-margin-top ion-padding-top ion-text-center no-selected-text">
                <ion-icon name="alert-circle-outline"></ion-icon> No se encontraron eventos.
              </p>
            </ion-text>
          </ion-card>
        </ng-template>
      </div>
    </ion-col>
  </ion-row>
</ion-content>
