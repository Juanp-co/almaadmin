{"version":3,"sources":["./src/app/views/documentos/documentos.page.ts","./src/app/views/documentos/documentos-routing.module.ts","./src/app/views/documentos/documentos.service.ts","./src/app/views/documentos/documentos.page.scss","./src/app/views/documentos/documentos.page.html","./src/app/views/documentos/documentos.module.ts"],"names":[],"mappings":"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","file":"views-documentos-documentos-module.js","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport {Router} from '@angular/router';\r\nimport {DocumentosService} from './documentos.service';\r\nimport {GlobalService} from '../../services/global.service';\r\nimport {NavController} from '@ionic/angular';\r\nimport {CookiesService} from '../../services/cookies.service';\r\n\r\n@Component({\r\n  selector: 'app-documentos',\r\n  templateUrl: './documentos.page.html',\r\n  styleUrls: ['./documentos.page.scss'],\r\n})\r\nexport class DocumentosPage implements OnInit {\r\n\r\n  documents: any = null;\r\n  list: any = null;\r\n  showOwn = false;\r\n  userData: any = null;\r\n\r\n  constructor(\r\n    private documentosService: DocumentosService,\r\n    private globalSer: GlobalService,\r\n    private navCtrl: NavController,\r\n    private cookiesService: CookiesService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  async ionViewWillEnter() {\r\n    if (!this.userData) this.userData = await this.cookiesService.getCookie('data');\r\n    this.getDocuments();\r\n  }\r\n\r\n  async getDocuments() {\r\n    await this.globalSer.presentLoading();\r\n    const data: any = await this.documentosService.getResources();\r\n\r\n    if (data && !data.error) {\r\n      this.documents = data;\r\n      this.getListToShow();\r\n      await this.globalSer.dismissLoading();\r\n    }\r\n    else if (data && data.error) {\r\n      await this.globalSer.dismissLoading();\r\n      await this.globalSer.errorSession();\r\n    }\r\n    else await this.globalSer.dismissLoading();\r\n  }\r\n\r\n  async deleteDocument(id) {\r\n    await this.globalSer.presentLoading();\r\n    const data: any = await this.documentosService.deleteResources(id);\r\n\r\n    if (data && !data.error) {\r\n      this.documents = this.documents.filter(d => d._id !== id);\r\n      this.getListToShow();\r\n      await this.globalSer.dismissLoading();\r\n      await this.globalSer.presentAlert('¡Éxito!', 'Se ha eliminado el documento exitosamente.');\r\n    }\r\n    else if (data && data.error) {\r\n      await this.globalSer.dismissLoading();\r\n      await this.globalSer.errorSession();\r\n    }\r\n    else await this.globalSer.dismissLoading();\r\n  }\r\n\r\n  getListToShow() {\r\n    if (this.showOwn) this.list = this.documents.filter(d => d.user?._id === this.userData._id);\r\n    else this.list = this.documents;\r\n  }\r\n\r\n  async goToCreate() {\r\n    await this.navCtrl.navigateForward(`/documentos/subir`);\r\n  }\r\n\r\n  removeDocument = (id: any): void => { this.deleteDocument(id); };\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { DocumentosPage } from './documentos.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DocumentosPage\r\n  },\r\n  {\r\n    path: 'subir',\r\n    loadChildren: () => import('./subir/subir.module').then( m => m.SubirPageModule)\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class DocumentosPageRoutingModule {}\r\n","import { Injectable } from '@angular/core';\r\nimport {GlobalService} from '../../services/global.service';\r\nimport {AxiosService} from '../../services/axios.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class DocumentosService {\r\n\r\n  constructor(\r\n    private axios: AxiosService,\r\n    private globalSer: GlobalService\r\n  ) { }\r\n\r\n  async getResources() {\r\n    const res: any = await this.axios.getData('/admin/resources');\r\n    return res && res.success ? (res.data.resources || []) : [];\r\n  }\r\n\r\n  async saveResources(data = {}) {\r\n    const res: any = await this.axios.postData('/admin/resources', data);\r\n    if (res && res.success) return res.data;\r\n    return this.globalSer.altResponse(res);\r\n  }\r\n\r\n  async deleteResources(id) {\r\n    const res: any = await this.axios.deleteData(`/admin/resources/${id}`);\r\n    if (res && res.success) return res.data;\r\n    return this.globalSer.altResponse(res);\r\n  }\r\n}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJkb2N1bWVudG9zLnBhZ2Uuc2NzcyJ9 */\";","export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-title>Documentos compartidos</ion-title>\\r\\n    <ion-buttons slot=\\\"end\\\">\\r\\n      <ion-button color=\\\"primary\\\" (click)=\\\"goToCreate()\\\">\\r\\n        <ion-icon name=\\\"add-outline\\\" slot=\\\"start\\\"></ion-icon>\\r\\n        <ion-text>Agregar</ion-text>\\r\\n      </ion-button>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n\\r\\n  <ion-row *ngIf=\\\"list?.length > 0; else noDocs\\\">\\r\\n    <ion-col size=\\\"12\\\" sizeSm=\\\"6\\\" *ngFor=\\\"let doc of list\\\">\\r\\n      <app-documentos-card\\r\\n        [data]=\\\"doc\\\"\\r\\n        [showButtonsOwn]=\\\"true\\\"\\r\\n        [handleRemove]=\\\"removeDocument\\\"\\r\\n      ></app-documentos-card>\\r\\n    </ion-col>\\r\\n  </ion-row>\\r\\n  <ng-template #noDocs>\\r\\n    <ion-row>\\r\\n      <ion-col size=\\\"12\\\">\\r\\n        <ion-card class=\\\"ion-no-padding ion-margin-top ion-margin-bottom\\\">\\r\\n          <ion-text color=\\\"medium\\\">\\r\\n            <p class=\\\"ion-text-center\\\">\\r\\n              <ion-icon name=\\\"alert-circle-outline\\\"></ion-icon> No se ha compartido ningún documento.\\r\\n            </p>\\r\\n          </ion-text>\\r\\n        </ion-card>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n  </ng-template>\\r\\n\\r\\n</ion-content>\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { DocumentosPageRoutingModule } from './documentos-routing.module';\r\n\r\nimport { DocumentosPage } from './documentos.page';\r\nimport {ComponentsModule} from '../../components/components.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    DocumentosPageRoutingModule,\r\n    ComponentsModule\r\n  ],\r\n  declarations: [DocumentosPage]\r\n})\r\nexport class DocumentosPageModule {}\r\n"],"sourceRoot":"webpack:///"}