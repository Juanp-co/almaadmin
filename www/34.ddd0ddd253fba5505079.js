(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{EnSQ:function(e,t,o){"use strict";o.d(t,"a",function(){return n});var i=o("fXoL");let n=(()=>{class e{constructor(){}resizePhoto(e,t,o,i){const n=new FileReader;n.onload=e=>{this.resizeReresize(e.target.result,t,o,i)},n.readAsDataURL(e)}resizeReresize(e,t,o,i){const n=new Image;n.onload=e=>{const r=document.createElement("canvas");let a=n.width,s=n.height;a>s?a>t&&(s*=t/a,a=t):s>t&&(a*=t/s,s=t),r.width=a,r.height=s,r.getContext("2d").drawImage(n,0,0,a,s),this.resizeOuput(r,o,i)},n.src=e}resizeOuput(e,t,o){switch(t){case"file":e.toBlob(e=>{o(e)},"image/jpeg",.8);break;case"dataURL":o(e.toDataURL("image/jpeg",.8))}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},hGtv:function(e,t,o){"use strict";o.r(t),o.d(t,"SubirPageModule",function(){return g});var i=o("ofXK"),n=o("3Pt+"),r=o("TEn/"),a=o("tyNb"),s=o("mrSG"),l=o("fXoL"),c=o("EnSQ"),b=o("VEy+"),u=o("4WDQ");function d(e,t){if(1&e&&(l.Mb(0,"ion-text",21),l.Kb(1,"br"),l.Kb(2,"br"),l.pc(3),l.Lb()),2&e){const e=l.Wb();l.xb(3),l.rc(" Archivo: ",e.formData.fileName," ")}}const m=function(e){return{backgroundImage:e,height:"130px"}},f=[{path:"",component:(()=>{class e{constructor(e,t,o,i){this.dataService=e,this.documentosService=t,this.globalSer=o,this.navCtrl=i,this.formData={title:"",file:null,fileName:null,rolesList:[],rolesSelected:""},this.roles=["Administradores","Pastores","Supervisores","L\xedderes"]}ngOnInit(){}saveDocument(){return Object(s.a)(this,void 0,void 0,function*(){yield this.globalSer.presentLoading();const e=yield this.documentosService.saveResources(this.formData);e&&!e.error?(yield this.globalSer.dismissLoading(),yield this.globalSer.presentAlert("\xa1\xc9xito!","Se ha compartido el documento exitosamente."),this.goBack()):e&&e.error?(yield this.globalSer.dismissLoading(),yield this.globalSer.errorSession()):yield this.globalSer.dismissLoading()})}goBack(){return Object(s.a)(this,void 0,void 0,function*(){yield this.navCtrl.back()})}openFile(e){var t;if("object"==typeof(null===(t=e.target)||void 0===t?void 0:t.files[0])){const t=e.target.files[0],o=new FileReader;o.onload=e=>{this.formData.file=e.target.result,this.formData.fileName=t.name},o.readAsDataURL(t)}}setFormData(e,t){this.formData[e]=t.target.value||null}getRoles(e){let t="";if(4===e.length)t="Todos";else if(e.length>0)for(const o of e)""===t?t=this.roles[o]:t+=", "+this.roles[o];return t}showAlertRolesList(){return Object(s.a)(this,void 0,void 0,function*(){const e=[];for(const[t,o]of this.roles.entries())e.push({name:"roles",type:"checkbox",label:o,value:t,checked:this.formData.rolesList.includes(t)});yield this.globalSer.alertWithList({header:"Seleccione",inputs:e,confirmAction:e=>{this.formData.rolesList=e,this.formData.rolesSelected=this.getRoles(e)}})})}validate(){return Object(s.a)(this,void 0,void 0,function*(){let e=null;this.formData.file?this.formData.title.length<4?e="Disculpe, pero debe indicar un t\xedtulo al archivo que va a compartir.":0===this.formData.rolesList.length&&(e="Disculpe, pero debe indicar a que tipos de usuario se le compartir\xe1 el documento."):e="Disculpe, pero debe cargar el archivo PDF a compartir.",e?this.globalSer.presentAlert("\xa1Error!",e||"Disculpe, pero debe completar el formulario."):this.confirmAction()})}confirmAction(){return Object(s.a)(this,void 0,void 0,function*(){yield this.globalSer.alertConfirm({header:"\xa1Confirme!",message:"\xbfEst\xe1 seguro qu\xe9 desea subir este documento?",confirmAction:()=>this.saveDocument()})})}}return e.\u0275fac=function(t){return new(t||e)(l.Jb(c.a),l.Jb(b.a),l.Jb(u.a),l.Jb(r.U))},e.\u0275cmp=l.Db({type:e,selectors:[["app-subir"]],decls:49,vars:7,consts:[["slot","start"],[3,"click"],["name","arrow-back-outline"],["size","12","sizeSm","4",1,"ion-text-center","ion-margin-top"],[1,""],[1,"micursor","ion-text-center"],[1,"img-upload",3,"ngStyle"],["type","file","accept","application/pdf","hidden","",3,"change"],["color","medium",1,"toSmall"],["color","medium",4,"ngIf"],["size","12","sizeSm","8"],["size","12","sizeSm","6"],["position","floating","color","medium"],["autocomplete","off","maxlength","100",1,"ion-text-uppercase",3,"value","change"],["autocomplete","off",1,"ion-text-uppercase","no-selected-text",3,"value","readonly","click"],["size","12",1,"ion-margin"],["size","12",1,"ion-margin-top"],["size","6",1,"ion-text-center"],["color","light",3,"click"],["name","close","slot","start"],["name","save-outline","slot","start"],["color","medium"]],template:function(e,t){1&e&&(l.Mb(0,"ion-header"),l.Mb(1,"ion-toolbar"),l.Mb(2,"ion-buttons",0),l.Mb(3,"ion-button",1),l.Ub("click",function(){return t.goBack()}),l.Kb(4,"ion-icon",2),l.Lb(),l.Lb(),l.Mb(5,"ion-title"),l.pc(6,"Subir documento"),l.Lb(),l.Lb(),l.Lb(),l.Mb(7,"ion-content"),l.Mb(8,"ion-card"),l.Mb(9,"ion-card-content"),l.Mb(10,"ion-row"),l.Mb(11,"ion-col",3),l.Mb(12,"div",4),l.Mb(13,"label",5),l.Mb(14,"div",6),l.Mb(15,"input",7),l.Ub("change",function(e){return t.openFile(e)}),l.Lb(),l.Lb(),l.Lb(),l.Kb(16,"br"),l.Mb(17,"ion-text",8),l.Mb(18,"i"),l.pc(19,"Clic para subir un documento una imagen"),l.Lb(),l.Lb(),l.nc(20,d,4,1,"ion-text",9),l.Lb(),l.Lb(),l.Mb(21,"ion-col",10),l.Mb(22,"ion-row"),l.Mb(23,"ion-col",11),l.Mb(24,"ion-item"),l.Mb(25,"ion-label",12),l.pc(26,"T\xedtulo del documento (*)"),l.Lb(),l.Mb(27,"ion-input",13),l.Ub("change",function(e){return t.setFormData("title",e)}),l.Lb(),l.Lb(),l.Lb(),l.Mb(28,"ion-col",11),l.Mb(29,"ion-item"),l.Mb(30,"ion-label",12),l.pc(31,"Dirigido a (*)"),l.Lb(),l.Mb(32,"ion-input",14),l.Ub("click",function(){return t.showAlertRolesList()}),l.Lb(),l.Lb(),l.Lb(),l.Mb(33,"ion-col",15),l.Mb(34,"ion-text",8),l.Mb(35,"i"),l.pc(36,"(*) Campos obligatorios."),l.Lb(),l.Lb(),l.Lb(),l.Mb(37,"ion-col",16),l.Mb(38,"ion-row"),l.Mb(39,"ion-col",17),l.Mb(40,"ion-button",18),l.Ub("click",function(){return t.goBack()}),l.Kb(41,"ion-icon",19),l.Mb(42,"ion-text"),l.pc(43," Cancelar "),l.Lb(),l.Lb(),l.Lb(),l.Mb(44,"ion-col",17),l.Mb(45,"ion-button",1),l.Ub("click",function(){return t.validate()}),l.Kb(46,"ion-icon",20),l.Mb(47,"ion-text"),l.pc(48," Guardar "),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Lb()),2&e&&(l.xb(14),l.Zb("ngStyle",l.ec(5,m,"url("+(t.formData.file?"/assets/icon/pdf.svg":"/assets/icon/pdf-upload.svg")+")")),l.xb(6),l.Zb("ngIf",t.formData.file),l.xb(7),l.Zb("value",t.formData.title),l.xb(5),l.Zb("value",t.formData.rolesSelected)("readonly",!0))},directives:[r.r,r.P,r.f,r.e,r.s,r.N,r.o,r.g,r.h,r.E,r.n,i.j,r.K,i.i,r.v,r.w,r.u,r.Y],styles:[".img-upload[_ngcontent-%COMP%]{border-radius:5px 5px 0 0;background-size:contain!important;background-repeat:no-repeat;background-position:50%!important}"]}),e})()}];let p=(()=>{class e{}return e.\u0275mod=l.Hb({type:e}),e.\u0275inj=l.Gb({factory:function(t){return new(t||e)},imports:[[a.j.forChild(f)],a.j]}),e})();var h=o("j1ZV");let g=(()=>{class e{}return e.\u0275mod=l.Hb({type:e}),e.\u0275inj=l.Gb({factory:function(t){return new(t||e)},imports:[[i.b,n.a,r.Q,p,h.a]]}),e})()}}]);