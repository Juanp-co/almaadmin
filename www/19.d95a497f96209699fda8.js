(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{EnSQ:function(t,i,n){"use strict";n.d(i,"a",function(){return o});var e=n("fXoL");let o=(()=>{class t{constructor(){}resizePhoto(t,i,n,e){const o=new FileReader;o.onload=t=>{this.resizeReresize(t.target.result,i,n,e)},o.readAsDataURL(t)}resizeReresize(t,i,n,e){const o=new Image;o.onload=t=>{const r=document.createElement("canvas");let a=o.width,s=o.height;a>s?a>i&&(s*=i/a,a=i):s>i&&(a*=i/s,s=i),r.width=a,r.height=s,r.getContext("2d").drawImage(o,0,0,a,s),this.resizeOuput(r,n,e)},o.src=t}resizeOuput(t,i,n){switch(i){case"file":t.toBlob(t=>{n(t)},"image/jpeg",.8);break;case"dataURL":n(t.toDataURL("image/jpeg",.8))}}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=e.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},OmbT:function(t,i,n){"use strict";function e(t){return t&&/^([A-Z\u00C0-\u024F\u1E00-\u1EFF]?)+([[A-Za-z\u00C0-\u024F\u1E00-\u1EFF]+[,.]?[ ]?|[A-Za-z\u00C0-\u024F\u1E00-\u1EFF]+['-]]?)+$/.test(t)}function o(t){const i=String.fromCharCode(t.charCode);/[0-9.,]/.test(i)||t.preventDefault()}function r(t){const i=String.fromCharCode(t.charCode);/[0-9]/.test(i)||t.preventDefault()}function a(t){const{value:i}=t.target;/^([A-Z\u00C0-\u024F\u1E00-\u1EFF]?)+([[A-Za-z\u00C0-\u024F\u1E00-\u1EFF]+[,.]?[ ]?|[A-Za-z\u00C0-\u024F\u1E00-\u1EFF]+['-]]?)+$/.test(i)||(t.target.value=i.substring(0,i.length-1))}function s(t){return t&&/^[0-9]{1,3}/.test(""+t)}function c(t){return t&&/^[\+]?[(]?([0-9]{2})?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/.test(t)}function l(t){return t&&/^(?=.*\d)?(?=.*[A-Z]{1})?(?=.*[a-z]{1}?)?(?=.*[^\w\d\s:]?)([^\s]){6,25}$/.test(t)}function d(t){return t&&/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(t)}function u(t){return t&&/^[a-zA-Z\xc1\xc9\xcd\xd3\xda\xc0\xc8\xcc\xd2\xd9\xe0\xe8\xec\xf2\xf9\xe1\xe9\xed\xf3\xfa\xc2\xca\xce\xd4\xdb\xe2\xea\xee\xf4\xfb\xc4\xcb\xcf\xd6\xdc\xe4\xeb\xef\xf6\xfc\xf1\xd10-9\s.,#*?\xbf\xa1!()\-+"'/@]{5,2000}/g.test(t)}function b(t){return t&&/\d{4}\-(0?[1-9]|1[012])\-(0?[1-9]|[12][0-9]|3[01])*/.test(""+t)}function f(t){return t&&/^([0-1]?[0-9]|2[0-4]):([0-5][0-9])(:[0-5][0-9])?$/.test(t)}function h(t,i=!1){return!!t&&(i?t.substr(0,40).indexOf("data:application/pdf")>-1:t.substr(0,21).indexOf("data:image/")>-1)}function g(t){return/^(?:(?:(?:http?|https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(""+t)}function m(t){return/(?:https?:\/\/)?(?:www|m\.)?(facebook|fb)\.(com|me)\/(?:(?:\w\.)*#!\/)?(?:pages\/)?(?:[\w\-\.]*\/)*([\w\-\.]*)/gi.test(""+t)}function p(t){return/(?:(?:http|https):\/\/)?(?:www\.)?(?:instagram\.com|instagr\.am)\/([A-Za-z0-9-_\.\/]+)/i.test(""+t)}function L(t){return/^(?:https?:\/\/)?(?:www\.)?twitter\.com\/(#!\/)?[a-zA-Z0-9_]+$/i.test(""+t)}function w(t){return/^((?:https?:)?\/\/)?((?:www|m)\.)?((?:youtube\.com|youtu.be))(\/(?:[\w\-]+\?v=|embed\/|v\/)?)([\w\-]+)(\S+)?$/i.test(""+t)}function k(t,i=!1){return t?i?t.replace(/\n/g,"<br/>"):t.replace(/<br ?\/?>|<BR ?\/?>/g,"\n"):null}function S(t){return t?t.replace(/&NBSP;/g," "):null}n.d(i,"h",function(){return e}),n.d(i,"p",function(){return o}),n.d(i,"q",function(){return r}),n.d(i,"o",function(){return a}),n.d(i,"f",function(){return s}),n.d(i,"j",function(){return c}),n.d(i,"i",function(){return l}),n.d(i,"c",function(){return d}),n.d(i,"k",function(){return u}),n.d(i,"b",function(){return b}),n.d(i,"e",function(){return f}),n.d(i,"a",function(){return h}),n.d(i,"m",function(){return g}),n.d(i,"d",function(){return m}),n.d(i,"g",function(){return p}),n.d(i,"l",function(){return L}),n.d(i,"n",function(){return w}),n.d(i,"s",function(){return k}),n.d(i,"r",function(){return S})},Y16Y:function(t,i,n){"use strict";n.r(i),n.d(i,"CuentasBancariasPageModule",function(){return D});var e=n("ofXK"),o=n("3Pt+"),r=n("TEn/"),a=n("tyNb"),s=n("mrSG"),c=n("+z1p"),l=n("OmbT"),d=n("fXoL"),u=n("1Ldg"),b=n("4WDQ");let f=(()=>{class t{constructor(t,i){this.axios=t,this.globalSer=i}getBanks(){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.axios.getData("/admin/banks");return t&&t.success?t.data.banks||[]:this.globalSer.altResponse(t)})}saveBank(t){return Object(s.a)(this,void 0,void 0,function*(){const i=yield this.axios.postData("/admin/banks",t);return i&&i.success?i.data.bank:this.globalSer.altResponse(i)})}updateBank(t,i){return Object(s.a)(this,void 0,void 0,function*(){const n=yield this.axios.putData("/admin/banks/"+t,i);return n&&n.success?n.data.bank:this.globalSer.altResponse(n)})}deleteBank(t){return Object(s.a)(this,void 0,void 0,function*(){const i=yield this.axios.deleteData("/admin/banks/"+t);return i&&i.success?i.data.msg:this.globalSer.altResponse(i)})}}return t.\u0275fac=function(i){return new(i||t)(d.Qb(u.a),d.Qb(b.a))},t.\u0275prov=d.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var h=n("EnSQ"),g=n("zioG");function m(t,i){if(1&t){const t=d.Nb();d.Mb(0,"ion-button",6),d.Ub("click",function(){return d.ic(t),d.Wb(2).showForm({clean:!0})}),d.Kb(1,"ion-icon",7),d.Mb(2,"ion-text"),d.pc(3,"Agregar cuenta"),d.Lb(),d.Lb()}}function p(t,i){if(1&t&&(d.Mb(0,"ion-buttons",4),d.nc(1,m,4,0,"ion-button",5),d.Lb()),2&t){const t=d.Wb();d.xb(1),d.Zb("ngIf",!t.edit)}}function L(t,i){if(1&t){const t=d.Nb();d.Mb(0,"ion-col",8),d.Mb(1,"ion-card"),d.Mb(2,"ion-card-header"),d.Mb(3,"ion-card-title"),d.pc(4),d.Lb(),d.Lb(),d.Mb(5,"ion-card-content"),d.Mb(6,"ion-row"),d.Mb(7,"ion-col",9),d.Mb(8,"ion-row"),d.Mb(9,"ion-col",10),d.Mb(10,"ion-item"),d.Mb(11,"ion-label",11),d.pc(12,"Nombre del banco (*)"),d.Lb(),d.Mb(13,"ion-input",12),d.Ub("ngModelChange",function(i){return d.ic(t),d.Wb().formData.title=i}),d.Lb(),d.Lb(),d.Lb(),d.Mb(14,"ion-col",13),d.Mb(15,"ckeditor",14),d.Ub("ngModelChange",function(i){return d.ic(t),d.Wb().formData.description=i}),d.Lb(),d.Lb(),d.Lb(),d.Lb(),d.Mb(16,"ion-col",15),d.Mb(17,"ion-row",16),d.Mb(18,"ion-col",17),d.Mb(19,"label",18),d.Mb(20,"input",19),d.Ub("change",function(i){return d.ic(t),d.Wb().openFile(i)}),d.Lb(),d.Kb(21,"img",20),d.Lb(),d.Lb(),d.Mb(22,"ion-col",17),d.Mb(23,"ion-text"),d.Mb(24,"i",21),d.pc(25,"Clic para cargar una imagen del banco (*)"),d.Lb(),d.Lb(),d.Lb(),d.Lb(),d.Lb(),d.Mb(26,"ion-col",22),d.Mb(27,"ion-text",23),d.Mb(28,"i",21),d.pc(29,"(*) Campos requeridos."),d.Lb(),d.Lb(),d.Lb(),d.Mb(30,"ion-col",24),d.Mb(31,"ion-button",25),d.Ub("click",function(){return d.ic(t),d.Wb().showForm({clean:!0})}),d.Kb(32,"ion-icon",26),d.Mb(33,"ion-text"),d.pc(34,"Cancelar"),d.Lb(),d.Lb(),d.Mb(35,"ion-button",6),d.Ub("click",function(){d.ic(t);const i=d.Wb();return i.confirmForm(i.formData._id)}),d.Kb(36,"ion-icon",27),d.Mb(37,"ion-text"),d.pc(38,"Guardar"),d.Lb(),d.Lb(),d.Lb(),d.Lb(),d.Lb(),d.Lb(),d.Lb()}if(2&t){const t=d.Wb();d.Zb("size",12),d.xb(4),d.qc(t.formData._id?"Editar datos":"Agregar cuenta"),d.xb(3),d.Zb("size",12),d.xb(6),d.Zb("ngModel",t.formData.title),d.xb(2),d.Zb("ngModel",t.formData.description)("editor",t.Editor)("config",t.configEditor),d.xb(1),d.Zb("size",12),d.xb(5),d.Zb("src",t.formData.picture||"assets/photo.png",d.kc)}}function w(t,i){if(1&t&&(d.Mb(0,"ion-card",33),d.Mb(1,"ion-card-content",34),d.Mb(2,"ion-row"),d.Mb(3,"ion-col",10),d.Kb(4,"ion-img",35),d.Lb(),d.Mb(5,"ion-col",10),d.Mb(6,"ion-text",36),d.Mb(7,"b"),d.pc(8),d.Lb(),d.Lb(),d.Kb(9,"br"),d.Mb(10,"i",21),d.pc(11,"Clic para m\xe1s informaci\xf3n."),d.Lb(),d.Lb(),d.Lb(),d.Lb(),d.Lb()),2&t){const t=d.Wb().$implicit;d.xb(4),d.Zb("src",t.picture),d.xb(4),d.qc(t.title)}}function k(t,i){if(1&t){const t=d.Nb();d.Mb(0,"ion-col",31),d.Ub("click",function(){d.ic(t);const n=i.$implicit;return d.Wb(3).showDetails(n._id)}),d.nc(1,w,12,2,"ion-card",32),d.Lb()}if(2&t){const t=i.$implicit;d.xb(1),d.Zb("ngIf",t)}}function S(t,i){if(1&t&&(d.Mb(0,"ion-row"),d.nc(1,k,2,1,"ion-col",30),d.Lb()),2&t){const t=d.Wb(2);d.xb(1),d.Zb("ngForOf",t.banks)}}function M(t,i){1&t&&(d.Mb(0,"ion-card"),d.Mb(1,"ion-text",23),d.Mb(2,"p",37),d.Kb(3,"ion-icon",38),d.pc(4," No existen cuentas bancarias registradas. "),d.Lb(),d.Lb(),d.Lb())}function x(t,i){if(1&t&&(d.Mb(0,"ion-col",10),d.nc(1,S,2,1,"ion-row",28),d.nc(2,M,5,0,"ng-template",null,29,d.oc),d.Lb()),2&t){const t=d.hc(3),i=d.Wb();d.xb(1),d.Zb("ngIf",i.banks&&i.banks.length>0)("ngIfElse",t)}}const v=[{path:"",component:(()=>{class t{constructor(t,i,n,e,o,r){this.alertCtrl=t,this.axios=i,this.cuentaBancariasService=n,this.dataService=e,this.globalSer=o,this.router=r,this.banks=[],this.formData={_id:null,title:null,description:null,picture:null},this.Editor=c,this.configEditor=null,this.edit=!1,this.showAddButton=!1,this.globalSer.checkSession()?(this.configEditor=this.globalSer.configEditor,this.configEditor.placeholder="Indica los datos bancarios aqu\xed (*) ..."):this.router.navigate(["/ingresar"])}ngOnInit(){return Object(s.a)(this,void 0,void 0,function*(){this.showAddButton=this.globalSer.checkRoleToEnableAddOrUpdate(),yield this.getBanks()})}ionViewWillEnter(){return Object(s.a)(this,void 0,void 0,function*(){this.globalSer.checkSession()||(yield this.router.navigate(["/ingresar"]))})}getBanks(){return Object(s.a)(this,void 0,void 0,function*(){yield this.globalSer.presentLoading();const t=yield this.cuentaBancariasService.getBanks();t&&!t.error?(this.banks=t,yield this.globalSer.dismissLoading()):t&&t.error?(yield this.globalSer.dismissLoading(),yield this.globalSer.errorSession()):yield this.globalSer.dismissLoading()})}saveBanks(){return Object(s.a)(this,void 0,void 0,function*(){yield this.globalSer.presentLoading();const t=yield this.cuentaBancariasService.saveBank(this.formData);t&&!t.error?(this.banks.push(t),this.showForm({clean:!0}),yield this.globalSer.dismissLoading(),yield this.globalSer.presentAlert("\xa1\xc9xito!","Se ha guardado la cuenta bancaria exitosamente.")):t&&t.error?(yield this.globalSer.dismissLoading(),yield this.globalSer.errorSession()):yield this.globalSer.dismissLoading()})}updateBanks(t=null){return Object(s.a)(this,void 0,void 0,function*(){if(t){yield this.globalSer.presentLoading();const i=yield this.cuentaBancariasService.updateBank(t,this.formData);if(i&&!i.error){const n=this.banks.findIndex(i=>i._id===t);n>-1?(this.banks[n].title=i.title,this.banks[n].description=i.description,this.banks[n].picture=i.picture):this.banks.push(i),this.showForm({clean:!0}),yield this.globalSer.dismissLoading(),yield this.globalSer.presentAlert("\xa1\xc9xito!","Se ha actualizado la cuenta bancaria exitosamente.")}else i&&i.error?(yield this.globalSer.dismissLoading(),yield this.globalSer.errorSession()):yield this.globalSer.dismissLoading()}else yield this.globalSer.presentAlert("Error","Disculpe, pero ha ocurrido un error al momento de obtener la informaci\xf3n a actualizar.")})}deleteBank(t=null){return Object(s.a)(this,void 0,void 0,function*(){if(t){yield this.globalSer.presentLoading();const i=yield this.cuentaBancariasService.deleteBank(t);i&&!i.error?(this.banks=this.banks.filter(i=>i._id!==t),yield this.globalSer.dismissLoading(),yield this.globalSer.presentAlert("\xa1\xc9xito!","Se ha eliminado la cuenta bancaria exitosamente.")):i&&i.error?(yield this.globalSer.dismissLoading(),yield this.globalSer.errorSession()):yield this.globalSer.dismissLoading()}else yield this.globalSer.presentAlert("Error","Disculpe, pero ha ocurrido un error al momento de obtener la informaci\xf3n a actualizar.")})}openFile(t){const i=t.target.files;if("object"!=typeof i[0])return!1;this.dataService.resizePhoto(i[0],900,"dataURL",t=>{this.formData.picture=t})}showForm({id:t,clean:i}){if(i&&(this.formData._id=null,this.formData.title=null,this.formData.description=null,this.formData.picture=null),t){const i=this.banks.find(i=>i._id===t);i&&(this.formData._id=i._id,this.formData.title=i.title,this.formData.description=i.description,this.formData.picture=i.picture)}this.edit=!this.edit}showDetails(t){return Object(s.a)(this,void 0,void 0,function*(){const i=this.banks.find(i=>i._id===t);if(i){const n=this.showAddButton?[{text:"Eliminar",handler:()=>this.confirmForm(t,!0)},{text:"Editar",handler:()=>this.showForm({id:t,clean:!0})}]:[];n.push({text:"Cerrar",handler:()=>{}});const e=`<img src="${i.picture}" alt="bank_img" class="max-height-pic"> <br/>${Object(l.s)(i.description,!0)}`,o=yield this.alertCtrl.create({cssClass:"max-width-640",header:i.title,message:e,buttons:n});yield o.present()}})}validate(){return Object(l.k)(this.formData.title)?!this.formData.description||this.formData.description&&this.formData.description.length<=5?"Disculpe, pero debe indicar los datos bancarios correctamente.":this.formData.picture||Object(l.a)(this.formData.picture)?null:"Disculpe, pero debe indicar una imagen para el banco.":"Disculpe, pero debe indicar el nombre del banco."}confirmForm(t=null,i=!1){return Object(s.a)(this,void 0,void 0,function*(){let n="\xbfEst\xe1 seguro qu\xe9 desea __ACTION__ esta informaci\xf3n?",e=!1;if(i)n=n.replace("__ACTION__","borrar");else{const i=this.validate();i?yield this.globalSer.presentAlert("Error",i||"Disculpe, pero debe completar el formulario."):(e=!0,n=n.replace("__ACTION__",t?"actualizar":"agregar"))}e&&(yield this.globalSer.alertConfirm({header:"Confirme",message:n,confirmAction:()=>{t?t&&!i?this.updateBanks(t):this.deleteBank(t):this.saveBanks()}}))})}}return t.\u0275fac=function(i){return new(i||t)(d.Jb(r.a),d.Jb(u.a),d.Jb(f),d.Jb(h.a),d.Jb(b.a),d.Jb(a.g))},t.\u0275cmp=d.Db({type:t,selectors:[["app-cuentas-bancarias"]],decls:9,vars:3,consts:[["slot","end",4,"ngIf"],[1,"ion-margin-bottom"],["class","ion-no-margin ion-no-padding",3,"size",4,"ngIf"],["size","12",4,"ngIf"],["slot","end"],["color","primary",3,"click",4,"ngIf"],["color","primary",3,"click"],["name","add-outline","slot","start"],[1,"ion-no-margin","ion-no-padding",3,"size"],["size-sm","8",3,"size"],["size","12"],["position","floating","color","medium"],["maxlength","30",1,"ion-text-uppercase",3,"ngModel","ngModelChange"],["size","12",1,"editor"],[3,"ngModel","editor","config","ngModelChange"],["size-sm","4",3,"size"],[1,"ion-justify-content-center","ion-margin"],["size","12",1,"ion-text-center"],[1,"micursor","ion-text-center","w-100"],["type","file","accept","image/x-png,image/gif,image/jpeg","hidden","",3,"change"],[1,"img-fluid",3,"src"],[1,"toSmall"],["size","12","size-sm","12",1,"ion-margin-top"],["color","medium"],["size","12","size-sm","12",1,"ion-margin-top","ion-margin-bottom","ion-text-center"],["color","medium",3,"click"],["name","close-outline","slot","start"],["name","save-outline","slot","start"],[4,"ngIf","ngIfElse"],["noBanks",""],["size","12","size-sm","4",3,"click",4,"ngFor","ngForOf"],["size","12","size-sm","4",3,"click"],["class","ion-no-padding ion-no-margin ion-margin-start ion-margin-end ion-margin-bottom card-item",4,"ngIf"],[1,"ion-no-padding","ion-no-margin","ion-margin-start","ion-margin-end","ion-margin-bottom","card-item"],[1,"ion-no-margin","ion-no-padding"],[1,"pictureIcon",3,"src"],["color","primary",1,"ion-margin-top","ion-margin-bottom"],[1,"ion-text-center","no-selected-text"],["name","alert-circle-outline"]],template:function(t,i){1&t&&(d.Mb(0,"ion-header"),d.Mb(1,"ion-toolbar"),d.Mb(2,"ion-title"),d.pc(3,"Cuentas bancarias"),d.Lb(),d.nc(4,p,2,1,"ion-buttons",0),d.Lb(),d.Lb(),d.Mb(5,"ion-content"),d.Mb(6,"ion-row",1),d.nc(7,L,39,9,"ion-col",2),d.nc(8,x,4,2,"ion-col",3),d.Lb(),d.Lb()),2&t&&(d.xb(4),d.Zb("ngIf",i.showAddButton),d.xb(3),d.Zb("ngIf",i.showAddButton&&i.edit),d.xb(1),d.Zb("ngIf",!i.edit))},directives:[r.r,r.O,r.M,e.i,r.o,r.E,r.f,r.e,r.s,r.J,r.n,r.g,r.i,r.k,r.h,r.v,r.w,r.u,r.X,o.b,o.e,o.f,g.a,e.h,r.t],styles:[".max-width-640{--width:640px}  .ck-editor__editable_inline{min-height:250px;color:#333!important}  .max-height-pic{max-height:120px;margin:0 auto!important}  .card-item{height:100%}  .pictureIcon{width:auto!important;height:150px!important}"]}),t})()}];let y=(()=>{class t{}return t.\u0275mod=d.Hb({type:t}),t.\u0275inj=d.Gb({factory:function(i){return new(i||t)},imports:[[a.j.forChild(v)],a.j]}),t})();var z=n("j1ZV");let D=(()=>{class t{}return t.\u0275mod=d.Hb({type:t}),t.\u0275inj=d.Gb({factory:function(i){return new(i||t)},imports:[[e.b,o.a,r.P,y,z.a,g.b]]}),t})()}}]);