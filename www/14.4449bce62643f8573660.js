(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"13Ln":function(t,e,i){t.exports=function(){"use strict";var t,e,i=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,n=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,o={years:31536e6,months:2592e6,days:864e5,hours:36e5,minutes:6e4,seconds:1e3,milliseconds:1,weeks:6048e5},r=function(t){return t instanceof u},s=function(t,e,i){return new u(t,i,e.$l)},a=function(t){return e.p(t)+"s"},d=function(t){return t<0},l=function(t){return d(t)?Math.ceil(t):Math.floor(t)},c=function(t,e){return t?d(t)?{negative:!0,format:""+function(t){return Math.abs(t)}(t)+e}:{negative:!1,format:""+t+e}:{negative:!1,format:""}},u=function(){function d(t,e,i){var r=this;if(this.$d={},this.$l=i,e)return s(t*o[a(e)],this);if("number"==typeof t)return this.$ms=t,this.parseFromMilliseconds(),this;if("object"==typeof t)return Object.keys(t).forEach(function(e){r.$d[a(e)]=t[e]}),this.calMilliseconds(),this;if("string"==typeof t){var d=t.match(n);if(d)return this.$d.years=d[2],this.$d.months=d[3],this.$d.weeks=d[4],this.$d.days=d[5],this.$d.hours=d[6],this.$d.minutes=d[7],this.$d.seconds=d[8],this.calMilliseconds(),this}return this}var u=d.prototype;return u.calMilliseconds=function(){var t=this;this.$ms=Object.keys(this.$d).reduce(function(e,i){return e+(t.$d[i]||0)*o[i]},0)},u.parseFromMilliseconds=function(){var t=this.$ms;this.$d.years=l(t/31536e6),this.$d.months=l((t%=31536e6)/2592e6),this.$d.days=l((t%=2592e6)/864e5),this.$d.hours=l((t%=864e5)/36e5),this.$d.minutes=l((t%=36e5)/6e4),this.$d.seconds=l((t%=6e4)/1e3),this.$d.milliseconds=t%=1e3},u.toISOString=function(){var t=c(this.$d.years,"Y"),e=c(this.$d.months,"M"),i=+this.$d.days||0;this.$d.weeks&&(i+=7*this.$d.weeks);var n=c(i,"D"),o=c(this.$d.hours,"H"),r=c(this.$d.minutes,"M"),s=this.$d.seconds||0;this.$d.milliseconds&&(s+=this.$d.milliseconds/1e3);var a=c(s,"S"),d=(t.negative||e.negative||n.negative||o.negative||r.negative||a.negative?"-":"")+"P"+t.format+e.format+n.format+(o.format||r.format||a.format?"T":"")+o.format+r.format+a.format;return"P"===d||"-P"===d?"P0D":d},u.toJSON=function(){return this.toISOString()},u.format=function(t){var n=t||"YYYY-MM-DDTHH:mm:ss",o={Y:this.$d.years,YY:e.s(this.$d.years,2,"0"),YYYY:e.s(this.$d.years,4,"0"),M:this.$d.months,MM:e.s(this.$d.months,2,"0"),D:this.$d.days,DD:e.s(this.$d.days,2,"0"),H:this.$d.hours,HH:e.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:e.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:e.s(this.$d.seconds,2,"0"),SSS:e.s(this.$d.milliseconds,3,"0")};return n.replace(i,function(t,e){return e||String(o[t])})},u.as=function(t){return this.$ms/o[a(t)]},u.get=function(t){var e=this.$ms,i=a(t);return"milliseconds"===i?e%=1e3:e="weeks"===i?l(e/o[i]):this.$d[i],0===e?0:e},u.add=function(t,e,i){var n;return n=e?t*o[a(e)]:r(t)?t.$ms:s(t,this).$ms,s(this.$ms+n*(i?-1:1),this)},u.subtract=function(t,e){return this.add(t,e,!0)},u.locale=function(t){var e=this.clone();return e.$l=t,e},u.clone=function(){return s(this.$ms,this)},u.humanize=function(e){return t().add(this.$ms,"ms").locale(this.$l).fromNow(!e)},u.milliseconds=function(){return this.get("milliseconds")},u.asMilliseconds=function(){return this.as("milliseconds")},u.seconds=function(){return this.get("seconds")},u.asSeconds=function(){return this.as("seconds")},u.minutes=function(){return this.get("minutes")},u.asMinutes=function(){return this.as("minutes")},u.hours=function(){return this.get("hours")},u.asHours=function(){return this.as("hours")},u.days=function(){return this.get("days")},u.asDays=function(){return this.as("days")},u.weeks=function(){return this.get("weeks")},u.asWeeks=function(){return this.as("weeks")},u.months=function(){return this.get("months")},u.asMonths=function(){return this.as("months")},u.years=function(){return this.get("years")},u.asYears=function(){return this.as("years")},d}();return function(i,n,o){t=o,e=o().$utils(),o.duration=function(t,e){var i=o.locale();return s(t,{$l:i},e)},o.isDuration=r;var a=n.prototype.add,d=n.prototype.subtract;n.prototype.add=function(t,e){return r(t)&&(t=t.asMilliseconds()),a.bind(this)(t,e)},n.prototype.subtract=function(t,e){return r(t)&&(t=t.asMilliseconds()),d.bind(this)(t,e)}}}()},"4HKe":function(t,e,i){t.exports=function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var e={name:"es",monthsShort:"ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),weekdays:"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),weekdaysShort:"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s\xe1".split("_"),months:"Enero_Febrero_Marzo_Abril_Mayo_Junio_Julio_Agosto_Septiembre_Octubre_Noviembre_Diciembre".split("_"),weekStart:1,formats:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un d\xeda",dd:"%d d\xedas",M:"un mes",MM:"%d meses",y:"un a\xf1o",yy:"%d a\xf1os"},ordinal:function(t){return t+"\xba"}};return t.locale(e,null,!0),e}(i("Wgwc"))},OmbT:function(t,e,i){"use strict";function n(t){return t&&/^([A-Z\u00C0-\u024F\u1E00-\u1EFF]?)+([[A-Za-z\u00C0-\u024F\u1E00-\u1EFF]+[,.]?[ ]?|[A-Za-z\u00C0-\u024F\u1E00-\u1EFF]+['-]]?)+$/.test(t)}function o(t){const e=String.fromCharCode(t.charCode);/[0-9.,]/.test(e)||t.preventDefault()}function r(t){const{value:e}=t.target;/^([A-Z\u00C0-\u024F\u1E00-\u1EFF]?)+([[A-Za-z\u00C0-\u024F\u1E00-\u1EFF]+[,.]?[ ]?|[A-Za-z\u00C0-\u024F\u1E00-\u1EFF]+['-]]?)+$/.test(e)||(t.target.value=e.substring(0,e.length-1))}function s(t){return t&&/^[0-9]{1,3}/.test(""+t)}function a(t){return t&&/^([CC|CE|PE|TI|PAS]){2,3}[0-9]{5,20}$/.test(t)}function d(t){return t&&/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/.test(t)}function l(t){return t&&/^[\+]?[(]?([0-9]{2})?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/.test(t)}function c(t){return t&&/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(t)}function u(t){return t&&/^[a-zA-Z\xc1\xc9\xcd\xd3\xda\xc0\xc8\xcc\xd2\xd9\xe0\xe8\xec\xf2\xf9\xe1\xe9\xed\xf3\xfa\xc2\xca\xce\xd4\xdb\xe2\xea\xee\xf4\xfb\xc4\xcb\xcf\xd6\xdc\xe4\xeb\xef\xf6\xfc\xf1\xd10-9\s.,#*?\xbf\xa1!()\-+"'/@]{5,2000}/g.test(t)}function h(t){return t&&/\d{4}\-(0?[1-9]|1[012])\-(0?[1-9]|[12][0-9]|3[01])*/.test(""+t)}function b(t){return t&&/^([0-1]?[0-9]|2[0-4]):([0-5][0-9])(:[0-5][0-9])?$/.test(t)}function m(t,e=!1){return!!t&&(e?t.substr(0,40).indexOf("data:application/pdf")>-1:t.substr(0,21).indexOf("data:image/")>-1)}function f(t,e=!1){return t?e?t.replace(/\n/g,"<br/>"):t.replace(/<br ?\/?>/g,"\n"):null}function g(t){return t?t.replace(/&NBSP;/g," "):null}i.d(e,"g",function(){return n}),i.d(e,"l",function(){return o}),i.d(e,"k",function(){return r}),i.d(e,"f",function(){return s}),i.d(e,"c",function(){return a}),i.d(e,"j",function(){return d}),i.d(e,"h",function(){return l}),i.d(e,"d",function(){return c}),i.d(e,"i",function(){return u}),i.d(e,"b",function(){return h}),i.d(e,"e",function(){return b}),i.d(e,"a",function(){return m}),i.d(e,"n",function(){return f}),i.d(e,"m",function(){return g})},QgiU:function(t,e,i){t.exports=function(){"use strict";return function(t,e,i){t=t||{};var n=e.prototype,o={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function r(t,e,i,o){return n.fromToBase(t,e,i,o)}i.en.relativeTime=o,n.fromToBase=function(e,n,r,s,a){for(var d,l,c,u=r.$locale().relativeTime||o,h=t.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],b=h.length,m=0;m<b;m+=1){var f=h[m];f.d&&(d=s?i(e).diff(r,f.d,!0):r.diff(e,f.d,!0));var g=(t.rounding||Math.round)(Math.abs(d));if(c=d>0,g<=f.r||!f.r){g<=1&&m>0&&(f=h[m-1]);var M=u[f.l];a&&(g=a(""+g)),l="string"==typeof M?M.replace("%d",g):M(g,n,f.l,c);break}}if(n)return l;var v=c?u.future:u.past;return"function"==typeof v?v(l):v.replace("%s",l)},n.to=function(t,e){return r(t,e,this,!0)},n.from=function(t,e){return r(t,e,this)};var s=function(t){return t.$u?i.utc():i()};n.toNow=function(t){return this.to(s(this),t)},n.fromNow=function(t){return this.from(s(this),t)}}}()},TjVE:function(t,e,i){"use strict";i.r(e),i.d(e,"EventosPageModule",function(){return O});var n=i("ofXK"),o=i("3Pt+"),r=i("TEn/"),s=i("tyNb"),a=i("mrSG"),d=i("+z1p"),l=i("Wgwc"),c=i.n(l),u=i("OmbT"),h=i("fXoL"),b=i("1Ldg"),m=i("4WDQ");let f=(()=>{class t{constructor(t,e){this.axios=t,this.globalSer=e}getEvents(t={}){return Object(a.a)(this,void 0,void 0,function*(){const e=yield this.axios.getData("/admin/events",t);return e&&e.success?e.data.events:this.globalSer.altResponse(e)})}addEvent(t){return Object(a.a)(this,void 0,void 0,function*(){const e=yield this.axios.postData("/admin/events",t);return e&&e.success?e.data:this.globalSer.altResponse(e)})}updateEvent(t,e){return Object(a.a)(this,void 0,void 0,function*(){const i=yield this.axios.putData("/admin/events/"+t,e);return i&&i.success?i.data.msg:this.globalSer.altResponse(i)})}deleteEvent(t){return Object(a.a)(this,void 0,void 0,function*(){const e=yield this.axios.deleteData("/admin/events/"+t);return e&&e.success?e.data.msg:this.globalSer.altResponse(e)})}}return t.\u0275fac=function(e){return new(e||t)(h.Qb(b.a),h.Qb(m.a))},t.\u0275prov=h.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var g=i("zioG"),M=i("13Ln"),v=i.n(M),p=(i("4HKe"),i("QgiU")),D=i.n(p);function y(t,e){if(1&t&&(h.Mb(0,"ion-card",1),h.Mb(1,"ion-card-content",2),h.Mb(2,"ion-row"),h.Mb(3,"ion-col",3),h.Kb(4,"ion-img",4),h.Lb(),h.Mb(5,"ion-col",5),h.Mb(6,"ion-text",6),h.Mb(7,"h3"),h.mc(8),h.Lb(),h.Lb(),h.Mb(9,"ion-text"),h.Mb(10,"b"),h.mc(11,"Fecha:"),h.Lb(),h.mc(12),h.Lb(),h.Kb(13,"br"),h.Mb(14,"ion-text",7),h.Mb(15,"i",8),h.mc(16,"Clic para m\xe1s informaci\xf3n."),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Lb()),2&t){const t=h.Wb();h.xb(4),h.Zb("src","/assets/icon/evento_lista.svg"),h.xb(4),h.nc(t.eventData.title?t.eventData.title:""),h.xb(4),h.oc(" ",t.eventData.date?t.eventData.date:"","")}}let L=(()=>{class t{constructor(){this.eventData={_id:null,title:null,user:null,description:null,date:null,initHour:null,endHour:null},c.a.extend(v.a),c.a.extend(D.a)}ngOnInit(){this.data&&(this.eventData._id=this.data._id,this.eventData.title=this.data.title,this.eventData.user=this.data.user,this.eventData.description=this.data.description,this.eventData.date=c()(this.data.date).locale("es").format("dddd, DD [de] MMMM [de] YYYY"),this.eventData.initHour=c()(`${this.data.date} ${this.eventData.initHour}`).format("hh:mm a"),this.eventData.endHour=this.data.endHour?c()(`${this.data.date} ${this.data.endHour}`).format("hh:mm a"):null)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=h.Db({type:t,selectors:[["app-eventcard"]],inputs:{data:"data"},decls:1,vars:1,consts:[["class","min-height-120 ion-no-margin ion-margin-bottom",4,"ngIf"],[1,"min-height-120","ion-no-margin","ion-margin-bottom"],[1,"ion-no-margin","ion-no-padding"],["size","3"],[1,"pictureIcon",3,"src"],["size","9"],["color","primary",1,"ion-margin-top","ion-margin-bottom"],[1,"ion-margin-top"],[1,"toSmall"]],template:function(t,e){1&t&&h.kc(0,y,17,3,"ion-card",0),2&t&&h.Zb("ngIf",e.eventData._id)},directives:[n.i,r.g,r.h,r.D,r.n,r.t,r.H],styles:[".min-height-120[_ngcontent-%COMP%]{min-height:120px!important}"]}),t})();function H(t,e){if(1&t){const t=h.Nb();h.Mb(0,"ion-button",12),h.Ub("click",function(){return h.gc(t),h.Wb().setShowForm({id:null,edit:!1,show:!0,disable:!1})}),h.Kb(1,"ion-icon",13),h.Mb(2,"ion-text"),h.mc(3,"Agregar evento"),h.Lb(),h.Lb()}}function S(t,e){if(1&t){const t=h.Nb();h.Mb(0,"ion-card",14),h.Mb(1,"ion-card-content"),h.Mb(2,"ion-row"),h.Mb(3,"ion-col",15),h.Mb(4,"ion-card-title"),h.mc(5),h.Lb(),h.Lb(),h.Mb(6,"ion-col",15),h.Mb(7,"ion-item"),h.Mb(8,"ion-label",16),h.mc(9,"T\xedtulo del evento (*)"),h.Lb(),h.Mb(10,"ion-input",17),h.Ub("ngModelChange",function(e){return h.gc(t),h.Wb().formData.title=e}),h.Lb(),h.Lb(),h.Lb(),h.Mb(11,"ion-col",15),h.Mb(12,"ckeditor",18),h.Ub("ngModelChange",function(e){return h.gc(t),h.Wb().formData.description=e}),h.Lb(),h.Lb(),h.Mb(13,"ion-col",19),h.Mb(14,"ion-item"),h.Mb(15,"ion-label",16),h.mc(16,"Fecha del evento (*)"),h.Lb(),h.Mb(17,"ion-datetime",20),h.Ub("ngModelChange",function(e){return h.gc(t),h.Wb().formData.date=e})("ionChange",function(){return h.gc(t),h.Wb().setMinEndHour("date")}),h.Lb(),h.Lb(),h.Lb(),h.Mb(18,"ion-col",19),h.Mb(19,"ion-item"),h.Mb(20,"ion-label",16),h.mc(21,"Hora inicio (*)"),h.Lb(),h.Mb(22,"ion-datetime",21),h.Ub("ngModelChange",function(e){return h.gc(t),h.Wb().formData.initHour=e})("ionChange",function(){return h.gc(t),h.Wb().setMinEndHour("initHour")}),h.Lb(),h.Lb(),h.Lb(),h.Mb(23,"ion-col",19),h.Mb(24,"ion-item"),h.Mb(25,"ion-label",16),h.mc(26,"Hora fin (*)"),h.Lb(),h.Mb(27,"ion-datetime",22),h.Ub("ngModelChange",function(e){return h.gc(t),h.Wb().formData.endHour=e}),h.Lb(),h.Lb(),h.Lb(),h.Mb(28,"ion-col",15),h.Mb(29,"ion-item"),h.Mb(30,"ion-label",16),h.mc(31,"Dirigido a (*)"),h.Lb(),h.Mb(32,"ion-input",23),h.Ub("ngModelChange",function(e){return h.gc(t),h.Wb().formData.rolesSelected=e})("click",function(){h.gc(t);const e=h.Wb();return e.disableEdit?null:e.showAlertRolesList(e.formData.toRoles)}),h.Lb(),h.Lb(),h.Lb(),h.Mb(33,"ion-col",24),h.Mb(34,"ion-text",25),h.Mb(35,"i",26),h.mc(36,"(*) Campos requeridos."),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Mb(37,"ion-row",27),h.Mb(38,"ion-col",28),h.Mb(39,"ion-button",29),h.Ub("click",function(){return h.gc(t),h.Wb().setShowForm({id:null,edit:!1,show:!1})}),h.Kb(40,"ion-icon",30),h.Mb(41,"ion-text"),h.mc(42,"Cancelar"),h.Lb(),h.Lb(),h.Mb(43,"ion-button",31),h.Ub("click",function(){h.gc(t);const e=h.Wb();return e.confirmAction({update:e.edit,id:e.formData._id})}),h.Kb(44,"ion-icon",32),h.Mb(45,"ion-text"),h.mc(46,"Guardar"),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Lb()}if(2&t){const t=h.Wb();h.xb(5),h.nc(t.edit?"Editar evento":"Crear evento"),h.xb(5),h.Zb("ngModel",t.formData.title)("disabled",t.disableEdit),h.xb(2),h.Zb("ngModel",t.formData.description)("editor",t.Editor)("config",t.configEditor),h.xb(5),h.Zb("ngModel",t.formData.date)("min",t.minDate)("max",t.maxDate)("disabled",t.disableEdit),h.xb(5),h.Zb("ngModel",t.formData.initHour)("min",t.minInitHour)("disabled",t.disableEdit||!t.formData.date),h.xb(5),h.Zb("ngModel",t.formData.endHour)("min",t.minEndHour)("disabled",t.disableEdit||!t.formData.date),h.xb(5),h.Zb("ngModel",t.formData.rolesSelected)("value",t.formData.rolesSelected)("readonly",!0)("disabled",t.disableEdit)}}function Y(t,e){1&t&&h.Kb(0,"ion-icon",33)}function x(t,e){1&t&&h.Kb(0,"ion-icon",30)}function $(t,e){if(1&t){const t=h.Nb();h.Mb(0,"ion-card"),h.Mb(1,"ion-card-content"),h.Mb(2,"ion-row"),h.Mb(3,"ion-col",19),h.Mb(4,"ion-item"),h.Mb(5,"ion-label",16),h.mc(6,"Ordenar por:"),h.Lb(),h.Mb(7,"ion-input",34),h.Ub("click",function(){return h.gc(t),h.Wb().setOrderData()}),h.Lb(),h.Lb(),h.Lb(),h.Mb(8,"ion-col",19),h.Mb(9,"ion-item"),h.Mb(10,"ion-label",16),h.mc(11,"A partir de:"),h.Lb(),h.Mb(12,"ion-datetime",35),h.Ub("ngModelChange",function(e){return h.gc(t),h.Wb().queryParams.initDate=e}),h.Lb(),h.Lb(),h.Lb(),h.Mb(13,"ion-col",19),h.Mb(14,"ion-item"),h.Mb(15,"ion-label",16),h.mc(16,"Hasta:"),h.Lb(),h.Mb(17,"ion-datetime",36),h.Ub("ngModelChange",function(e){return h.gc(t),h.Wb().queryParams.endDate=e}),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Mb(18,"ion-row",27),h.Mb(19,"ion-col",37),h.Mb(20,"ion-button",38),h.Ub("click",function(){return h.gc(t),h.Wb().resetQueryParams()}),h.Kb(21,"ion-icon",39),h.Mb(22,"ion-text"),h.mc(23,"Limpiar"),h.Lb(),h.Lb(),h.Lb(),h.Mb(24,"ion-col",37),h.Mb(25,"ion-button",40),h.Ub("click",function(){return h.gc(t),h.Wb().getEventsList()}),h.Kb(26,"ion-icon",41),h.Mb(27,"ion-text"),h.mc(28,"Aplicar"),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Lb()}if(2&t){const t=h.Wb();h.xb(7),h.Zb("readonly",!0)("value",-1===t.queryParams.value?"Fecha ascendente":"Fecha descendente"),h.xb(5),h.Zb("ngModel",t.queryParams.initDate),h.xb(5),h.Zb("ngModel",t.queryParams.endDate)}}function w(t,e){if(1&t){const t=h.Nb();h.Mb(0,"ion-col",43),h.Ub("click",function(){h.gc(t);const i=e.$implicit;return h.Wb(2).showEvent(i._id)}),h.Kb(1,"app-eventcard",44),h.Lb()}if(2&t){const t=e.$implicit;h.xb(1),h.Zb("data",t)}}function E(t,e){if(1&t&&(h.Mb(0,"div"),h.Mb(1,"ion-row"),h.kc(2,w,2,1,"ion-col",42),h.Lb(),h.Lb()),2&t){const t=h.Wb();h.xb(2),h.Zb("ngForOf",t.events)}}function _(t,e){1&t&&(h.Mb(0,"ion-card",45),h.Mb(1,"ion-text"),h.Mb(2,"p",46),h.Kb(3,"ion-icon",47),h.mc(4," No se encontraron eventos. "),h.Lb(),h.Lb(),h.Lb())}const F=[{path:"",component:(()=>{class t{constructor(t,e,i,n,o){this.alertCtrl=t,this.eventsService=e,this.globalSer=i,this.modalController=n,this.router=o,this.Editor=d,this.configEditor=null,this.queryParams={input:"date",value:-1,initDate:c()().format("YYYY-MM-DD"),endDate:null},this.formData={_id:null,title:null,description:null,date:null,initHour:null,endHour:null,toRoles:[],rolesSelected:""},this.roles=["Administradores","Pastores","Supervisores","L\xedderes","Personas"],this.events=[],this.showFilter=!1,this.showForm=!1,this.edit=!1,this.disableEdit=!1,this.rolesSelected="",this.minDate=c()().add(1,"d").format("YYYY-MM-DD"),this.maxDate=c()().add(5,"y").format("YYYY-MM-DD"),this.minInitHour=c()().add(1,"d").startOf("d").format("HH:[00]"),this.minEndHour=c()().startOf("d").add(1,"d").format("HH:[00]"),this.globalSer.checkSession()?(this.configEditor=this.globalSer.configEditor,this.configEditor.description="Indica una descripci\xf3n para el evento ..."):this.router.navigate(["/ingresar"])}ngOnInit(){return Object(a.a)(this,void 0,void 0,function*(){yield this.getEventsList()})}ionViewWillEnter(){return Object(a.a)(this,void 0,void 0,function*(){this.globalSer.checkSession()||(yield this.router.navigate(["/ingresar"]))})}getEventsList(){return Object(a.a)(this,void 0,void 0,function*(){this.showFilter&&(this.showFilter=!1),yield this.globalSer.presentLoading();const t=yield this.eventsService.getEvents(this.queryParams);t&&!t.error?(this.events=t,yield this.globalSer.dismissLoading()):t&&t.error?yield this.globalSer.errorSession():yield this.globalSer.dismissLoading()})}addEvent(t){return Object(a.a)(this,void 0,void 0,function*(){yield this.globalSer.presentLoading("Agregando evento, por favor espere ...");const e=yield this.eventsService.addEvent(t);e&&!e.error?(this.events=[e.event,...this.events],yield this.setShowForm({id:null,edit:!1,show:!1}),yield this.globalSer.dismissLoading(),yield this.globalSer.presentAlert("\xa1\xc9xito!",e.msg||"Se ha agregado el evento exitosamente.")):e&&e.error?(yield this.globalSer.dismissLoading(),yield this.globalSer.errorSession()):yield this.globalSer.dismissLoading()})}updateEvent(t,e){return Object(a.a)(this,void 0,void 0,function*(){yield this.globalSer.presentLoading("Actualizando evento, por favor espere ...");const i=yield this.eventsService.updateEvent(t,e);if(i&&!i.error){const n=this.events.findIndex(e=>e._id===t);n>-1&&(this.events[n]=Object.assign(Object.assign({},this.events[n]),e)),yield this.setShowForm({id:null,edit:!1,show:!1,disable:!0}),yield this.globalSer.dismissLoading(),yield this.globalSer.presentAlert("\xa1\xc9xito!",i||"Se ha actualizado el evento exitosamente.")}else i&&i.error?(yield this.globalSer.dismissLoading(),yield this.globalSer.errorSession()):yield this.globalSer.dismissLoading()})}deleteEvent(t){return Object(a.a)(this,void 0,void 0,function*(){yield this.globalSer.presentLoading("Eliminando evento, por favor espere ...");const e=yield this.eventsService.deleteEvent(t);e&&!e.error?(this.events=this.events.filter(e=>e._id!==t),yield this.setShowForm({id:null,edit:!1,show:!1}),yield this.globalSer.dismissLoading(),yield this.globalSer.presentAlert("\xa1\xc9xito!",e||"Se ha eliminado el evento exitosamente.")):e&&e.error?(yield this.globalSer.dismissLoading(),yield this.globalSer.errorSession()):yield this.globalSer.dismissLoading()})}validateForm(t){return Object(u.i)(t.title)?t.description&&t.description.length<5?"Disculpe, pero debe indicar una descripci\xf3n para el evento v\xe1lida.":Object(u.b)(t.date)?Object(u.e)(t.initHour)?Object(u.e)(t.endHour)?t.toRoles&&0!==t.toRoles.length?null:"Disculpe, pero debe seleccionar los roles a los que va dirigido el evento.":"Disculpe, pero debe indicar una hora correcta para la finalizaci\xf3n del evento.":"Disculpe, pero debe indicar la hora de inicio del evento.":"Disculpe, pero debe indicar la fecha del evento.":"Disculpe, pero debe indicar el t\xedtulo correcto para el evento."}setShowFilter(){this.showFilter=!this.showFilter}setOrderData(){return Object(a.a)(this,void 0,void 0,function*(){yield this.globalSer.alertWithList({header:"Seleccione",inputs:[{name:"order-asc",type:"radio",label:"Ant\xedguas primero",value:1,checked:1===this.queryParams.value},{name:"order-desc",type:"radio",label:"Pr\xf3ximas primero",value:-1,checked:-1===this.queryParams.value}],confirmAction:t=>{this.queryParams.value=t}})})}setDate(t){this.queryParams[t]&&(this.queryParams[t]=c()(this.queryParams[t]).format("YYYY-MM-DD"))}setDataForm(t=null){const e=t?this.events.find(e=>e._id===t):null;this.formData._id=e?e._id:null,this.formData.title=e?e.title:null,this.formData.description=e?Object(u.m)(e.description):null,this.formData.date=e?e.date:null,this.formData.initHour=e?e.initHour:null,this.formData.endHour=e?e.endHour:null,this.formData.toRoles=e?e.toRoles:[],this.formData.rolesSelected=this.formData.toRoles.length>0?this.getRoles(this.formData.toRoles):"",e&&(this.formData.initHour=e.initHour?c()(`${this.formData.date} ${this.formData.initHour}`).format("YYYY-MM-DDTHH:mm:ssZ"):c()(""+this.formData.date).format("YYYY-MM-DDTHH:mm:ssZ"),this.formData.endHour=e.endHour?c()(`${this.formData.date} ${this.formData.endHour}`).format("YYYY-MM-DDTHH:mm:ssZ"):c()(""+this.formData.date).format("YYYY-MM-DDTHH:mm:ssZ"))}checkIfEdit(t){return this.disableEdit=!!c()().isSame(c()(`${t.date} ${t.initHour}`),"d")||c()(`${t.date} ${t.initHour}`).isBefore(c()(),"d"),this.disableEdit}getHours(t){return 5===t.length?t:"Invalid Date"===t?null:t?c()(t).format("HH:mm"):null}setMinEndHour(t){"date"===t?(this.minInitHour=c()(""+this.formData[t]).startOf("d").format("HH:[00]"),this.formData.initHour||(this.formData.initHour=c()(""+this.formData[t]).startOf("d").format("YYYY-MM-DDTHH:[00]:ssZ")),this.formData.endHour?this.minEndHour=c()(""+this.formData.initHour).add(1,"h").format("HH:[00]"):(this.minEndHour=c()(""+this.formData.initHour).startOf("d").add(1,"h").format("HH:[00]"),this.formData.endHour=c()(""+this.formData.initHour).add(1,"h").format("YYYY-MM-DDTHH:[00]:ssZ"))):"initHour"===t&&(c()(""+this.formData[t]).isAfter(c()(""+this.formData.endHour))?(this.minEndHour=c()(""+this.formData[t]).add(1,"h").format("HH:[00]"),this.formData.endHour=c()(""+this.formData.initHour).add(1,"h").format("YYYY-MM-DDTHH:[00]:ssZ")):this.minEndHour=c()(""+this.formData[t]).add(1,"h").format("HH:[00]"))}setDateFormToSend(){return{title:this.formData.title?this.formData.title.toUpperCase():null,description:this.formData.description?Object(u.m)(this.formData.description.toUpperCase()):null,date:this.formData.date?c()(this.formData.date).format("YYYY-MM-DD"):null,initHour:this.getHours(this.formData.initHour),endHour:this.getHours(this.formData.endHour),toRoles:this.formData.toRoles||[]}}getRoles(t){let e="";if(t.length>0)for(const i of t)""===e?e=this.roles[i]:e+=", "+this.roles[i];return e}resetQueryParams(){this.queryParams.input="date",this.queryParams.value=-1,this.queryParams.initDate=c()().format("YYYY-MM-DD"),this.queryParams.endDate=null}setShowForm({id:t,show:e,edit:i,disable:n}){return Object(a.a)(this,void 0,void 0,function*(){this.setDataForm(t),this.showForm=e,this.edit=i||!1,this.disableEdit=n||!1,t&&this.setMinEndHour("date")})}showAlertRolesList(t){return Object(a.a)(this,void 0,void 0,function*(){const e=[];for(const[i,n]of this.roles.entries())e.push({name:"roles",type:"checkbox",label:n,value:i,checked:t.indexOf(i)>-1});yield this.globalSer.alertWithList({header:"Seleccione",inputs:e,confirmAction:t=>{this.formData.toRoles=t,this.formData.rolesSelected=this.getRoles(t)}})})}showEvent(t){return Object(a.a)(this,void 0,void 0,function*(){const e=this.events.find(e=>e._id===t);if(e){const t=this.checkIfEdit(e),i=[],n=[{text:"Eliminar",handler:()=>this.confirmAction({id:e._id,update:!1,remove:!0})},{text:"Editar",handler:()=>this.setShowForm({id:e._id,edit:!0,show:!0,disable:t})},{text:"Cerrar",role:"cancel",handler:()=>{}}];for(const e of n)t&&"Editar"!==e.text?i.push(e):t||i.push(e);const o=this.getRoles(e.toRoles),r=Object(u.m)(e.description),s=yield this.alertCtrl.create({cssClass:"max-width-640",header:e.title,subHeader:"Por: "+(e.user?`${e.user.names} ${e.user.lastNames}`:"An\xf3nimo"),message:`\n          <b>Fecha:</b> ${e.date}<br/>\n          <b>Hora de inicio:</b> ${e.initHour}<br/>\n          ${e.endHour?`<b>Hora fin:</b> ${e.endHour}<br/>`:""}\n          <b>Dirigido a:</b> ${o}<br/><br/>\n          <b>Descripci\xf3n:</b><br/>\n          ${r||"No especificada."}<br/>\n        `,buttons:i});yield s.present()}})}confirmAction({id:t,update:e,remove:i}){return Object(a.a)(this,void 0,void 0,function*(){let n=!0,o=null;if(this.showForm){o=this.setDateFormToSend();const t=this.validateForm(o);t?(n=!1,yield this.globalSer.presentAlert("\xa1Error!",t||"Disculpe, pero debe completar el formulario.")):n=!0}if(n){let n="\xbfEst\xe1 seguro qu\xe9 desea __action__ este evento?";n=n.replace("__action__",e?"actualizar":i?"eliminar":"agregar"),yield this.globalSer.alertConfirm({header:"\xa1Confirme!",message:n,confirmAction:()=>{e?this.updateEvent(t,o):i?this.deleteEvent(t):this.addEvent(o)}})}})}}return t.\u0275fac=function(e){return new(e||t)(h.Jb(r.a),h.Jb(f),h.Jb(m.a),h.Jb(r.O),h.Jb(s.g))},t.\u0275cmp=h.Db({type:t,selectors:[["app-eventos"]],decls:22,vars:12,consts:[["slot","end"],["color","primary",3,"click",4,"ngIf"],[1,"ion-margin"],[3,"size"],["class","ion-no-margin",4,"ngIf"],[1,"ion-margin-bottom"],["color","light",3,"click"],["name","filter-outline","slot","start",4,"ngIf"],["name","close-outline","slot","start",4,"ngIf"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["noEvents",""],["color","primary",3,"click"],["name","add-outline","slot","start"],[1,"ion-no-margin"],["size","12"],["position","floating","color","medium"],["autocomplete","off","maxlength","100",1,"ion-text-uppercase",3,"ngModel","disabled","ngModelChange"],[3,"ngModel","editor","config","ngModelChange"],["size","12","size-sm","4"],["displayFormat","DD/MM/YYYY","doneText","Listo","cancelText","Cancelar",3,"ngModel","min","max","disabled","ngModelChange","ionChange"],["displayFormat","HH:mm","minuteValues","00,15,30,45,59","doneText","Listo","cancelText","Cancelar",3,"ngModel","min","disabled","ngModelChange","ionChange"],["displayFormat","HH:mm","minuteValues","00,15,30,45","doneText","Listo","cancelText","Cancelar",3,"ngModel","min","disabled","ngModelChange"],["autocomplete","off",1,"ion-text-uppercase",3,"ngModel","value","readonly","disabled","ngModelChange","click"],["size","12",1,"ion-margin-top"],["color","medium"],[1,"toSmall"],[1,"ion-margin-top"],["size","12",1,"ion-text-center"],["color","light",1,"ion-text-center",3,"click"],["name","close-outline","slot","start"],["color","primary",1,"ion-text-center",3,"click"],["name","checkmark-outline","slot","start"],["name","filter-outline","slot","start"],[3,"readonly","value","click"],["displayFormat","DD/MM/YYYY","min","2020-01-01","doneText","Listo","cancelText","Cancelar","onchange","setDate('initDate')",3,"ngModel","ngModelChange"],["displayFormat","DD/MM/YYYY","min","2020-01-01","doneText","Listo","cancelText","Cancelar","onchange","setDate('endDate')",3,"ngModel","ngModelChange"],["size","6",1,"ion-justify-content-center"],["color","light","expand","full",1,"ion-text-center",3,"click"],["name","trash-outline"],["color","primary","expand","full",1,"ion-text-center",3,"click"],["name","checkmark-outline"],["size","12","size-sm","4",3,"click",4,"ngFor","ngForOf"],["size","12","size-sm","4",3,"click"],[3,"data"],[1,"ion-no-padding"],[1,"ion-margin-top","ion-padding-top","ion-text-center","no-selected-text"],["name","alert-circle-outline"]],template:function(t,e){if(1&t&&(h.Mb(0,"ion-header"),h.Mb(1,"ion-toolbar"),h.Mb(2,"ion-title"),h.mc(3,"Eventos"),h.Lb(),h.Mb(4,"ion-buttons",0),h.kc(5,H,4,0,"ion-button",1),h.Lb(),h.Lb(),h.Lb(),h.Mb(6,"ion-content"),h.Mb(7,"ion-row",2),h.Mb(8,"ion-col",3),h.kc(9,S,47,20,"ion-card",4),h.Lb(),h.Mb(10,"ion-col",3),h.Mb(11,"div"),h.Mb(12,"div",5),h.Mb(13,"ion-button",6),h.Ub("click",function(){return e.setShowFilter()}),h.kc(14,Y,1,0,"ion-icon",7),h.kc(15,x,1,0,"ion-icon",8),h.Mb(16,"ion-text"),h.mc(17,"Filtrar"),h.Lb(),h.Lb(),h.Lb(),h.kc(18,$,29,4,"ion-card",9),h.kc(19,E,3,1,"div",10),h.kc(20,_,5,0,"ng-template",null,11,h.lc),h.Lb(),h.Lb(),h.Lb(),h.Lb()),2&t){const t=h.fc(21);h.xb(5),h.Zb("ngIf",!e.showForm),h.xb(3),h.Zb("size",12),h.xb(1),h.Zb("ngIf",e.showForm),h.xb(1),h.Zb("size",12),h.xb(1),h.zb(e.showForm?"ion-hide":""),h.xb(3),h.Zb("ngIf",!e.showFilter),h.xb(1),h.Zb("ngIf",e.showFilter),h.xb(3),h.Zb("ngIf",e.showFilter),h.xb(1),h.Zb("ngIf",e.events&&e.events.length>0)("ngIfElse",t)}},directives:[r.r,r.K,r.J,r.f,n.i,r.o,r.D,r.n,r.e,r.H,r.s,r.g,r.h,r.k,r.v,r.w,r.u,r.T,o.b,o.e,o.f,g.a,r.p,r.S,n.h,L],styles:[".max-width-640{--max-width:640px}  .ck-editor__editable_inline{min-height:250px}"]}),t})()}];let k=(()=>{class t{}return t.\u0275mod=h.Hb({type:t}),t.\u0275inj=h.Gb({factory:function(e){return new(e||t)},imports:[[s.j.forChild(F)],s.j]}),t})();var C=i("j1ZV");let O=(()=>{class t{}return t.\u0275mod=h.Hb({type:t}),t.\u0275inj=h.Gb({factory:function(e){return new(e||t)},imports:[[n.b,o.a,r.L,k,C.a,g.b]]}),t})()}}]);