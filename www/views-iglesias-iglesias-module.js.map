{"version":3,"sources":["./src/app/views/iglesias/iglesias.service.ts","./src/app/views/iglesias/iglesias.page.html","./src/app/views/iglesias/iglesias-routing.module.ts","./src/app/views/iglesias/iglesias.page.scss","./src/app/views/iglesias/iglesias.module.ts","./src/app/views/iglesias/iglesias.page.ts"],"names":[],"mappings":"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","file":"views-iglesias-iglesias-module.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport {GlobalService} from '../../services/global.service';\nimport {AxiosService} from '../../services/axios.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class IglesiasService {\n\n  constructor(\n    private axios: AxiosService,\n    private globalSer: GlobalService\n  ) { }\n\n  async getChurches(): Promise<any> {\n    const res: any = await this.axios.getData('/admin/churches');\n\n    if (res && res.success) return res.data.churches || [];\n    return this.globalSer.altResponse(res);\n  }\n\n  async getChurch(id): Promise<any> {\n    const res: any = await this.axios.getData(`/admin/churches/${id}`);\n\n    if (res && res.success) return res.data.church || null;\n    return this.globalSer.altResponse(res);\n  }\n\n  async saveChurch(formData = {}): Promise<any> {\n    const res: any = await this.axios.postData(`/admin/churches`, formData);\n\n    if (res && res.success) return res.data;\n    return this.globalSer.altResponse(res);\n  }\n\n  async updateChurch(id, formData = {}): Promise<any> {\n    const res: any = await this.axios.putData(`/admin/churches/${id}`, formData);\n\n    if (res && res.success) return res.data;\n    return this.globalSer.altResponse(res);\n  }\n\n  async removeChurch(id): Promise<any> {\n    const res: any = await this.axios.deleteData(`/admin/churches/${id}`);\n\n    if (res && res.success) return res.data;\n    return this.globalSer.altResponse(res);\n  }\n}\n","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>{{ showForm ? 'Agregar iglesia' : 'Iglesias' }}</ion-title>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-button color=\\\"medium\\\" (click)=\\\"setShowForm()\\\" *ngIf=\\\"showForm\\\">\\n        <ion-icon name=\\\"close-outline\\\" slot=\\\"start\\\"></ion-icon>\\n        <ion-text>Cancelar</ion-text>\\n      </ion-button>\\n      <ion-button color=\\\"primary\\\" (click)=\\\"setShowForm()\\\" *ngIf=\\\"!showForm\\\">\\n        <ion-icon name=\\\"add-outline\\\" slot=\\\"start\\\"></ion-icon>\\n        <ion-text>Agregar</ion-text>\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\n  <ion-row *ngIf=\\\"!showForm\\\">\\n    <ion-col size=\\\"12\\\" size-sm=\\\"6\\\" *ngFor=\\\"let church of churches\\\">\\n      <app-iglesias-card\\n        [church]=\\\"church\\\"\\n      ></app-iglesias-card>\\n    </ion-col>\\n  </ion-row>\\n\\n  <ion-row *ngIf=\\\"showForm\\\">\\n    <ion-col size=\\\"12\\\">\\n      <app-iglesias-form\\n        [handleCancel]=\\\"handleCancel\\\"\\n        [handleSave]=\\\"handleSubmit\\\"\\n      ></app-iglesias-form>\\n    </ion-col>\\n  </ion-row>\\n\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IglesiasPage } from './iglesias.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: IglesiasPage\n  },\n  {\n    path: ':id',\n    loadChildren: () => import('./detalles/detalles.module').then( m => m.DetallesPageModule)\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class IglesiasPageRoutingModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJpZ2xlc2lhcy5wYWdlLnNjc3MifQ== */\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { IglesiasPageRoutingModule } from './iglesias-routing.module';\n\nimport { IglesiasPage } from './iglesias.page';\nimport {ComponentsModule} from '../../components/components.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    IglesiasPageRoutingModule,\n    ComponentsModule\n  ],\n  declarations: [IglesiasPage]\n})\nexport class IglesiasPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport {GlobalService} from '../../services/global.service';\nimport {Router} from '@angular/router';\nimport {IglesiasService} from './iglesias.service';\nimport {CookiesService} from '../../services/cookies.service';\n\n@Component({\n  selector: 'app-iglesias',\n  templateUrl: './iglesias.page.html',\n  styleUrls: ['./iglesias.page.scss'],\n})\nexport class IglesiasPage implements OnInit {\n\n  churches: any[]|null = null;\n  showForm = false;\n\n  constructor(\n    private cookieService: CookiesService,\n    private globalSer: GlobalService,\n    private iglesiasService: IglesiasService,\n    private router: Router,\n  ) { }\n\n  ngOnInit() {\n  }\n\n  async ionViewWillEnter() {\n    if (!this.globalSer.checkSession()) this.router.navigate(['/ingresar']);\n    else this.getChurches();\n  }\n\n  async getChurches() {\n    await this.globalSer.presentLoading();\n    const data = await this.iglesiasService.getChurches();\n\n    if (data && !data.error) {\n      this.churches = data;\n      await this.cookieService.setCookie('churches', data.map(d => ({ _id: d._id, name: d.name })));\n      await this.globalSer.dismissLoading();\n    }\n    else if (data && data.error) {\n      await this.globalSer.dismissLoading();\n      await this.globalSer.errorSession();\n    }\n    else await this.globalSer.dismissLoading();\n  }\n\n  async saveData(formData) {\n    await this.globalSer.presentLoading();\n    const data = await this.iglesiasService.saveChurch(formData);\n\n    if (data && !data.error) {\n      this.churches.push(data.church);\n      // update data churches list\n      const churches = await this.cookieService.getCookie('churches');\n      churches.push(data.church);\n      await this.cookieService.setCookie('churches', churches);\n      await this.globalSer.dismissLoading();\n      this.setShowForm();\n      await this.globalSer.presentAlert(\n        '¡Éxito!',\n        data.msg || 'Se ha agregado la iglesia exitosamente.'\n      );\n    }\n    else if (data && data.error) {\n      await this.globalSer.dismissLoading();\n      await this.globalSer.errorSession();\n    }\n    else await this.globalSer.dismissLoading();\n  }\n\n  setShowForm() {\n    this.showForm = !this.showForm;\n  }\n\n  handleCancel = (): void => this.setShowForm();\n  handleSubmit = (data: any) => this.saveData(data);\n\n}\n"],"sourceRoot":"webpack:///"}