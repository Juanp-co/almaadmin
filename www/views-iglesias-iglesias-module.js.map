{"version":3,"sources":["./src/app/views/iglesias/iglesias.service.ts","./src/app/views/iglesias/iglesias.page.html","./src/app/views/iglesias/iglesias-routing.module.ts","./src/app/views/iglesias/iglesias.page.scss","./src/app/views/iglesias/iglesias.module.ts","./src/app/views/iglesias/iglesias.page.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAA2C;AACiB;AACF;IAK7C,eAAe,SAAf,eAAe;IAE1B,YACU,KAAmB,EACnB,SAAwB;QADxB,UAAK,GAAL,KAAK,CAAc;QACnB,cAAS,GAAT,SAAS,CAAe;IAC9B,CAAC;IAEC,WAAW;;YACf,MAAM,GAAG,GAAQ,MAAM,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC;YAE7D,IAAI,GAAG,IAAI,GAAG,CAAC,OAAO;gBAAE,OAAO,GAAG,CAAC,IAAI,CAAC,QAAQ,IAAI,EAAE,CAAC;YACvD,OAAO,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;QACzC,CAAC;KAAA;IAEK,SAAS,CAAC,EAAE;;YAChB,MAAM,GAAG,GAAQ,MAAM,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,mBAAmB,EAAE,EAAE,CAAC,CAAC;YAEnE,IAAI,GAAG,IAAI,GAAG,CAAC,OAAO;gBAAE,OAAO,GAAG,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC;YACvD,OAAO,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;QACzC,CAAC;KAAA;IAEK,UAAU,CAAC,QAAQ,GAAG,EAAE;;YAC5B,MAAM,GAAG,GAAQ,MAAM,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,iBAAiB,EAAE,QAAQ,CAAC,CAAC;YAExE,IAAI,GAAG,IAAI,GAAG,CAAC,OAAO;gBAAE,OAAO,GAAG,CAAC,IAAI,CAAC;YACxC,OAAO,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;QACzC,CAAC;KAAA;IAEK,YAAY,CAAC,EAAE,EAAE,QAAQ,GAAG,EAAE;;YAClC,MAAM,GAAG,GAAQ,MAAM,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,mBAAmB,EAAE,EAAE,EAAE,QAAQ,CAAC,CAAC;YAE7E,IAAI,GAAG,IAAI,GAAG,CAAC,OAAO;gBAAE,OAAO,GAAG,CAAC,IAAI,CAAC;YACxC,OAAO,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;QACzC,CAAC;KAAA;IAEK,YAAY,CAAC,EAAE;;YACnB,MAAM,GAAG,GAAQ,MAAM,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,mBAAmB,EAAE,EAAE,CAAC,CAAC;YAEtE,IAAI,GAAG,IAAI,GAAG,CAAC,OAAO;gBAAE,OAAO,GAAG,CAAC,IAAI,CAAC;YACxC,OAAO,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC;QACzC,CAAC;KAAA;CACF;;YA9CO,oEAAY;YADZ,sEAAa;;AAMR,eAAe;IAH3B,gEAAU,CAAC;QACV,UAAU,EAAE,MAAM;KACnB,CAAC;GACW,eAAe,CAyC3B;AAzC2B;;;;;;;;;;;;;ACP5B;AAAe,oHAAqD,6CAA6C,kjCAAkjC,E;;;;;;;;;;;;;;;;;;;ACA1nC;AACc;AAER;AAE/C,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,2DAAY;KACxB;IACD;QACE,IAAI,EAAE,KAAK;QACX,YAAY,EAAE,GAAG,EAAE,CAAC,2KAAoC,CAAC,IAAI,CAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,kBAAkB,CAAC;KAC1F;CACF,CAAC;IAMW,yBAAyB,SAAzB,yBAAyB;CAAG;AAA5B,yBAAyB;IAJrC,8DAAQ,CAAC;QACR,OAAO,EAAE,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,4DAAY,CAAC;KACxB,CAAC;GACW,yBAAyB,CAAG;AAAH;;;;;;;;;;;;;ACpBtC;AAAe,6GAA8C,uHAAuH,E;;;;;;;;;;;;;;;;;;;;;;;ACA3I;AACM;AACF;AAEA;AAEyB;AAEvB;AACqB;IAYvD,kBAAkB,SAAlB,kBAAkB;CAAG;AAArB,kBAAkB;IAV9B,8DAAQ,CAAC;QACR,OAAO,EAAE;YACP,4DAAY;YACZ,0DAAW;YACX,0DAAW;YACX,kFAAyB;YACzB,8EAAgB;SACjB;QACD,YAAY,EAAE,CAAC,2DAAY,CAAC;KAC7B,CAAC;GACW,kBAAkB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;ACrBmB;AACU;AACrB;AACY;AACW;IAOjD,YAAY,SAAZ,YAAY;IAKvB,YACU,aAA6B,EAC7B,SAAwB,EACxB,eAAgC,EAChC,MAAc;QAHd,kBAAa,GAAb,aAAa,CAAgB;QAC7B,cAAS,GAAT,SAAS,CAAe;QACxB,oBAAe,GAAf,eAAe,CAAiB;QAChC,WAAM,GAAN,MAAM,CAAQ;QAPxB,aAAQ,GAAe,IAAI,CAAC;QAC5B,aAAQ,GAAG,KAAK,CAAC;QA6DjB,iBAAY,GAAG,GAAS,EAAE,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;QAC9C,iBAAY,GAAG,CAAC,IAAS,EAAE,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;IAvD9C,CAAC;IAEL,QAAQ;IACR,CAAC;IAEK,gBAAgB;;YACpB,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,YAAY,EAAE;gBAAE,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC;;gBACnE,IAAI,CAAC,WAAW,EAAE,CAAC;QAC1B,CAAC;KAAA;IAEK,WAAW;;YACf,MAAM,IAAI,CAAC,SAAS,CAAC,cAAc,EAAE,CAAC;YACtC,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,WAAW,EAAE,CAAC;YAEtD,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;gBACvB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;gBACrB,MAAM,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,UAAU,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC;gBAC9F,MAAM,IAAI,CAAC,SAAS,CAAC,cAAc,EAAE,CAAC;aACvC;iBACI,IAAI,IAAI,IAAI,IAAI,CAAC,KAAK,EAAE;gBAC3B,MAAM,IAAI,CAAC,SAAS,CAAC,cAAc,EAAE,CAAC;gBACtC,MAAM,IAAI,CAAC,SAAS,CAAC,YAAY,EAAE,CAAC;aACrC;;gBACI,MAAM,IAAI,CAAC,SAAS,CAAC,cAAc,EAAE,CAAC;QAC7C,CAAC;KAAA;IAEK,QAAQ,CAAC,QAAQ;;YACrB,MAAM,IAAI,CAAC,SAAS,CAAC,cAAc,EAAE,CAAC;YACtC,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC;YAE7D,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;gBACvB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBAChC,4BAA4B;gBAC5B,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;gBAChE,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBAC3B,MAAM,IAAI,CAAC,aAAa,CAAC,SAAS,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC;gBACzD,MAAM,IAAI,CAAC,SAAS,CAAC,cAAc,EAAE,CAAC;gBACtC,IAAI,CAAC,WAAW,EAAE,CAAC;gBACnB,MAAM,IAAI,CAAC,SAAS,CAAC,YAAY,CAC/B,SAAS,EACT,IAAI,CAAC,GAAG,IAAI,yCAAyC,CACtD,CAAC;aACH;iBACI,IAAI,IAAI,IAAI,IAAI,CAAC,KAAK,EAAE;gBAC3B,MAAM,IAAI,CAAC,SAAS,CAAC,cAAc,EAAE,CAAC;gBACtC,MAAM,IAAI,CAAC,SAAS,CAAC,YAAY,EAAE,CAAC;aACrC;;gBACI,MAAM,IAAI,CAAC,SAAS,CAAC,cAAc,EAAE,CAAC;QAC7C,CAAC;KAAA;IAED,WAAW;QACT,IAAI,CAAC,QAAQ,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC;IACjC,CAAC;CAKF;;YA1EO,wEAAc;YAHd,sEAAa;YAEb,iEAAe;YADf,sDAAM;;AASD,YAAY;IALxB,+DAAS,CAAC;QACT,QAAQ,EAAE,cAAc;QACxB,gFAAmC;;KAEpC,CAAC;GACW,YAAY,CAmExB;AAnEwB","file":"views-iglesias-iglesias-module.js","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport {GlobalService} from '../../services/global.service';\r\nimport {AxiosService} from '../../services/axios.service';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class IglesiasService {\r\n\r\n  constructor(\r\n    private axios: AxiosService,\r\n    private globalSer: GlobalService\r\n  ) { }\r\n\r\n  async getChurches(): Promise<any> {\r\n    const res: any = await this.axios.getData('/admin/churches');\r\n\r\n    if (res && res.success) return res.data.churches || [];\r\n    return this.globalSer.altResponse(res);\r\n  }\r\n\r\n  async getChurch(id): Promise<any> {\r\n    const res: any = await this.axios.getData(`/admin/churches/${id}`);\r\n\r\n    if (res && res.success) return res.data.church || null;\r\n    return this.globalSer.altResponse(res);\r\n  }\r\n\r\n  async saveChurch(formData = {}): Promise<any> {\r\n    const res: any = await this.axios.postData(`/admin/churches`, formData);\r\n\r\n    if (res && res.success) return res.data;\r\n    return this.globalSer.altResponse(res);\r\n  }\r\n\r\n  async updateChurch(id, formData = {}): Promise<any> {\r\n    const res: any = await this.axios.putData(`/admin/churches/${id}`, formData);\r\n\r\n    if (res && res.success) return res.data;\r\n    return this.globalSer.altResponse(res);\r\n  }\r\n\r\n  async removeChurch(id): Promise<any> {\r\n    const res: any = await this.axios.deleteData(`/admin/churches/${id}`);\r\n\r\n    if (res && res.success) return res.data;\r\n    return this.globalSer.altResponse(res);\r\n  }\r\n}\r\n","export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-title>{{ showForm ? 'Agregar iglesia' : 'Iglesias' }}</ion-title>\\r\\n    <ion-buttons slot=\\\"end\\\">\\r\\n      <ion-button color=\\\"medium\\\" (click)=\\\"setShowForm()\\\" *ngIf=\\\"showForm\\\">\\r\\n        <ion-icon name=\\\"close-outline\\\" slot=\\\"start\\\"></ion-icon>\\r\\n        <ion-text>Cancelar</ion-text>\\r\\n      </ion-button>\\r\\n      <ion-button color=\\\"primary\\\" (click)=\\\"setShowForm()\\\" *ngIf=\\\"!showForm\\\">\\r\\n        <ion-icon name=\\\"add-outline\\\" slot=\\\"start\\\"></ion-icon>\\r\\n        <ion-text>Agregar</ion-text>\\r\\n      </ion-button>\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n\\r\\n  <ion-row *ngIf=\\\"!showForm\\\">\\r\\n    <ion-col size=\\\"12\\\" size-sm=\\\"6\\\" *ngFor=\\\"let church of churches\\\">\\r\\n      <app-iglesias-card\\r\\n        [church]=\\\"church\\\"\\r\\n      ></app-iglesias-card>\\r\\n    </ion-col>\\r\\n  </ion-row>\\r\\n\\r\\n  <ion-row *ngIf=\\\"showForm\\\">\\r\\n    <ion-col size=\\\"12\\\">\\r\\n      <app-iglesias-form\\r\\n        [handleCancel]=\\\"handleCancel\\\"\\r\\n        [handleSave]=\\\"handleSubmit\\\"\\r\\n      ></app-iglesias-form>\\r\\n    </ion-col>\\r\\n  </ion-row>\\r\\n\\r\\n</ion-content>\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IglesiasPage } from './iglesias.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: IglesiasPage\r\n  },\r\n  {\r\n    path: ':id',\r\n    loadChildren: () => import('./detalles/detalles.module').then( m => m.DetallesPageModule)\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class IglesiasPageRoutingModule {}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJpZ2xlc2lhcy5wYWdlLnNjc3MifQ== */\";","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { IglesiasPageRoutingModule } from './iglesias-routing.module';\r\n\r\nimport { IglesiasPage } from './iglesias.page';\r\nimport {ComponentsModule} from '../../components/components.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    IglesiasPageRoutingModule,\r\n    ComponentsModule\r\n  ],\r\n  declarations: [IglesiasPage]\r\n})\r\nexport class IglesiasPageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {GlobalService} from '../../services/global.service';\r\nimport {Router} from '@angular/router';\r\nimport {IglesiasService} from './iglesias.service';\r\nimport {CookiesService} from '../../services/cookies.service';\r\n\r\n@Component({\r\n  selector: 'app-iglesias',\r\n  templateUrl: './iglesias.page.html',\r\n  styleUrls: ['./iglesias.page.scss'],\r\n})\r\nexport class IglesiasPage implements OnInit {\r\n\r\n  churches: any[]|null = null;\r\n  showForm = false;\r\n\r\n  constructor(\r\n    private cookieService: CookiesService,\r\n    private globalSer: GlobalService,\r\n    private iglesiasService: IglesiasService,\r\n    private router: Router,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  async ionViewWillEnter() {\r\n    if (!this.globalSer.checkSession()) this.router.navigate(['/ingresar']);\r\n    else this.getChurches();\r\n  }\r\n\r\n  async getChurches() {\r\n    await this.globalSer.presentLoading();\r\n    const data = await this.iglesiasService.getChurches();\r\n\r\n    if (data && !data.error) {\r\n      this.churches = data;\r\n      await this.cookieService.setCookie('churches', data.map(d => ({ _id: d._id, name: d.name })));\r\n      await this.globalSer.dismissLoading();\r\n    }\r\n    else if (data && data.error) {\r\n      await this.globalSer.dismissLoading();\r\n      await this.globalSer.errorSession();\r\n    }\r\n    else await this.globalSer.dismissLoading();\r\n  }\r\n\r\n  async saveData(formData) {\r\n    await this.globalSer.presentLoading();\r\n    const data = await this.iglesiasService.saveChurch(formData);\r\n\r\n    if (data && !data.error) {\r\n      this.churches.push(data.church);\r\n      // update data churches list\r\n      const churches = await this.cookieService.getCookie('churches');\r\n      churches.push(data.church);\r\n      await this.cookieService.setCookie('churches', churches);\r\n      await this.globalSer.dismissLoading();\r\n      this.setShowForm();\r\n      await this.globalSer.presentAlert(\r\n        '¡Éxito!',\r\n        data.msg || 'Se ha agregado la iglesia exitosamente.'\r\n      );\r\n    }\r\n    else if (data && data.error) {\r\n      await this.globalSer.dismissLoading();\r\n      await this.globalSer.errorSession();\r\n    }\r\n    else await this.globalSer.dismissLoading();\r\n  }\r\n\r\n  setShowForm() {\r\n    this.showForm = !this.showForm;\r\n  }\r\n\r\n  handleCancel = (): void => this.setShowForm();\r\n  handleSubmit = (data: any) => this.saveData(data);\r\n\r\n}\r\n"],"sourceRoot":"webpack:///"}