(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{"3V3w":function(e,o,t){"use strict";t.r(o),t.d(o,"RegistroPageModule",function(){return M});var n=t("ofXK"),i=t("3Pt+"),r=t("TEn/"),a=t("tyNb"),c=t("mrSG"),l=t("OmbT"),s=t("fXoL"),b=t("1Ldg"),u=t("4WDQ"),m=t("iN9u"),d=t("wJOZ");function g(e,o){if(1&e){const e=s.Nb();s.Mb(0,"ion-col",4),s.Mb(1,"ion-card"),s.Mb(2,"ion-card-content"),s.Mb(3,"ion-row"),s.Mb(4,"ion-col",5),s.Mb(5,"ion-item"),s.Mb(6,"ion-label",6),s.mc(7,"Tipo de documento (*)"),s.Lb(),s.Mb(8,"ion-input",7),s.Ub("click",function(){s.gc(e);const o=s.Wb();return o.showAlertDocumentList(o.formData.documentType)}),s.Lb(),s.Lb(),s.Lb(),s.Mb(9,"ion-col",5),s.Mb(10,"ion-item"),s.Mb(11,"ion-label",6),s.mc(12,"N\xfamero de documento (*)"),s.Lb(),s.Mb(13,"ion-input",8),s.Ub("ngModelChange",function(o){return s.gc(e),s.Wb().formData.document=o})("keypress",function(o){return s.gc(e),s.Wb().validateOnlyNumbers(o)}),s.Lb(),s.Lb(),s.Lb(),s.Mb(14,"ion-col",5),s.Mb(15,"ion-item"),s.Mb(16,"ion-label",6),s.mc(17,"Nombre(s) (*)"),s.Lb(),s.Mb(18,"ion-input",9),s.Ub("ngModelChange",function(o){return s.gc(e),s.Wb().formData.names=o})("keyup",function(o){return s.gc(e),s.Wb().validateOnlyLetters(o)}),s.Lb(),s.Lb(),s.Lb(),s.Mb(19,"ion-col",5),s.Mb(20,"ion-item"),s.Mb(21,"ion-label",6),s.mc(22,"Apellido(s) (*)"),s.Lb(),s.Mb(23,"ion-input",9),s.Ub("ngModelChange",function(o){return s.gc(e),s.Wb().formData.lastNames=o})("keyup",function(o){return s.gc(e),s.Wb().validateOnlyLetters(o)}),s.Lb(),s.Lb(),s.Lb(),s.Mb(24,"ion-col",5),s.Mb(25,"ion-item"),s.Mb(26,"ion-label",6),s.mc(27,"Correo electr\xf3nico (*)"),s.Lb(),s.Mb(28,"ion-input",10),s.Ub("ngModelChange",function(o){return s.gc(e),s.Wb().formData.email=o}),s.Lb(),s.Lb(),s.Lb(),s.Mb(29,"ion-col",5),s.Mb(30,"ion-item"),s.Mb(31,"ion-label",6),s.mc(32,"Tel\xe9fono"),s.Lb(),s.Mb(33,"ion-input",11),s.Ub("ngModelChange",function(o){return s.gc(e),s.Wb().formData.phone=o})("keypress",function(o){return s.gc(e),s.Wb().validateOnlyNumbers(o)}),s.Lb(),s.Lb(),s.Lb(),s.Mb(34,"ion-col",5),s.Mb(35,"ion-item"),s.Mb(36,"ion-label",6),s.mc(37,"Rol (*)"),s.Lb(),s.Mb(38,"ion-input",7),s.Ub("click",function(){s.gc(e);const o=s.Wb();return o.showRoleListAlert(o.formData.role)}),s.Lb(),s.Lb(),s.Lb(),s.Mb(39,"ion-col",5),s.Mb(40,"ion-item"),s.Mb(41,"ion-label",6),s.mc(42,"N\xfamero de documento referido (opcional)"),s.Lb(),s.Mb(43,"ion-input",12),s.Ub("ngModelChange",function(o){return s.gc(e),s.Wb().formData.referred=o}),s.Lb(),s.Lb(),s.Lb(),s.Mb(44,"ion-col",13),s.Mb(45,"ion-text",14),s.Mb(46,"i",15),s.mc(47,"(*) Campos requeridos."),s.Lb(),s.Lb(),s.Lb(),s.Mb(48,"ion-col",16),s.Mb(49,"ion-button",17),s.Ub("click",function(){return s.gc(e),s.Wb().confirmCancel()}),s.Kb(50,"ion-icon",18),s.mc(51,"\xa0 "),s.Mb(52,"ion-text"),s.mc(53,"Cancelar"),s.Lb(),s.Lb(),s.Mb(54,"ion-button",19),s.Ub("click",function(){return s.gc(e),s.Wb().confirmRegister()}),s.Kb(55,"ion-icon",20),s.mc(56,"\xa0 "),s.Mb(57,"ion-text"),s.mc(58,"Guardar"),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Lb()}if(2&e){const e=s.Wb();s.xb(8),s.Zb("readonly",!0)("value",e.formData.documentType?e.getDocumentLabel(e.formData.documentType):""),s.xb(5),s.Zb("ngModel",e.formData.document),s.xb(5),s.Zb("ngModel",e.formData.names),s.xb(5),s.Zb("ngModel",e.formData.lastNames),s.xb(5),s.Zb("ngModel",e.formData.email),s.xb(5),s.Zb("ngModel",e.formData.phone),s.xb(5),s.Zb("readonly",!0)("value",e.roles[e.formData.role]||""),s.xb(5),s.Zb("ngModel",e.formData.referred)}}function f(e,o){if(1&e){const e=s.Nb();s.Mb(0,"ion-col",4),s.Mb(1,"ion-card"),s.Mb(2,"ion-card-content"),s.Mb(3,"ion-row"),s.Mb(4,"ion-col",21),s.Kb(5,"ion-img",22),s.Mb(6,"ion-card-title",23),s.mc(7),s.Lb(),s.Lb(),s.Mb(8,"ion-col",16),s.Mb(9,"ion-button",19),s.Ub("click",function(){return s.gc(e),s.Wb().back()}),s.Kb(10,"ion-icon",24),s.mc(11,"\xa0 "),s.Mb(12,"ion-text"),s.mc(13,"Regresar al listado de miembros"),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Lb()}if(2&e){const e=s.Wb();s.xb(4),s.Zb("size",12),s.xb(1),s.Zb("src","/assets/icon/check.svg"),s.xb(2),s.nc(e.successData.msg)}}const p=[{path:"",component:(()=>{class e{constructor(e,o,t,n,i,r,a,c){this.activateRoute=e,this.alertCtrl=o,this.axios=t,this.globalSer=n,this.navCtrl=i,this.detallesMiembroService=r,this.miembrosService=a,this.router=c,this.roles=[],this.documentTypes=[],this.successRegister=!1,this.successData=null,this.formData={documentType:null,document:null,email:null,phone:null,names:null,lastNames:null,role:null,referred:null},this.globalSer.checkSession()?(this.documentTypes=r.documentTypesList,this.roles=this.globalSer.roles):this.router.navigate(["/ingresar"])}ngOnInit(){return Object(c.a)(this,void 0,void 0,function*(){this.globalSer.checkSession()?this.globalSer.checkRoleToEnableAddOrUpdate()||(yield this.globalSer.presentAlert("Alerta","Disculpe, pero no cuenta con privilegios para registrar nuevos miembros."),yield this.navCtrl.back()):yield this.router.navigate(["/ingresar"])})}registerMember(){return Object(c.a)(this,void 0,void 0,function*(){yield this.globalSer.presentLoading("Registrando, por favor espere ...");const e=Object.assign({},this.formData);e.document=`${e.documentType}${e.document}`;const o=yield this.miembrosService.registerUser(e);o&&!o.error?(this.successData=o,this.successRegister=!0,yield this.globalSer.dismissLoading()):o&&o.error?(yield this.globalSer.dismissLoading(),yield this.globalSer.errorSession()):yield this.globalSer.dismissLoading()})}back(){return Object(c.a)(this,void 0,void 0,function*(){yield this.navCtrl.back()})}getDocumentLabel(e){if(!e)return null;const o=this.documentTypes.find(o=>o.val===e);return o?o.label:null}validateOnlyNumbers(e){Object(l.l)(e)}validateOnlyLetters(e){Object(l.k)(e)}showRoleListAlert(e=null){return Object(c.a)(this,void 0,void 0,function*(){const o=[];for(const[t,n]of this.roles.entries())o.push({name:"roles",type:"radio",label:n,value:t,checked:null!==e&&e===t});yield this.globalSer.alertWithList({header:"Seleccione un rol",inputs:o,confirmAction:e=>{this.formData.role=e}})})}showAlertDocumentList(e=null){return Object(c.a)(this,void 0,void 0,function*(){const o=[];for(const t of this.documentTypes)o.push({name:"documentType",type:"radio",label:t.label,value:t.val,checked:null!==e&&e===t.val});yield this.globalSer.alertWithList({header:"Seleccione",inputs:o,confirmAction:e=>{this.formData.documentType=e}})})}confirmCancel(){return Object(c.a)(this,void 0,void 0,function*(){yield this.globalSer.alertConfirm({header:"Confirme",message:"\xbfEst\xe1 seguro qu\xe9 desea cancelar el registro?",confirmAction:()=>this.back()})})}validateData(){return/^([CC|CE|PE|TI|PAS]){2,3}/.test(this.formData.documentType)?/[0-9]{5,10}/.test(this.formData.document)?Object(l.g)(this.formData.names)?Object(l.g)(this.formData.lastNames)?Object(l.d)(this.formData.email)?this.formData.phone&&!Object(l.h)(this.formData.phone)?"Disculpe, pero debe indicar un n\xfamero de tel\xe9fono v\xe1lido.":Object(l.f)(""+this.formData.role)?this.formData.referred&&!Object(l.c)(""+this.formData.referred.toUpperCase())?"Disculpe, pero debe indicar un n\xfamero de documento correcto del usuario referido (ejm: CC12345678).":null:"Disculpe, pero debe seleccionar un rol para el usuario.":"Disculpe, pero debe indicar un correo electr\xf3nico v\xe1lido.":"Disculpe, pero debe indicar un apellido v\xe1lido.":"Disculpe, pero debe indicar un nombre v\xe1lido.":"Disculpe, pero debe indicar el n\xfamero de documento de identidad.":"Disculpe, pero debe indicar el tipo de documento."}confirmRegister(){return Object(c.a)(this,void 0,void 0,function*(){const e=this.validateData();e?yield this.globalSer.presentAlert("Alerta",e||"Disculpe, pero debe completar el formulario."):this.globalSer.alertConfirm({header:"Confirme",message:"\xbfEst\xe1 seguro qu\xe9 desea registar a este nuevo miembro?",confirmAction:()=>this.registerMember()})})}}return e.\u0275fac=function(o){return new(o||e)(s.Jb(a.a),s.Jb(r.a),s.Jb(b.a),s.Jb(u.a),s.Jb(r.P),s.Jb(m.a),s.Jb(d.a),s.Jb(a.g))},e.\u0275cmp=s.Db({type:e,selectors:[["app-registro"]],decls:11,vars:2,consts:[["slot","start"],[3,"click"],["name","arrow-back-outline"],["class","ion-no-margin","size","12",4,"ngIf"],["size","12",1,"ion-no-margin"],["size","12","size-sm","6"],["position","floating","color","medium"],["autocomplete","off",3,"readonly","value","click"],["autocomplete","off","maxlength","10",1,"ion-text-uppercase",3,"ngModel","ngModelChange","keypress"],["autocomplete","off",1,"ion-text-uppercase",3,"ngModel","ngModelChange","keyup"],["autocomplete","off",1,"ion-text-uppercase",3,"ngModel","ngModelChange"],["autocomplete","off","maxlength","13",1,"ion-text-uppercase",3,"ngModel","ngModelChange","keypress"],["autocomplete","off","maxlength","15",1,"ion-text-uppercase",3,"ngModel","ngModelChange"],["size","12",1,"ion-margin-top"],["color","medium"],[1,"toSmall"],["size","12","size-sm","12",1,"ion-margin-top","ion-padding-top","ion-padding-bottom","ion-margin-bottom","ion-text-center"],["color","light",3,"click"],["name","close-outline"],["color","primary",3,"click"],["name","save-outline"],[1,"ion-text-center",3,"size"],[1,"pictureLogo2",3,"src"],[1,"ion-margin-top"],["name","chevron-back-outline","slot","start"]],template:function(e,o){1&e&&(s.Mb(0,"ion-header"),s.Mb(1,"ion-toolbar"),s.Mb(2,"ion-buttons",0),s.Mb(3,"ion-button",1),s.Ub("click",function(){return o.back()}),s.Kb(4,"ion-icon",2),s.Lb(),s.Lb(),s.Mb(5,"ion-title"),s.mc(6,"Registrar miembro"),s.Lb(),s.Lb(),s.Lb(),s.Mb(7,"ion-content"),s.Mb(8,"ion-row"),s.kc(9,g,59,10,"ion-col",3),s.kc(10,f,14,3,"ion-col",3),s.Lb(),s.Lb()),2&e&&(s.xb(9),s.Zb("ngIf",!o.successRegister),s.xb(1),s.Zb("ngIf",o.successRegister&&o.successData))},directives:[r.r,r.K,r.f,r.e,r.s,r.J,r.o,r.D,n.i,r.n,r.g,r.h,r.v,r.w,r.u,r.T,i.b,i.e,i.f,r.H,r.t,r.k],styles:[".password-text[_ngcontent-%COMP%]{font-size:2em!important;font-weight:700}"]}),e})()}];let h=(()=>{class e{}return e.\u0275mod=s.Hb({type:e}),e.\u0275inj=s.Gb({factory:function(o){return new(o||e)},imports:[[a.j.forChild(p)],a.j]}),e})(),M=(()=>{class e{}return e.\u0275mod=s.Hb({type:e}),e.\u0275inj=s.Gb({factory:function(o){return new(o||e)},imports:[[n.b,i.a,r.L,h]]}),e})()}}]);