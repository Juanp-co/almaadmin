(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{PDbM:function(e,o,i){"use strict";i.r(o),i.d(o,"CrearPageModule",function(){return f});var t=i("ofXK"),n=i("3Pt+"),r=i("TEn/"),s=i("tyNb"),a=i("mrSG"),c=i("fXoL"),l=i("1Ldg"),b=i("4WDQ"),u=i("BpEJ"),d=i("EnSQ");const m=[{path:"",component:(()=>{class e{constructor(e,o,i,t,n,r,s,a){this.activateRoute=e,this.alertCtrl=o,this.axios=i,this.globalSer=t,this.navCtrl=n,this.cursosService=r,this.router=s,this.dataService=a,this.formData={title:null,description:null,banner:null,toRoles:[]},this.roles=["Pastores","Supervisores","L\xedderes","Padres espirituales","Personas"],this.globalSer.checkSession()||this.router.navigate(["/ingresar"])}ngOnInit(){return Object(a.a)(this,void 0,void 0,function*(){this.globalSer.checkSession()||(yield this.router.navigate(["/ingresar"]))})}back(){return Object(a.a)(this,void 0,void 0,function*(){yield this.navCtrl.back()})}registerCourse(){return Object(a.a)(this,void 0,void 0,function*(){yield this.globalSer.presentLoading("Agregando curso, por favor espere ...");const e=Object.assign({},this.formData),o=yield this.cursosService.createCourse(e);o&&!o.error?(yield this.globalSer.dismissLoading(),yield this.globalSer.presentAlert("\xc9xito",o||"Se ha registrado el nuevo cuso exitosamente."),yield this.back()):o&&o.error?(yield this.globalSer.dismissLoading(),yield this.globalSer.errorSession()):yield this.globalSer.dismissLoading()})}getRoles(e){let o="";if(e.length>0)for(const i of e)""===o?o=this.roles[i-1]:o+=", "+this.roles[i-1];return o}openFile(e){const o=e.target.files;if("object"!=typeof o[0])return!1;this.dataService.resizePhoto(o[0],900,"dataURL",e=>{this.formData.banner=e})}showRoleListAlert(e=[]){return Object(a.a)(this,void 0,void 0,function*(){const o=[];for(const[i,t]of this.roles.entries())o.push({name:"roles",type:"checkbox",label:t,value:i+1,checked:e.indexOf(i+1)>-1});yield this.globalSer.alertWithList({header:"Seleccione los roles",inputs:o,confirmAction:e=>{this.formData.toRoles=e}})})}confirmCancel(){return Object(a.a)(this,void 0,void 0,function*(){yield this.globalSer.alertConfirm({header:"Confirme",message:"\xbfEst\xe1 seguro qu\xe9 desea cancelar el registro del nuevo curso?",confirmAction:()=>this.back()})})}confirmRegister(){return Object(a.a)(this,void 0,void 0,function*(){const e=this.cursosService.validationRegister(this.formData);e?yield this.globalSer.presentAlert("Alerta",e||"Disculpe, pero debe completar el formulario."):yield this.globalSer.alertConfirm({header:"Confirme",message:"\xbfEst\xe1 seguro qu\xe9 desea registrar este curso?",confirmAction:()=>this.registerCourse()})})}}return e.\u0275fac=function(o){return new(o||e)(c.Jb(s.a),c.Jb(r.a),c.Jb(l.a),c.Jb(b.a),c.Jb(r.P),c.Jb(u.a),c.Jb(s.g),c.Jb(d.a))},e.\u0275cmp=c.Db({type:e,selectors:[["app-crear"]],decls:56,vars:8,consts:[["slot","start"],[3,"click"],["name","arrow-back-outline"],[1,"ion-no-margin","ion-no-padding",3,"size"],["size-sm","8",3,"size"],["size","12"],["position","floating","color","medium"],["maxlength","25",1,"ion-text-uppercase",3,"ngModel","ngModelChange"],["rows","5","placeholder","Indica la descripci\xf3n del curso...",3,"ngModel","ngModelChange"],["autocomplete","off",3,"readonly","value","click"],["size-sm","4",3,"size"],[1,"ion-justify-content-center","ion-margin"],["size","12",1,"ion-text-center"],[1,"micursor","ion-text-center","w-100"],["type","file","accept","image/x-png,image/gif,image/jpeg","hidden","",3,"change"],[1,"img-fluid",3,"src"],[1,"toSmall"],["size","12","size-sm","12",1,"ion-margin-top"],["color","medium"],["size","12","size-sm","12",1,"ion-margin-top","ion-margin-bottom","ion-text-center"],["color","light",3,"click"],["name","close-outline","slot","start"],["color","primary",3,"click"],["name","save-outline","slot","start"]],template:function(e,o){1&e&&(c.Mb(0,"ion-header"),c.Mb(1,"ion-toolbar"),c.Mb(2,"ion-buttons",0),c.Mb(3,"ion-button",1),c.Ub("click",function(){return o.confirmCancel()}),c.Kb(4,"ion-icon",2),c.Lb(),c.Lb(),c.Mb(5,"ion-title"),c.mc(6,"Crear curso"),c.Lb(),c.Lb(),c.Lb(),c.Mb(7,"ion-content"),c.Mb(8,"ion-row"),c.Mb(9,"ion-col",3),c.Mb(10,"ion-card"),c.Mb(11,"ion-card-header"),c.Mb(12,"ion-card-title"),c.mc(13,"Complete el formulario para nuevos cursos"),c.Lb(),c.Lb(),c.Mb(14,"ion-card-content"),c.Mb(15,"ion-row"),c.Mb(16,"ion-col",4),c.Mb(17,"ion-row"),c.Mb(18,"ion-col",5),c.Mb(19,"ion-item"),c.Mb(20,"ion-label",6),c.mc(21,"Nombre del curso (*)"),c.Lb(),c.Mb(22,"ion-input",7),c.Ub("ngModelChange",function(e){return o.formData.title=e}),c.Lb(),c.Lb(),c.Lb(),c.Mb(23,"ion-col",5),c.Mb(24,"ion-item"),c.Mb(25,"ion-label",6),c.mc(26,"Descripcion del curso (*)"),c.Lb(),c.Mb(27,"ion-textarea",8),c.Ub("ngModelChange",function(e){return o.formData.description=e}),c.Lb(),c.Lb(),c.Lb(),c.Mb(28,"ion-col",5),c.Mb(29,"ion-item"),c.Mb(30,"ion-label",6),c.mc(31,"Roles a los que va dirigido (*)"),c.Lb(),c.Mb(32,"ion-input",9),c.Ub("click",function(){return o.showRoleListAlert(o.formData.toRoles)}),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Mb(33,"ion-col",10),c.Mb(34,"ion-row",11),c.Mb(35,"ion-col",12),c.Mb(36,"label",13),c.Mb(37,"input",14),c.Ub("change",function(e){return o.openFile(e)}),c.Lb(),c.Kb(38,"img",15),c.Lb(),c.Lb(),c.Mb(39,"ion-col",12),c.Mb(40,"ion-text"),c.Mb(41,"i",16),c.mc(42,"Clic para cargar una imagen (*)"),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Mb(43,"ion-col",17),c.Mb(44,"ion-text",18),c.Mb(45,"i",16),c.mc(46,"(*) Campos requeridos."),c.Lb(),c.Lb(),c.Lb(),c.Mb(47,"ion-col",19),c.Mb(48,"ion-button",20),c.Ub("click",function(){return o.confirmCancel()}),c.Kb(49,"ion-icon",21),c.Mb(50,"ion-text"),c.mc(51,"Cancelar"),c.Lb(),c.Lb(),c.Mb(52,"ion-button",22),c.Ub("click",function(){return o.confirmRegister()}),c.Kb(53,"ion-icon",23),c.Mb(54,"ion-text"),c.mc(55,"Guardar"),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb()),2&e&&(c.xb(9),c.Zb("size",12),c.xb(7),c.Zb("size",12),c.xb(6),c.Zb("ngModel",o.formData.title),c.xb(5),c.Zb("ngModel",o.formData.description),c.xb(5),c.Zb("readonly",!0)("value",o.getRoles(o.formData.toRoles)),c.xb(1),c.Zb("size",12),c.xb(5),c.Zb("src",o.formData.banner||"assets/photo.png",c.ic))},directives:[r.r,r.K,r.f,r.e,r.s,r.J,r.o,r.D,r.n,r.g,r.i,r.k,r.h,r.v,r.w,r.u,r.T,n.b,n.e,n.f,r.I,r.H],styles:[".micursor[_ngcontent-%COMP%]{cursor:pointer}.pictureSize200[_ngcontent-%COMP%]{max-height:200px}.w-100[_ngcontent-%COMP%]{width:100%!important}"]}),e})()}];let g=(()=>{class e{}return e.\u0275mod=c.Hb({type:e}),e.\u0275inj=c.Gb({factory:function(o){return new(o||e)},imports:[[s.j.forChild(m)],s.j]}),e})();var h=i("zioG");let f=(()=>{class e{}return e.\u0275mod=c.Hb({type:e}),e.\u0275inj=c.Gb({factory:function(o){return new(o||e)},imports:[[t.b,n.a,r.L,g,h.b]]}),e})()}}]);