(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{PI0l:function(e,i,t){"use strict";t.r(i),t.d(i,"MiembrosPageModule",function(){return x});var s=t("ofXK"),o=t("3Pt+"),n=t("TEn/"),r=t("tyNb"),a=t("mrSG"),l=t("Wgwc"),u=t.n(l),c=t("fXoL"),d=t("1Ldg"),b=t("QTu/"),h=t("iN9u"),y=t("4WDQ"),g=t("wJOZ"),m=t("nfHg"),p=t("bM8H");function f(e,i){if(1&e){const e=c.Nb();c.Mb(0,"ion-button",17),c.Ub("click",function(){return c.ic(e),c.Wb().goToRegister()}),c.Kb(1,"ion-icon",18),c.Mb(2,"ion-text"),c.pc(3,"Registrar miembro"),c.Lb(),c.Lb()}}function k(e,i){if(1&e){const e=c.Nb();c.Mb(0,"ion-button",19),c.Ub("click",function(){c.ic(e);const i=c.Wb();return i.queryParams.word=null,i.findData()}),c.Kb(1,"ion-icon",20),c.Lb()}}function v(e,i){1&e&&c.Kb(0,"ion-icon",21)}function L(e,i){1&e&&c.Kb(0,"ion-icon",22)}function S(e,i){if(1&e&&(c.Mb(0,"ion-col",24),c.Kb(1,"app-usercard",25),c.Lb()),2&e){const e=i.$implicit;c.xb(1),c.Zb("data",e)("list",!0)}}function M(e,i){if(1&e&&(c.Mb(0,"ion-row"),c.nc(1,S,2,2,"ion-col",23),c.Lb()),2&e){const e=c.Wb();c.xb(1),c.Zb("ngForOf",e.users)}}function P(e,i){if(1&e&&(c.Mb(0,"div"),c.Kb(1,"app-paginator",26),c.Lb()),2&e){const e=c.Wb();c.xb(1),c.Zb("totalPages",e.pages)("currentPage",e.queryParams.page)("handlePage",e.handlePage)}}function w(e,i){1&e&&(c.Mb(0,"ion-row"),c.Mb(1,"ion-col"),c.Mb(2,"ion-card"),c.Mb(3,"ion-card-content",27),c.Mb(4,"ion-card-subtitle"),c.Mb(5,"ion-text"),c.Kb(6,"ion-icon",28),c.pc(7,"\xa0 No se encontraron resultados. "),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb())}const D=[{path:"",component:(()=>{class e{constructor(e,i,t,s,o,n,r){this.alertCtrl=e,this.axios=i,this.cookieService=t,this.detallesMiembroService=s,this.globalSer=o,this.miembrosServices=n,this.router=r,this.professions=[],this.companyType=[],this.educationLevel=[],this.bloodType=[],this.departments=[],this.cities=[],this.civilStatus=[],this.gender=[],this.documentTypes=[],this.yesOrNotValues=["No","Si"],this.users=null,this.totals=0,this.pages=0,this.page=1,this.showRegisterButton=!1,this.queryParams={limit:10,page:1,input:"names",value:1,search:null},this.handlePage=e=>{this.queryParams.page=e,this.getData()},this.globalSer.checkSession()?(this.documentTypes=s.documentTypesList,this.educationLevel=s.educationLevel,this.professions=s.professionsList,this.bloodType=s.bloodTypeList,this.companyType=s.companyTypeList,this.civilStatus=s.civilStatusList,this.gender=s.genderList,this.departments=s.departmentsList.map(e=>e.department)):this.router.navigate(["/ingresar"])}ngOnInit(){return Object(a.a)(this,void 0,void 0,function*(){this.showRegisterButton=this.globalSer.checkRoleToEnableAddOrUpdate()})}ionViewWillEnter(){return Object(a.a)(this,void 0,void 0,function*(){this.globalSer.checkSession()?yield this.getTotals():this.router.navigate(["/ingresar"])})}getTotals(){return Object(a.a)(this,void 0,void 0,function*(){const e=yield this.miembrosServices.getUsersCounters(this.queryParams);e&&e>=0&&!e.error?(this.totals=e,this.pages=this.globalSer.getPagination(e,this.queryParams.limit),e>0?yield this.getData():(this.queryParams.page=1,this.pages=0,this.users=[])):e&&e.error?(this.queryParams.page=1,this.pages=0,this.users=[],yield this.globalSer.errorSession()):(this.queryParams.page=1,this.pages=0,this.users=[])})}getData(){return Object(a.a)(this,void 0,void 0,function*(){yield this.globalSer.presentLoading();const e=yield this.miembrosServices.getUsersList(this.queryParams);e&&!e.error?(this.users=e,yield this.globalSer.dismissLoading()):e&&e.error?(this.users=[],this.pages=0,yield this.globalSer.dismissLoading(),yield this.globalSer.errorSession()):(this.users=[],this.pages=0,yield this.globalSer.dismissLoading(),yield this.globalSer.presentAlert("Alerta",e?e.error:"\xa1Error desconocido!"))})}downloadData(){return Object(a.a)(this,void 0,void 0,function*(){yield this.globalSer.presentLoading();const e=yield this.miembrosServices.getAllUsers();if(e&&!e.error){const i=[{key:"phone",key2:"Telefono"},{key:"document",key2:"NumDocumento"},{key:"names",key2:"Nombres"},{key:"lastNames",key2:"Apellidos"},{key:"email",key2:"Correo"},{key:"gender",key2:"Genero"},{key:"birthday",key2:"FechaNacimiento"},{key:"civilStatus",key2:"EstadoCivil"},{key:"educationLevel",key2:"NivelEducativo"},{key:"profession",key2:"Profesion"},{key:"bloodType",key2:"TipoSangre"},{key:"company",key2:"Empresa"},{key:"companyType",key2:"TipoEmpresa"},{key:"baptized",key2:"Bautizado"},{key:"roles",key2:"CargoIglesia"},{key:"consolidated",key2:"Consolidado"},{key:"petition",key2:"Peticion"},{key:"meetingNew",key2:"ReunionIngreso"},{key:"department",key2:"Departamento"},{key:"city",key2:"Ciudad"},{key:"locality",key2:"Localidad"},{key:"direction",key2:"Direccion"},{key:"created_at",key2:"FechaRegistro"}],t=[];e.forEach((e,s)=>{const o={Number:s+1,Telefono:null,NumDocumento:null,Nombres:null,Apellidos:null,Correo:null,Genero:null,FechaNacimiento:null,EstadoCivil:null,NivelEducativo:null,Profesion:null,TipoSangre:null,Empresa:null,TipoEmpresa:null,Bautizado:null,CargoIglesia:null,Consolidado:null,Peticion:null,ReunionIngreso:null,Departamento:null,Ciudad:null,Localidad:null,Direccion:null,FechaRegistro:null};i.forEach(i=>{if(e[i.key])if("civilStatus"===i.key)o[i.key2]=this.civilStatus[e[i.key]];else if("educationLevel"===i.key)o[i.key2]=this.educationLevel[e[i.key]];else if("profession"===i.key)o[i.key2]=this.professions[e[i.key]];else if("bloodType"===i.key)o[i.key2]=this.bloodType[e[i.key]];else if("company"===i.key)o[i.key2]=e[i.key]?"SI":"NO";else if("consolidated"===i.key)o[i.key2]=e[i.key]?"SI":"NO";else if("baptized"===i.key)o[i.key2]=e[i.key]?"SI":"NO";else if("meetingNew"===i.key)o[i.key2]=e[i.key]?"SI":"NO";else if("roles"===i.key)o[i.key2]=this.globalSer.getRoleValue(e[i.key]);else if("companyType"===i.key)o[i.key2]=this.companyType[e[i.key]];else if("gender"===i.key)o[i.key2]=this.gender[e[i.key]];else if("department"===i.key)o[i.key2]=this.departments[e[i.key]];else if("city"===i.key){const t=this.detallesMiembroService.departmentsList[e[i.key]]||null;o[i.key2]=(null==t?void 0:t.cities[e[i.key]])||null}else o[i.key2]=e[i.key]}),t.push(o)}),this.globalSer.downloadCSVFromJson(`Miembros_CCADV_${u()().format("YYYY-MM-DD[_]HH:mm:ss")}.csv`,t),yield this.globalSer.dismissLoading()}else e&&e.error?(yield this.globalSer.dismissLoading(),yield this.globalSer.errorSession()):yield this.globalSer.dismissLoading()})}setSortOrder(){return Object(a.a)(this,void 0,void 0,function*(){this.queryParams.value=1===this.queryParams.value?-1:1,this.queryParams.page=1,this.users=null,yield this.getData()})}findData(){return Object(a.a)(this,void 0,void 0,function*(){this.queryParams.page=1,this.pages=0,this.users=null,yield this.getTotals()})}setQueryValues(){return Object(a.a)(this,void 0,void 0,function*(){const e=e=>{this.queryParams.limit=e,this.queryParams.page=1,this.pages=this.globalSer.getPagination(this.totals,this.queryParams.limit),this.users=null,this.getData()};yield this.globalSer.alertWithList({header:"Resultados por p\xe1gina",inputs:[{name:"results-per-page",type:"radio",label:"10",value:10,checked:10===this.queryParams.limit},{name:"results-per-page",type:"radio",label:"25",value:25,checked:25===this.queryParams.limit},{name:"results-per-page",type:"radio",label:"50",value:50,checked:50===this.queryParams.limit}],confirmAction:i=>e(i)})})}goToRegister(){return Object(a.a)(this,void 0,void 0,function*(){yield this.router.navigate(["/miembros/registro"])})}}return e.\u0275fac=function(i){return new(i||e)(c.Jb(n.a),c.Jb(d.a),c.Jb(b.a),c.Jb(h.a),c.Jb(y.a),c.Jb(g.a),c.Jb(r.g))},e.\u0275cmp=c.Db({type:e,selectors:[["app-miembros"]],decls:40,vars:12,consts:[["slot","end"],["color","primary",3,"click",4,"ngIf"],[1,""],["size","12"],["size-sm","6",3,"size"],["color","medium","slot","start",3,"click",4,"ngIf"],["position","floating","color","medium"],["autocomplete","off",1,"ion-text-uppercase",3,"ngModel","ngModelChange"],["color","medium","slot","end",3,"click"],["name","search-outline"],["color","medium",3,"click"],["name","arrow-up-outline",4,"ngIf"],["name","arrow-down-outline",4,"ngIf"],["name","filter-outline"],[3,"click"],["name","download-outline","slot","start"],[4,"ngIf"],["color","primary",3,"click"],["name","add-outline","slot","start"],["color","medium","slot","start",3,"click"],["name","backspace-outline"],["name","arrow-up-outline"],["name","arrow-down-outline"],["size","12","size-sm","6",4,"ngFor","ngForOf"],["size","12","size-sm","6"],[3,"data","list"],[3,"totalPages","currentPage","handlePage"],[1,"ion-text-center"],["name","alert-circle-outline"]],template:function(e,i){1&e&&(c.Mb(0,"ion-header"),c.Mb(1,"ion-toolbar"),c.Mb(2,"ion-title"),c.pc(3,"Miembros"),c.Lb(),c.Mb(4,"ion-buttons",0),c.nc(5,f,4,0,"ion-button",1),c.Lb(),c.Lb(),c.Lb(),c.Mb(6,"ion-content"),c.Mb(7,"ion-grid",2),c.Mb(8,"ion-row"),c.Mb(9,"ion-col",3),c.Mb(10,"ion-row"),c.Mb(11,"ion-col",4),c.Mb(12,"ion-toolbar"),c.nc(13,k,2,0,"ion-button",5),c.Mb(14,"ion-item"),c.Mb(15,"ion-label",6),c.pc(16,"Buscar"),c.Lb(),c.Mb(17,"ion-input",7),c.Ub("ngModelChange",function(e){return i.queryParams.search=e}),c.Lb(),c.Lb(),c.Mb(18,"ion-button",8),c.Ub("click",function(){return null!==i.queryParams.word||""!==i.queryParams.word?i.findData():null}),c.Kb(19,"ion-icon",9),c.Lb(),c.Lb(),c.Lb(),c.Mb(20,"ion-col",4),c.Mb(21,"ion-toolbar"),c.Mb(22,"ion-button",10),c.Ub("click",function(){return i.setSortOrder()}),c.nc(23,v,1,0,"ion-icon",11),c.nc(24,L,1,0,"ion-icon",12),c.pc(25,"\xa0 "),c.Mb(26,"ion-text"),c.pc(27),c.Lb(),c.Lb(),c.Mb(28,"ion-button",10),c.Ub("click",function(){return i.setQueryValues()}),c.Kb(29,"ion-icon",13),c.pc(30,"\xa0 "),c.Mb(31,"ion-text"),c.pc(32),c.Lb(),c.Lb(),c.Mb(33,"ion-button",14),c.Ub("click",function(){return i.downloadData()}),c.Kb(34,"ion-icon",15),c.Mb(35,"ion-text"),c.pc(36,"Descargar datos"),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.nc(37,M,2,1,"ion-row",16),c.nc(38,P,2,3,"div",16),c.nc(39,w,8,0,"ion-row",16),c.Lb(),c.Lb()),2&e&&(c.xb(5),c.Zb("ngIf",i.showRegisterButton),c.xb(6),c.Zb("size",12),c.xb(2),c.Zb("ngIf",i.queryParams.word),c.xb(4),c.Zb("ngModel",i.queryParams.search),c.xb(3),c.Zb("size",12),c.xb(3),c.Zb("ngIf",1===i.queryParams.value),c.xb(1),c.Zb("ngIf",-1===i.queryParams.value),c.xb(3),c.qc(1===i.queryParams.value?"ASC":"DES"),c.xb(5),c.qc(i.queryParams.limit),c.xb(5),c.Zb("ngIf",i.users&&i.users.length>0),c.xb(1),c.Zb("ngIf",i.users&&i.users.length>0&&i.pages>0),c.xb(1),c.Zb("ngIf",null!==i.users&&0===i.users.length))},directives:[n.r,n.O,n.M,n.f,s.i,n.o,n.q,n.E,n.n,n.v,n.w,n.u,n.X,o.e,o.f,n.e,n.s,n.J,s.h,m.a,p.a,n.g,n.h,n.j],styles:[""]}),e})()},{path:"registro",loadChildren:()=>Promise.all([t.e(0),t.e(31)]).then(t.bind(null,"3V3w")).then(e=>e.RegistroPageModule)},{path:":userid",loadChildren:()=>Promise.all([t.e(0),t.e(30)]).then(t.bind(null,"ZMlI")).then(e=>e.DetallesMiembroPageModule)},{path:"asignar-consolidador",loadChildren:()=>Promise.all([t.e(0),t.e(49)]).then(t.bind(null,"F1ym")).then(e=>e.AsignarConsolidadorPageModule)},{path:"asignar-grupo-familiar",loadChildren:()=>Promise.all([t.e(0),t.e(29)]).then(t.bind(null,"Cvgr")).then(e=>e.AsignarGrupoFamiliarPageModule)}];let T=(()=>{class e{}return e.\u0275mod=c.Hb({type:e}),e.\u0275inj=c.Gb({factory:function(i){return new(i||e)},imports:[[r.j.forChild(D)],r.j]}),e})();var q=t("j1ZV");let x=(()=>{class e{}return e.\u0275mod=c.Hb({type:e}),e.\u0275inj=c.Gb({factory:function(i){return new(i||e)},imports:[[s.b,o.a,n.P,T,q.a]]}),e})()},iN9u:function(e,i,t){"use strict";t.d(i,"a",function(){return u});var s=t("mrSG"),o=t("0ox5"),n=t("ZrT4"),r=t("fXoL"),a=t("1Ldg"),l=t("4WDQ");let u=(()=>{class e{constructor(e,i){this.axios=e,this.globalSer=i,this.professionsList=o.g,this.companyTypeList=o.c,this.departmentsList=n.a,this.educationLevel=o.e,this.bloodTypeList=o.a,this.civilStatusList=o.b,this.genderList=o.f,this.documentTypesList=o.d}getUserDetails(e){return Object(s.a)(this,void 0,void 0,function*(){const i=yield this.axios.getData("/admin/users/"+e);return i&&i.success?i.data.user:this.globalSer.altResponse(i)})}updateDataUser(e,i){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.axios.putData("/admin/users/"+e,i);return t&&t.success?t.data.user:this.globalSer.altResponse(t)})}updateRoleUser(e,i){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.axios.putData(`/admin/users/${e}/role`,i);return t&&t.success?t.data.msg||"Se asignado el nuevo rol al miembro exitosamente.":this.globalSer.altResponse(t)})}deleteUser(e){return Object(s.a)(this,void 0,void 0,function*(){const i=yield this.axios.deleteData("/admin/users/"+e);return i&&i.success?i.data.msg:this.globalSer.altResponse(i)})}getUsersCourses(e){return Object(s.a)(this,void 0,void 0,function*(){const i=yield this.axios.getData(`/admin/users/${e}/courses`);return i&&i.success?i.data.courses||[]:this.globalSer.altResponse(i)})}getUsersReferrals(e){return Object(s.a)(this,void 0,void 0,function*(){const i=yield this.axios.getData(`/admin/users/${e}/referrals`);return i&&i.success?i.data.referrals||[]:this.globalSer.altResponse(i)})}}return e.\u0275fac=function(i){return new(i||e)(r.Qb(a.a),r.Qb(l.a))},e.\u0275prov=r.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);