(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"1Zva":function(t,n,e){"use strict";e.d(n,"a",function(){return m});var i=e("mrSG"),o=e("Wgwc"),s=e.n(o),r=(e("4HKe"),e("13Ln")),a=e.n(r),b=e("QgiU"),c=e.n(b),l=e("fXoL"),u=e("TEn/"),d=e("ofXK"),f=e("nfHg");function h(t,n){if(1&t){const t=l.Nb();l.Mb(0,"ion-row",4),l.Mb(1,"ion-col",5),l.Mb(2,"ion-row"),l.Mb(3,"ion-col",6),l.Mb(4,"ion-text"),l.Mb(5,"b"),l.pc(6,"Consolidador:"),l.Lb(),l.Lb(),l.Lb(),l.Mb(7,"ion-col",6),l.Mb(8,"app-usercard",7),l.Ub("click",function(){return l.ic(t),l.Wb().closeModal()}),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Mb(9,"ion-col",5),l.Mb(10,"ion-row"),l.Mb(11,"ion-col",6),l.Mb(12,"ion-text"),l.Mb(13,"b"),l.pc(14,"Miembro visitado:"),l.Lb(),l.Lb(),l.Lb(),l.Mb(15,"ion-col",6),l.Mb(16,"app-usercard",7),l.Ub("click",function(){return l.ic(t),l.Wb().closeModal()}),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Mb(17,"ion-col",6),l.Mb(18,"ion-row"),l.Mb(19,"ion-col",5),l.Mb(20,"ion-text",8),l.Mb(21,"b"),l.pc(22,"Fecha de la visita: "),l.Lb(),l.Kb(23,"br"),l.Kb(24,"br"),l.pc(25),l.Kb(26,"br"),l.Lb(),l.Lb(),l.Mb(27,"ion-col",5),l.Mb(28,"ion-text",8),l.Mb(29,"b"),l.pc(30,"Acci\xf3n: "),l.Lb(),l.Kb(31,"br"),l.Kb(32,"br"),l.pc(33),l.Kb(34,"br"),l.Lb(),l.Lb(),l.Mb(35,"ion-col",9),l.Mb(36,"ion-text"),l.Mb(37,"b"),l.pc(38,"Observaci\xf3n: "),l.Lb(),l.Kb(39,"br"),l.Kb(40,"br"),l.Lb(),l.Kb(41,"div",10),l.Lb(),l.Lb(),l.Lb(),l.Lb()}if(2&t){const t=l.Wb();l.xb(8),l.Zb("data",t.data.consolidator),l.xb(8),l.Zb("data",t.data.member),l.xb(9),l.rc(" ",t.data.date," "),l.xb(8),l.rc(" ",t.data.action," "),l.xb(8),l.Zb("innerHTML",t.data.observation,l.jc)}}let m=(()=>{class t{constructor(t){this.modalCtrl=t,s.a.extend(a.a),s.a.extend(c.a)}ngOnInit(){return Object(i.a)(this,void 0,void 0,function*(){this.data?this.data.date=this.data.date?s()(this.data.date,"YYYY-MM-DD",!0).locale("es").format("dddd, DD [de] MMMM [de] YYYY"):"No encontrada.":yield this.closeModal()})}closeModal(){return Object(i.a)(this,void 0,void 0,function*(){yield this.modalCtrl.dismiss()})}}return t.\u0275fac=function(n){return new(n||t)(l.Jb(u.T))},t.\u0275cmp=l.Db({type:t,selectors:[["app-detalles-consolidado"]],inputs:{data:"data"},decls:11,vars:1,consts:[["slot","start"],[3,"click"],["name","close-outline"],["class","ion-padding",4,"ngIf"],[1,"ion-padding"],["size","12","size-sm","6"],["size","12"],[3,"data","click"],["color","medium"],["size","12",1,"ion-margin-top"],[3,"innerHTML"]],template:function(t,n){1&t&&(l.Mb(0,"ion-header"),l.Mb(1,"ion-toolbar"),l.Mb(2,"ion-buttons",0),l.Mb(3,"ion-button",1),l.Ub("click",function(){return n.closeModal()}),l.Kb(4,"ion-icon",2),l.Lb(),l.Lb(),l.Mb(5,"ion-title"),l.pc(6,"Detalle de la visita"),l.Lb(),l.Lb(),l.Lb(),l.Mb(7,"ion-content"),l.nc(8,h,42,5,"ion-row",3),l.Kb(9,"br"),l.Kb(10,"br"),l.Lb()),2&t&&(l.xb(8),l.Zb("ngIf",n.data))},directives:[u.r,u.P,u.f,u.e,u.s,u.N,u.o,d.i,u.E,u.n,u.K,f.a],styles:[""]}),t})()},OmbT:function(t,n,e){"use strict";function i(t){return t&&/^([A-Z\u00C0-\u024F\u1E00-\u1EFF]?)+([[A-Za-z\u00C0-\u024F\u1E00-\u1EFF]+[,.]?[ ]?|[A-Za-z\u00C0-\u024F\u1E00-\u1EFF]+['-]]?)+$/.test(t)}function o(t){const n=String.fromCharCode(t.charCode);/[0-9.,]/.test(n)||t.preventDefault()}function s(t){const n=String.fromCharCode(t.charCode);/[0-9]/.test(n)||t.preventDefault()}function r(t){const{value:n}=t.target;/^([A-Z\u00C0-\u024F\u1E00-\u1EFF]?)+([[A-Za-z\u00C0-\u024F\u1E00-\u1EFF]+[,.]?[ ]?|[A-Za-z\u00C0-\u024F\u1E00-\u1EFF]+['-]]?)+$/.test(n)||(t.target.value=n.substring(0,n.length-1))}function a(t){return t&&/^[0-9]{1,3}/.test(""+t)}function b(t){return t&&/^[\+]?[(]?([0-9]{2})?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/.test(t)}function c(t){return t&&/^(?=.*\d)?(?=.*[A-Z]{1})?(?=.*[a-z]{1}?)?(?=.*[^\w\d\s:]?)([^\s]){6,25}$/.test(t)}function l(t){return t&&/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(t)}function u(t){return t&&/^[a-zA-Z\xc1\xc9\xcd\xd3\xda\xc0\xc8\xcc\xd2\xd9\xe0\xe8\xec\xf2\xf9\xe1\xe9\xed\xf3\xfa\xc2\xca\xce\xd4\xdb\xe2\xea\xee\xf4\xfb\xc4\xcb\xcf\xd6\xdc\xe4\xeb\xef\xf6\xfc\xf1\xd10-9\s.,#*?\xbf\xa1!()\-+"'/@]{5,2000}/g.test(t)}function d(t){return t&&/\d{4}\-(0?[1-9]|1[012])\-(0?[1-9]|[12][0-9]|3[01])*/.test(""+t)}function f(t){return t&&/^([0-1]?[0-9]|2[0-4]):([0-5][0-9])(:[0-5][0-9])?$/.test(t)}function h(t,n=!1){return!!t&&(n?t.substr(0,40).indexOf("data:application/pdf")>-1:t.substr(0,21).indexOf("data:image/")>-1)}function m(t){return/^(?:(?:(?:http?|https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(""+t)}function M(t){return/(?:https?:\/\/)?(?:www|m\.)?(facebook|fb)\.(com|me)\/(?:(?:\w\.)*#!\/)?(?:pages\/)?(?:[\w\-\.]*\/)*([\w\-\.]*)/gi.test(""+t)}function g(t){return/(?:(?:http|https):\/\/)?(?:www\.)?(?:instagram\.com|instagr\.am)\/([A-Za-z0-9-_\.\/]+)/i.test(""+t)}function p(t){return/^(?:https?:\/\/)?(?:www\.)?twitter\.com\/(#!\/)?[a-zA-Z0-9_]+$/i.test(""+t)}function L(t){return/^((?:https?:)?\/\/)?((?:www|m)\.)?((?:youtube\.com|youtu.be))(\/(?:[\w\-]+\?v=|embed\/|v\/)?)([\w\-]+)(\S+)?$/i.test(""+t)}function v(t,n=!1){return t?n?t.replace(/\n/g,"<br/>"):t.replace(/<br ?\/?>|<BR ?\/?>/g,"\n"):null}function w(t){return t?t.replace(/&NBSP;/g," "):null}e.d(n,"h",function(){return i}),e.d(n,"p",function(){return o}),e.d(n,"q",function(){return s}),e.d(n,"o",function(){return r}),e.d(n,"f",function(){return a}),e.d(n,"j",function(){return b}),e.d(n,"i",function(){return c}),e.d(n,"c",function(){return l}),e.d(n,"k",function(){return u}),e.d(n,"b",function(){return d}),e.d(n,"e",function(){return f}),e.d(n,"a",function(){return h}),e.d(n,"m",function(){return m}),e.d(n,"d",function(){return M}),e.d(n,"g",function(){return g}),e.d(n,"l",function(){return p}),e.d(n,"n",function(){return L}),e.d(n,"s",function(){return v}),e.d(n,"r",function(){return w})},V5HN:function(t,n,e){"use strict";e.r(n),e.d(n,"ConsolidadosPageModule",function(){return k});var i=e("ofXK"),o=e("3Pt+"),s=e("TEn/"),r=e("tyNb"),a=e("mrSG"),b=e("Wgwc"),c=e.n(b),l=(e("4HKe"),e("13Ln")),u=e.n(l),d=e("QgiU"),f=e.n(d),h=e("1Zva"),m=e("OmbT"),M=e("fXoL"),g=e("4WDQ"),p=e("l2JI"),L=e("nfHg");function v(t,n){1&t&&M.Kb(0,"ion-icon",13)}function w(t,n){1&t&&M.Kb(0,"ion-icon",14)}function x(t,n){if(1&t){const t=M.Nb();M.Mb(0,"ion-col",4),M.Mb(1,"ion-card"),M.Mb(2,"ion-card-content"),M.Mb(3,"ion-row"),M.Mb(4,"ion-col",15),M.Mb(5,"ion-item"),M.Mb(6,"ion-label",16),M.pc(7,"A partir de:"),M.Lb(),M.Mb(8,"ion-datetime",17),M.Ub("ngModelChange",function(n){return M.ic(t),M.Wb().queryParams.initDate=n}),M.Lb(),M.Lb(),M.Lb(),M.Mb(9,"ion-col",15),M.Mb(10,"ion-item"),M.Mb(11,"ion-label",16),M.pc(12,"Hasta:"),M.Lb(),M.Mb(13,"ion-datetime",17),M.Ub("ngModelChange",function(n){return M.ic(t),M.Wb().queryParams.endDate=n}),M.Lb(),M.Lb(),M.Lb(),M.Lb(),M.Mb(14,"ion-row",18),M.Mb(15,"ion-col",19),M.Mb(16,"ion-button",20),M.Ub("click",function(){return M.ic(t),M.Wb().resetQueryParams()}),M.Kb(17,"ion-icon",21),M.Mb(18,"ion-text"),M.pc(19,"Limpiar"),M.Lb(),M.Lb(),M.Lb(),M.Mb(20,"ion-col",19),M.Mb(21,"ion-button",22),M.Ub("click",function(){return M.ic(t),M.Wb().findData()}),M.Kb(22,"ion-icon",23),M.Mb(23,"ion-text"),M.pc(24,"Aplicar"),M.Lb(),M.Lb(),M.Lb(),M.Lb(),M.Lb(),M.Lb(),M.Lb()}if(2&t){const t=M.Wb();M.xb(8),M.Zb("ngModel",t.queryParams.initDate)("min",t.minInitDate)("max",t.maxInitDate),M.xb(5),M.Zb("ngModel",t.queryParams.endDate)("min",t.minEndDate)("max",t.maxEndDate)}}function D(t,n){if(1&t){const t=M.Nb();M.Mb(0,"ion-col",36),M.Mb(1,"ion-card",1),M.Ub("click",function(){M.ic(t);const e=n.index;return M.Wb(3).showDetails(e)}),M.Mb(2,"ion-card-content",42),M.Mb(3,"ion-text"),M.Mb(4,"p"),M.Mb(5,"b"),M.pc(6),M.Lb(),M.Lb(),M.Lb(),M.Mb(7,"ion-text"),M.Mb(8,"p"),M.pc(9),M.Lb(),M.Lb(),M.Mb(10,"ion-text"),M.Mb(11,"span"),M.Mb(12,"b"),M.pc(13,"Fecha: "),M.Lb(),M.pc(14),M.Lb(),M.Kb(15,"br"),M.Lb(),M.Mb(16,"ion-text"),M.Mb(17,"i",43),M.pc(18,"Clic para m\xe1s detalles."),M.Lb(),M.Lb(),M.Lb(),M.Lb(),M.Lb()}if(2&t){const t=n.$implicit,e=M.Wb(3);M.Zb("sizeSm",6===e.sizeElems?12:6),M.xb(6),M.qc(t.member?t.member.names+" "+t.member.lastNames:"Desconocido"),M.xb(3),M.qc(t.observation),M.xb(5),M.qc(t.date)}}function y(t,n){if(1&t&&(M.Mb(0,"ion-row"),M.nc(1,D,19,4,"ion-col",41),M.Lb()),2&t){const t=M.Wb(2);M.zb(6===t.sizeElems?"max-height-250":"max-height-450"),M.xb(1),M.Zb("ngForOf",t.consolidatesPreview)}}function $(t,n){1&t&&(M.Mb(0,"ion-row",29),M.Mb(1,"ion-col",4),M.Mb(2,"ion-text",44),M.Mb(3,"p",45),M.Kb(4,"ion-icon",46),M.pc(5," No se encontraron visitas. "),M.Lb(),M.Lb(),M.Lb(),M.Lb())}function S(t,n){if(1&t&&(M.Mb(0,"ion-col",36),M.Kb(1,"app-usercard",47),M.Lb()),2&t){const t=n.$implicit,e=M.Wb(3);M.Zb("sizeSm",6===e.sizeElems?12:4),M.xb(1),M.Zb("data",t)}}function z(t,n){if(1&t&&(M.Mb(0,"ion-row"),M.nc(1,S,2,2,"ion-col",41),M.Lb()),2&t){const t=M.Wb(2);M.zb(6===t.sizeElems?"max-height-250":"max-height-450"),M.xb(1),M.Zb("ngForOf",t.members)}}function Y(t,n){1&t&&(M.Mb(0,"ion-row",29),M.Mb(1,"ion-col",4),M.Mb(2,"ion-text",44),M.Mb(3,"p",45),M.Kb(4,"ion-icon",46),M.pc(5," No existen miembros. "),M.Lb(),M.Lb(),M.Lb(),M.Lb())}function O(t,n){if(1&t&&(M.Mb(0,"ion-col",36),M.Kb(1,"app-usercard",48),M.Lb()),2&t){const t=n.$implicit,e=M.Wb(3);M.Zb("sizeSm",6===e.sizeElems?12:4),M.xb(1),M.Zb("data",t)("goDetails",!1)}}function C(t,n){if(1&t&&(M.Mb(0,"ion-row"),M.nc(1,O,2,3,"ion-col",41),M.Lb()),2&t){const t=M.Wb(2);M.zb(6===t.sizeElems?"max-height-250":"max-height-450"),M.xb(1),M.Zb("ngForOf",t.pendingMembers)}}function E(t,n){1&t&&(M.Mb(0,"ion-row",29),M.Mb(1,"ion-col",4),M.Mb(2,"ion-text",44),M.Mb(3,"p",45),M.Kb(4,"ion-icon",46),M.pc(5," No existen miembros pendientes por visitas. "),M.Lb(),M.Lb(),M.Lb(),M.Lb())}function Z(t,n){if(1&t){const t=M.Nb();M.Mb(0,"ion-row",24),M.Mb(1,"ion-col",4),M.Mb(2,"ion-card",25),M.Mb(3,"ion-card-header",25),M.Mb(4,"ion-toolbar",26),M.Mb(5,"ion-buttons",27),M.Mb(6,"ion-button",1),M.Ub("click",function(){return M.ic(t),M.Wb().setView("totals")}),M.Kb(7,"ion-icon",28),M.Lb(),M.Lb(),M.Mb(8,"ion-title"),M.pc(9,"Resumen"),M.Lb(),M.Lb(),M.Lb(),M.Mb(10,"ion-card-content"),M.Mb(11,"ion-row",29),M.Mb(12,"ion-col",30),M.Mb(13,"ion-text"),M.Mb(14,"span",31),M.pc(15),M.Lb(),M.Kb(16,"br"),M.Lb(),M.Mb(17,"ion-text"),M.Mb(18,"p",32),M.Kb(19,"ion-icon",33),M.pc(20," Miembros consolidados "),M.Lb(),M.Lb(),M.Lb(),M.Mb(21,"ion-col",30),M.Mb(22,"ion-text"),M.Mb(23,"span",31),M.pc(24),M.Lb(),M.Kb(25,"br"),M.Lb(),M.Mb(26,"ion-text"),M.Mb(27,"p",32),M.Kb(28,"ion-icon",34),M.pc(29," Visitas realizadas "),M.Lb(),M.Lb(),M.Lb(),M.Mb(30,"ion-col",30),M.Mb(31,"ion-text"),M.Mb(32,"span",31),M.pc(33),M.Lb(),M.Kb(34,"br"),M.Lb(),M.Mb(35,"ion-text"),M.Mb(36,"p",32),M.Kb(37,"ion-icon",35),M.pc(38," Visitas pendientes "),M.Lb(),M.Lb(),M.Lb(),M.Lb(),M.Lb(),M.Lb(),M.Lb(),M.Mb(39,"ion-col",36),M.Mb(40,"ion-card",25),M.Mb(41,"ion-card-header",25),M.Mb(42,"ion-toolbar",26),M.Mb(43,"ion-buttons",27),M.Mb(44,"ion-button",1),M.Ub("click",function(){return M.ic(t),M.Wb().setView("visits")}),M.Kb(45,"ion-icon",28),M.Lb(),M.Lb(),M.Mb(46,"ion-title"),M.pc(47,"Visitas"),M.Lb(),M.Lb(),M.Lb(),M.Mb(48,"ion-card-content"),M.nc(49,y,2,4,"ion-row",37),M.nc(50,$,6,0,"ng-template",null,38,M.oc),M.Lb(),M.Lb(),M.Lb(),M.Mb(52,"ion-col",36),M.Mb(53,"ion-card",25),M.Mb(54,"ion-card-header",25),M.Mb(55,"ion-toolbar",26),M.Mb(56,"ion-buttons",27),M.Mb(57,"ion-button",1),M.Ub("click",function(){return M.ic(t),M.Wb().setView("members")}),M.Kb(58,"ion-icon",28),M.Lb(),M.Lb(),M.Mb(59,"ion-title"),M.pc(60,"Miembros consolidados"),M.Lb(),M.Lb(),M.Lb(),M.Mb(61,"ion-card-content"),M.nc(62,z,2,4,"ion-row",37),M.nc(63,Y,6,0,"ng-template",null,39,M.oc),M.Lb(),M.Lb(),M.Lb(),M.Mb(65,"ion-col",36),M.Mb(66,"ion-card",25),M.Mb(67,"ion-card-header",25),M.Mb(68,"ion-toolbar",26),M.Mb(69,"ion-buttons",27),M.Mb(70,"ion-button",1),M.Ub("click",function(){return M.ic(t),M.Wb().setView("pending")}),M.Kb(71,"ion-icon",28),M.Lb(),M.Lb(),M.Mb(72,"ion-title"),M.pc(73,"Miembros pendientes por visita"),M.Lb(),M.Lb(),M.Lb(),M.Mb(74,"ion-card-content"),M.nc(75,C,2,4,"ion-row",37),M.nc(76,E,6,0,"ng-template",null,40,M.oc),M.Lb(),M.Lb(),M.Lb(),M.Lb()}if(2&t){const t=M.hc(51),n=M.hc(64),e=M.hc(77),i=M.Wb();M.xb(7),M.bc("name","chevron-",i.views.totals?"up":"down","-outline"),M.xb(3),M.Ab("",i.views.totals?"":"ion-hide"," ion-no-padding no-selected-text"),M.xb(2),M.Zb("sizeSm",4),M.xb(3),M.qc(i.members.length),M.xb(6),M.Zb("sizeSm",4),M.xb(3),M.qc(i.consolidates.length),M.xb(6),M.Zb("sizeSm",4),M.xb(3),M.qc(i.pendingVisitsTotals||0),M.xb(6),M.Zb("sizeSm",i.sizeElems),M.xb(6),M.bc("name","chevron-",i.views.visits?"up":"down","-outline"),M.xb(3),M.Ab("",i.views.visits?"":"ion-hide"," ion-no-padding"),M.xb(1),M.Zb("ngIf",i.consolidatesPreview&&i.consolidatesPreview.length>0)("ngIfElse",t),M.xb(3),M.Zb("sizeSm",i.sizeElems),M.xb(6),M.bc("name","chevron-",i.views.members?"up":"down","-outline"),M.xb(3),M.Ab("",i.views.members?"":"ion-hide"," ion-no-padding"),M.xb(1),M.Zb("ngIf",i.members&&i.members.length>0)("ngIfElse",n),M.xb(3),M.Zb("sizeSm",i.sizeElems),M.xb(6),M.bc("name","chevron-",i.views.pending?"up":"down","-outline"),M.xb(3),M.Ab("",i.views.pending?"":"ion-hide"," ion-no-padding"),M.xb(1),M.Zb("ngIf",i.pendingMembers&&i.pendingMembers.length>0)("ngIfElse",e)}}const P=[{path:"",component:(()=>{class t{constructor(t,n,e){this.globalSer=t,this.consolidadosService=n,this.router=e,this.reports=null,this.members=[],this.consolidates=[],this.pendingMembers=[],this.consolidatesPreview=[],this.pendingVisitsTotals=0,this.sizeElems=12,this.minInitDate=c()("2021-01-01").format("YYYY-MM-DD"),this.maxInitDate=c()().format("YYYY-MM-DD"),this.minEndDate=c()("2021-01-01").format("YYYY-MM-DD"),this.maxEndDate=c()().format("YYYY-MM-DD"),this.queryParams={initDate:null,endDate:null,input:"date",value:"-1"},this.views={filter:!1,totals:!0,visits:!0,members:!0,pending:!0},c.a.extend(u.a),c.a.extend(f.a)}ngOnInit(){return Object(a.a)(this,void 0,void 0,function*(){this.globalSer.checkSession()||(yield this.router.navigate(["/ingresar"]))})}ionViewWillEnter(){return Object(a.a)(this,void 0,void 0,function*(){yield this.getData()})}getData(){return Object(a.a)(this,void 0,void 0,function*(){yield this.globalSer.presentLoading(),this.reports=null,this.pendingVisitsTotals=null,this.consolidates=[],this.consolidatesPreview=[];const t=yield this.consolidadosService.getConsolidatesReport(this.queryParams);t&&!t.error?(this.reports=t,this.members=t.members||[],this.setConsolidatesValues(t.consolidates||[]),this.setPendingMembers(t.pendingVisits||[]),yield this.globalSer.dismissLoading()):t&&t.error?(yield this.globalSer.dismissLoading(),yield this.globalSer.errorSession()):yield this.globalSer.dismissLoading()})}showListResizeAlert(){return Object(a.a)(this,void 0,void 0,function*(){yield this.globalSer.alertWithList({header:"Tama\xf1os de las gr\xe1ficas",inputs:[{name:"resize",type:"radio",label:"Mediano",value:6,checked:6===this.sizeElems},{name:"resize",type:"radio",label:"Grande",value:12,checked:12===this.sizeElems}],confirmAction:t=>{this.sizeElems=t}})})}setView(t){this.views[t]=!this.views[t]}resetQueryParams(){return Object(a.a)(this,void 0,void 0,function*(){this.queryParams.initDate=null,this.queryParams.endDate=null,this.views.filter=!this.views.filter,yield this.getData()})}findData(){return Object(a.a)(this,void 0,void 0,function*(){let t=!1;this.queryParams.initDate&&(this.queryParams.initDate=c()(this.queryParams.initDate).format("YYYY-MM-DD"),t=!0),this.queryParams.endDate&&(this.queryParams.endDate=c()(this.queryParams.endDate).format("YYYY-MM-DD"),t=null!==this.queryParams.initDate),t?yield this.getData():this.globalSer.presentAlert("Alerta","Disculpe, pero debe indicar una fecha inicial")})}setConsolidatesValues(t){this.consolidates=[],this.consolidatesPreview=[],t&&t.length>0&&(this.consolidates=t,t.forEach(t=>{this.consolidatesPreview.push({member:t.member,observation:t.observation.length>50?Object(m.s)(t.observation.substr(0,50))+" ...":Object(m.s)(t.observation)||"No indicada.",date:t.date?c()(t.date,"YYYY-MM-DD",!0).locale("es").format("dddd, DD [de] MMMM [de] YYYY"):"No encontrada."})}))}setPendingMembers(t){this.pendingMembers=[],this.pendingVisitsTotals=t.length,this.pendingVisitsTotals>0&&this.members.length>0&&t.forEach(t=>{const n=this.members.find(n=>n._id===t);n&&this.pendingMembers.push(n)})}showDetails(t=null){return Object(a.a)(this,void 0,void 0,function*(){if(null!==t){yield this.globalSer.presentLoading();const n=this.consolidates[t]||null;n?(yield this.globalSer.loadModal(h.a,{data:n},!0),yield this.globalSer.dismissLoading()):(yield this.globalSer.dismissLoading(),yield this.globalSer.presentAlert("Error","No se ha logrado determinar el elemento a visualizar."))}else yield this.globalSer.presentAlert("Error","No se ha logrado determinar el elemento a visualizar.")})}goToVisitRegisterForm(){return Object(a.a)(this,void 0,void 0,function*(){yield this.router.navigate(["consolidados/registrar-visita"])})}downloadData(){if(this.consolidates.length>0){const t=[],n=(t=null)=>t?`${t.names} ${t.lastNames} - ${t.phone}`:null;this.consolidates.forEach(e=>{var i;const o={Fecha:e.date,Visitador:n(e.consolidator||null),Visitado:n(e.member||null),Observacion:null===(i=e.observation)||void 0===i?void 0:i.replaceAll(",",";;")};t.push(o)}),this.globalSer.downloadCSVFromJson(`VISITAS_CONSOLIDADOS_CCADV_${c()().format("YYYY-MM-DD[_]HH:mm:ss")}.csv`,t)}}}return t.\u0275fac=function(n){return new(n||t)(M.Jb(g.a),M.Jb(p.a),M.Jb(r.g))},t.\u0275cmp=M.Db({type:t,selectors:[["app-consolidados"]],decls:28,vars:4,consts:[["slot","end"],[3,"click"],["name","resize-outline","slot","start"],[1,"ion-no-padding","ion-margin-start","ion-margin-end","ion-margin-top"],["size","12"],[1,""],["color","medium",3,"click"],["name","filter-outline","slot","start",4,"ngIf"],["name","close-outline","slot","start",4,"ngIf"],["name","clipboard-outline","slot","start"],["name","download-outline","slot","start"],["size","12",4,"ngIf"],["class","ion-margin-top ion-margin-bottom ion-padding-bottom",4,"ngIf"],["name","filter-outline","slot","start"],["name","close-outline","slot","start"],["size","12","size-sm","6"],["position","floating","color","medium"],["displayFormat","DD/MM/YYYY","doneText","Listo","cancelText","Cancelar",3,"ngModel","min","max","ngModelChange"],[1,"ion-margin-top"],["size","6",1,"ion-justify-content-center"],["color","medium","expand","full",1,"ion-text-center",3,"click"],["name","trash-outline"],["color","primary","expand","full",1,"ion-text-center",3,"click"],["name","checkmark-outline"],[1,"ion-margin-top","ion-margin-bottom","ion-padding-bottom"],[1,"ion-no-padding"],["color","primary"],["slot","start"],[3,"name"],[1,"ion-margin-top","ion-margin-bottom"],["size","12",1,"ion-text-center",3,"sizeSm"],[1,"bigIcon"],[1,"textTotals"],["name","body-outline",1,"textTotals"],["name","footsteps-outline",1,"textTotals"],["name","timer-outline",1,"textTotals"],["size","12",3,"sizeSm"],[3,"class",4,"ngIf","ngIfElse"],["noConsolidates",""],["noMembers",""],["noPending",""],["size","12",3,"sizeSm",4,"ngFor","ngForOf"],[1,"no-selected-text"],[1,"toSmall"],["color","medium"],[1,"ion-text-center"],["name","alert-circle-outline"],[3,"data"],[3,"data","goDetails"]],template:function(t,n){1&t&&(M.Mb(0,"ion-header"),M.Mb(1,"ion-toolbar"),M.Mb(2,"ion-title"),M.pc(3,"Consolidados"),M.Lb(),M.Mb(4,"ion-buttons",0),M.Mb(5,"ion-button",1),M.Ub("click",function(){return n.showListResizeAlert()}),M.Kb(6,"ion-icon",2),M.Mb(7,"ion-text"),M.pc(8,"Visualizaci\xf3n"),M.Lb(),M.Lb(),M.Lb(),M.Lb(),M.Lb(),M.Mb(9,"ion-content"),M.Mb(10,"ion-row",3),M.Mb(11,"ion-col",4),M.Mb(12,"div",5),M.Mb(13,"ion-button",6),M.Ub("click",function(){return n.setView("filter")}),M.nc(14,v,1,0,"ion-icon",7),M.nc(15,w,1,0,"ion-icon",8),M.Mb(16,"ion-text"),M.pc(17,"Filtrar"),M.Lb(),M.Lb(),M.Mb(18,"ion-button",1),M.Ub("click",function(){return n.goToVisitRegisterForm()}),M.Kb(19,"ion-icon",9),M.Mb(20,"ion-text"),M.pc(21,"Registrar visita"),M.Lb(),M.Lb(),M.Mb(22,"ion-button",1),M.Ub("click",function(){return n.downloadData()}),M.Kb(23,"ion-icon",10),M.Mb(24,"ion-text"),M.pc(25,"Descargar datos"),M.Lb(),M.Lb(),M.Lb(),M.Lb(),M.nc(26,x,25,6,"ion-col",11),M.Lb(),M.nc(27,Z,78,31,"ion-row",12),M.Lb()),2&t&&(M.xb(14),M.Zb("ngIf",!n.views.filter),M.xb(1),M.Zb("ngIf",n.views.filter),M.xb(11),M.Zb("ngIf",n.views.filter),M.xb(1),M.Zb("ngIf",n.reports))},directives:[s.r,s.P,s.N,s.f,s.e,s.s,s.K,s.o,s.E,s.n,i.i,s.g,s.h,s.v,s.w,s.p,s.X,o.e,o.f,s.i,i.h,L.a],styles:[".max-height-250[_ngcontent-%COMP%]{max-height:260px!important;overflow-y:auto}.max-height-450[_ngcontent-%COMP%]{max-height:450px!important;overflow-y:auto}.bigNumber[_ngcontent-%COMP%]{font-size:1.5em!important}.bigIcon[_ngcontent-%COMP%]{font-size:3em!important}.textTotals[_ngcontent-%COMP%]{font-size:1.1em!important;font-weight:700}"]}),t})()},{path:"detalles-consolidado",loadChildren:()=>e.e(37).then(e.bind(null,"r0o7")).then(t=>t.DetallesConsolidadoPageModule)},{path:"registrar-visita",loadChildren:()=>Promise.all([e.e(0),e.e(39)]).then(e.bind(null,"9smr")).then(t=>t.RegistrarVisitaPageModule)},{path:"miembros-consolidados",loadChildren:()=>Promise.all([e.e(0),e.e(38)]).then(e.bind(null,"SScQ")).then(t=>t.MiembrosConsolidadosPageModule)}];let K=(()=>{class t{}return t.\u0275mod=M.Hb({type:t}),t.\u0275inj=M.Gb({factory:function(n){return new(n||t)},imports:[[r.j.forChild(P)],r.j]}),t})();var I=e("j1ZV");let k=(()=>{class t{}return t.\u0275mod=M.Hb({type:t}),t.\u0275inj=M.Gb({factory:function(n){return new(n||t)},imports:[[i.b,o.a,s.Q,K,I.a]]}),t})()},Wgwc:function(t,n,e){t.exports=function(){"use strict";var t="millisecond",n="second",e="minute",i="hour",o="day",s="week",r="month",a="quarter",b="year",c="date",l=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,u=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},f=function(t,n,e){var i=String(t);return!i||i.length>=n?t:""+Array(n+1-i.length).join(e)+t},h={s:f,z:function(t){var n=-t.utcOffset(),e=Math.abs(n),i=Math.floor(e/60),o=e%60;return(n<=0?"+":"-")+f(i,2,"0")+":"+f(o,2,"0")},m:function t(n,e){if(n.date()<e.date())return-t(e,n);var i=12*(e.year()-n.year())+(e.month()-n.month()),o=n.clone().add(i,r),s=e-o<0,a=n.clone().add(i+(s?-1:1),r);return+(-(i+(e-o)/(s?o-a:a-o))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(l){return{M:r,y:b,w:s,d:o,D:c,h:i,m:e,s:n,ms:t,Q:a}[l]||String(l||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},m="en",M={};M[m]=d;var g=function(t){return t instanceof w},p=function(t,n,e){var i;if(!t)return m;if("string"==typeof t)M[t]&&(i=t),n&&(M[t]=n,i=t);else{var o=t.name;M[o]=t,i=o}return!e&&i&&(m=i),i||!e&&m},L=function(t,n){if(g(t))return t.clone();var e="object"==typeof n?n:{};return e.date=t,e.args=arguments,new w(e)},v=h;v.l=p,v.i=g,v.w=function(t,n){return L(t,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})};var w=function(){function d(t){this.$L=p(t.locale,null,!0),this.parse(t)}var f=d.prototype;return f.parse=function(t){this.$d=function(t){var n=t.date,e=t.utc;if(null===n)return new Date(NaN);if(v.u(n))return new Date;if(n instanceof Date)return new Date(n);if("string"==typeof n&&!/Z$/i.test(n)){var i=n.match(l);if(i){var o=i[2]-1||0,s=(i[7]||"0").substring(0,3);return e?new Date(Date.UTC(i[1],o,i[3]||1,i[4]||0,i[5]||0,i[6]||0,s)):new Date(i[1],o,i[3]||1,i[4]||0,i[5]||0,i[6]||0,s)}}return new Date(n)}(t),this.$x=t.x||{},this.init()},f.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},f.$utils=function(){return v},f.isValid=function(){return!("Invalid Date"===this.$d.toString())},f.isSame=function(t,n){var e=L(t);return this.startOf(n)<=e&&e<=this.endOf(n)},f.isAfter=function(t,n){return L(t)<this.startOf(n)},f.isBefore=function(t,n){return this.endOf(n)<L(t)},f.$g=function(t,n,e){return v.u(t)?this[n]:this.set(e,t)},f.unix=function(){return Math.floor(this.valueOf()/1e3)},f.valueOf=function(){return this.$d.getTime()},f.startOf=function(t,a){var l=this,u=!!v.u(a)||a,d=v.p(t),f=function(t,n){var e=v.w(l.$u?Date.UTC(l.$y,n,t):new Date(l.$y,n,t),l);return u?e:e.endOf(o)},h=function(t,n){return v.w(l.toDate()[t].apply(l.toDate("s"),(u?[0,0,0,0]:[23,59,59,999]).slice(n)),l)},m=this.$W,M=this.$M,g=this.$D,p="set"+(this.$u?"UTC":"");switch(d){case b:return u?f(1,0):f(31,11);case r:return u?f(1,M):f(0,M+1);case s:var L=this.$locale().weekStart||0,w=(m<L?m+7:m)-L;return f(u?g-w:g+(6-w),M);case o:case c:return h(p+"Hours",0);case i:return h(p+"Minutes",1);case e:return h(p+"Seconds",2);case n:return h(p+"Milliseconds",3);default:return this.clone()}},f.endOf=function(t){return this.startOf(t,!1)},f.$set=function(s,a){var l,u=v.p(s),d="set"+(this.$u?"UTC":""),f=(l={},l[o]=d+"Date",l[c]=d+"Date",l[r]=d+"Month",l[b]=d+"FullYear",l[i]=d+"Hours",l[e]=d+"Minutes",l[n]=d+"Seconds",l[t]=d+"Milliseconds",l)[u],h=u===o?this.$D+(a-this.$W):a;if(u===r||u===b){var m=this.clone().set(c,1);m.$d[f](h),m.init(),this.$d=m.set(c,Math.min(this.$D,m.daysInMonth())).$d}else f&&this.$d[f](h);return this.init(),this},f.set=function(t,n){return this.clone().$set(t,n)},f.get=function(t){return this[v.p(t)]()},f.add=function(t,a){var c,l=this;t=Number(t);var u=v.p(a),d=function(n){var e=L(l);return v.w(e.date(e.date()+Math.round(n*t)),l)};if(u===r)return this.set(r,this.$M+t);if(u===b)return this.set(b,this.$y+t);if(u===o)return d(1);if(u===s)return d(7);var f=(c={},c[e]=6e4,c[i]=36e5,c[n]=1e3,c)[u]||1,h=this.$d.getTime()+t*f;return v.w(h,this)},f.subtract=function(t,n){return this.add(-1*t,n)},f.format=function(t){var n=this;if(!this.isValid())return"Invalid Date";var e=t||"YYYY-MM-DDTHH:mm:ssZ",i=v.z(this),o=this.$locale(),s=this.$H,r=this.$m,a=this.$M,b=o.weekdays,c=o.months,l=function(t,i,o,s){return t&&(t[i]||t(n,e))||o[i].substr(0,s)},d=function(t){return v.s(s%12||12,t,"0")},f=o.meridiem||function(t,n,e){var i=t<12?"AM":"PM";return e?i.toLowerCase():i},h={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:v.s(a+1,2,"0"),MMM:l(o.monthsShort,a,c,3),MMMM:l(c,a),D:this.$D,DD:v.s(this.$D,2,"0"),d:String(this.$W),dd:l(o.weekdaysMin,this.$W,b,2),ddd:l(o.weekdaysShort,this.$W,b,3),dddd:b[this.$W],H:String(s),HH:v.s(s,2,"0"),h:d(1),hh:d(2),a:f(s,r,!0),A:f(s,r,!1),m:String(r),mm:v.s(r,2,"0"),s:String(this.$s),ss:v.s(this.$s,2,"0"),SSS:v.s(this.$ms,3,"0"),Z:i};return e.replace(u,function(t,n){return n||h[t]||i.replace(":","")})},f.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},f.diff=function(t,c,l){var u,d=v.p(c),f=L(t),h=6e4*(f.utcOffset()-this.utcOffset()),m=this-f,M=v.m(this,f);return M=(u={},u[b]=M/12,u[r]=M,u[a]=M/3,u[s]=(m-h)/6048e5,u[o]=(m-h)/864e5,u[i]=m/36e5,u[e]=m/6e4,u[n]=m/1e3,u)[d]||m,l?M:v.a(M)},f.daysInMonth=function(){return this.endOf(r).$D},f.$locale=function(){return M[this.$L]},f.locale=function(t,n){if(!t)return this.$L;var e=this.clone(),i=p(t,n,!0);return i&&(e.$L=i),e},f.clone=function(){return v.w(this.$d,this)},f.toDate=function(){return new Date(this.valueOf())},f.toJSON=function(){return this.isValid()?this.toISOString():null},f.toISOString=function(){return this.$d.toISOString()},f.toString=function(){return this.$d.toUTCString()},d}(),x=w.prototype;return L.prototype=x,[["$ms",t],["$s",n],["$m",e],["$H",i],["$W",o],["$M",r],["$y",b],["$D",c]].forEach(function(t){x[t[1]]=function(n){return this.$g(n,t[0],t[1])}}),L.extend=function(t,n){return t.$i||(t(n,w,L),t.$i=!0),L},L.locale=p,L.isDayjs=g,L.unix=function(t){return L(1e3*t)},L.en=M[m],L.Ls=M,L.p={},L}()},l2JI:function(t,n,e){"use strict";e.d(n,"a",function(){return a});var i=e("mrSG"),o=e("fXoL"),s=e("1Ldg"),r=e("4WDQ");let a=(()=>{class t{constructor(t,n){this.axios=t,this.globalSer=n}getConsolidatesReport(t={}){return Object(i.a)(this,void 0,void 0,function*(){const n=yield this.axios.getData("/admin/consolidates",t);return n&&n.success?n.data.data||null:this.globalSer.altResponse(n)})}saveConsolidateReport(t={}){return Object(i.a)(this,void 0,void 0,function*(){const n=yield this.axios.postData("/admin/consolidates/report",t);return n&&n.success?n.data.msg:this.globalSer.altResponse(n)})}getConsolidatesMembers(){return Object(i.a)(this,void 0,void 0,function*(){const t=yield this.axios.getData("/admin/consolidates/members");return t&&t.success?t.data.members:this.globalSer.altResponse(t)})}}return t.\u0275fac=function(n){return new(n||t)(o.Qb(s.a),o.Qb(r.a))},t.\u0275prov=o.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);