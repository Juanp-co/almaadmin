{"version":3,"sources":["./src/app/views/documentos/subir/subir.page.html","./src/app/views/documentos/subir/subir.page.scss","./src/app/views/documentos/subir/subir-routing.module.ts","./src/app/views/documentos/subir/subir.page.ts","./src/app/views/documentos/subir/subir.module.ts"],"names":[],"mappings":"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","file":"subir-subir-module.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-button (click)=\\\"goBack()\\\">\\r\\n        <ion-icon name=\\\"arrow-back-outline\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>Subir documento</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n\\r\\n  <ion-card>\\r\\n    <ion-card-content>\\r\\n      <ion-row>\\r\\n        <ion-col size=\\\"12\\\" sizeSm=\\\"4\\\" class=\\\"ion-text-center ion-margin-top\\\">\\r\\n          <div class=\\\"\\\">\\r\\n            <label class=\\\"micursor ion-text-center\\\">\\r\\n              <div\\r\\n                class=\\\"img-upload\\\"\\r\\n                [ngStyle]=\\\"{backgroundImage: 'url('+ (formData.file ? '/assets/icon/pdf.svg' : '/assets/icon/pdf-upload.svg') +')', height: '130px'}\\\"\\r\\n              >\\r\\n                <input type='file' accept=\\\"application/pdf\\\" (change)='openFile($event)' hidden>\\r\\n              </div>\\r\\n            </label>\\r\\n            <br>\\r\\n            <ion-text color=\\\"medium\\\" class=\\\"toSmall\\\"><i>Clic para subir un documento una imagen</i></ion-text>\\r\\n            <ion-text color=\\\"medium\\\" *ngIf=\\\"formData.file\\\">\\r\\n              <br>\\r\\n              <br>\\r\\n              Archivo: {{ formData.fileName }}\\r\\n            </ion-text>\\r\\n          </div>\\r\\n        </ion-col>\\r\\n        <ion-col size=\\\"12\\\" sizeSm=\\\"8\\\">\\r\\n          <ion-row>\\r\\n            <ion-col size=\\\"12\\\" sizeSm=\\\"6\\\">\\r\\n              <ion-item>\\r\\n                <ion-label position=\\\"floating\\\" color=\\\"medium\\\">Título del documento (*)</ion-label>\\r\\n                <ion-input\\r\\n                  [value]=\\\"formData.title\\\"\\r\\n                  autocomplete=\\\"off\\\"\\r\\n                  maxlength=\\\"100\\\"\\r\\n                  class=\\\"ion-text-uppercase\\\"\\r\\n                  (change)=\\\"setFormData('title', $event)\\\"\\r\\n                >\\r\\n                </ion-input>\\r\\n              </ion-item>\\r\\n            </ion-col>\\r\\n            <ion-col size=\\\"12\\\" sizeSm=\\\"6\\\">\\r\\n              <ion-item>\\r\\n                <ion-label position=\\\"floating\\\" color=\\\"medium\\\">Dirigido a (*)</ion-label>\\r\\n                <ion-input\\r\\n                  [value]=\\\"formData.rolesSelected\\\"\\r\\n                  [readonly]=\\\"true\\\"\\r\\n                  autocomplete=\\\"off\\\"\\r\\n                  class=\\\"ion-text-uppercase no-selected-text\\\"\\r\\n                  (click)=\\\"showAlertRolesList()\\\"\\r\\n                >\\r\\n                </ion-input>\\r\\n              </ion-item>\\r\\n            </ion-col>\\r\\n            <ion-col size=\\\"12\\\" class=\\\"ion-margin\\\">\\r\\n              <ion-text color=\\\"medium\\\" class=\\\"toSmall\\\"><i>(*) Campos obligatorios.</i></ion-text>\\r\\n            </ion-col>\\r\\n            <ion-col size=\\\"12\\\" class=\\\"ion-margin-top\\\">\\r\\n              <ion-row>\\r\\n                <ion-col size=\\\"6\\\" class=\\\"ion-text-center\\\">\\r\\n                  <ion-button color=\\\"light\\\" (click)=\\\"goBack()\\\">\\r\\n                    <ion-icon name=\\\"close\\\" slot=\\\"start\\\"></ion-icon>\\r\\n                    <ion-text>\\r\\n                      Cancelar\\r\\n                    </ion-text>\\r\\n                  </ion-button>\\r\\n                </ion-col>\\r\\n                <ion-col size=\\\"6\\\" class=\\\"ion-text-center\\\">\\r\\n                  <ion-button (click)=\\\"validate()\\\">\\r\\n                    <ion-icon name=\\\"save-outline\\\" slot=\\\"start\\\"></ion-icon>\\r\\n                    <ion-text>\\r\\n                      Guardar\\r\\n                    </ion-text>\\r\\n                  </ion-button>\\r\\n                </ion-col>\\r\\n              </ion-row>\\r\\n            </ion-col>\\r\\n          </ion-row>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n    </ion-card-content>\\r\\n  </ion-card>\\r\\n\\r\\n</ion-content>\\r\\n\";","export default \".img-upload {\\n  border-radius: 5px 5px 0 0;\\n  background-size: contain !important;\\n  background-repeat: no-repeat;\\n  background-position: center !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uXFwuLlxcLi5cXC4uXFwuLlxcc3ViaXIucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsMEJBQUE7RUFDQSxtQ0FBQTtFQUNBLDRCQUFBO0VBQ0Esc0NBQUE7QUFDRiIsImZpbGUiOiJzdWJpci5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuaW1nLXVwbG9hZCB7XHJcbiAgYm9yZGVyLXJhZGl1czogNXB4IDVweCAwIDA7XHJcbiAgYmFja2dyb3VuZC1zaXplOiBjb250YWluICFpbXBvcnRhbnQ7XHJcbiAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcclxuICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXIgIWltcG9ydGFudDtcclxufVxyXG4iXX0= */\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { SubirPage } from './subir.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: SubirPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class SubirPageRoutingModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {NavController} from '@ionic/angular';\r\nimport {DocumentosService} from '../documentos.service';\r\nimport {DataService} from '../../../services/data.service';\r\nimport {GlobalService} from '../../../services/global.service';\r\n\r\n@Component({\r\n  selector: 'app-subir',\r\n  templateUrl: './subir.page.html',\r\n  styleUrls: ['./subir.page.scss'],\r\n})\r\nexport class SubirPage implements OnInit {\r\n\r\n  formData: any = {\r\n    title: '',\r\n    file: null,\r\n    fileName: null,\r\n    rolesList: [],\r\n    rolesSelected: ''\r\n  };\r\n  roles = [\r\n    'Administradores',\r\n    'Pastores',\r\n    'Supervisores',\r\n    'Líderes'\r\n  ];\r\n\r\n  constructor(\r\n    private dataService: DataService,\r\n    private documentosService: DocumentosService,\r\n    private globalSer: GlobalService,\r\n    private navCtrl: NavController\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  async saveDocument() {\r\n    await this.globalSer.presentLoading();\r\n    const data: any = await this.documentosService.saveResources(this.formData);\r\n\r\n    if (data && !data.error) {\r\n      await this.globalSer.dismissLoading();\r\n      await this.globalSer.presentAlert('¡Éxito!', 'Se ha compartido el documento exitosamente.');\r\n      this.goBack();\r\n    }\r\n    else if (data && data.error) {\r\n      await this.globalSer.dismissLoading();\r\n      await this.globalSer.errorSession();\r\n    }\r\n    else await this.globalSer.dismissLoading();\r\n  }\r\n\r\n  async goBack() {\r\n    await this.navCtrl.back();\r\n  }\r\n\r\n  openFile(event) {\r\n    if (typeof event.target?.files[0] !== 'object') return;\r\n    else {\r\n      const fileToLoad = event.target.files[0];\r\n      const fileReader = new FileReader();\r\n      fileReader.onload = (fileLoadedEvent) => {\r\n        this.formData.file = fileLoadedEvent.target.result;\r\n        this.formData.fileName = fileToLoad.name;\r\n      };\r\n      // Convert data to base64\r\n      fileReader.readAsDataURL(fileToLoad);\r\n    }\r\n  }\r\n\r\n  setFormData(input: string, ev: any) {\r\n    this.formData[input] = ev.target.value || null;\r\n  }\r\n\r\n  getRoles(rolesList: number[]): string {\r\n    let ret = '';\r\n    if (rolesList.length === 4) ret = 'Todos';\r\n    else if (rolesList.length > 0) {\r\n      for (const v of rolesList) {\r\n        if (ret === '') ret = this.roles[v];\r\n        else ret += `, ${this.roles[v]}`;\r\n      }\r\n    }\r\n\r\n    return ret;\r\n  }\r\n\r\n  async showAlertRolesList() {\r\n    const inputs: any[] = [];\r\n\r\n    for (const [index, value] of this.roles.entries()) {\r\n      inputs.push({\r\n        name: `roles`,\r\n        type: 'checkbox',\r\n        label: value,\r\n        value: index,\r\n        checked: this.formData.rolesList.includes(index),\r\n      });\r\n    }\r\n    await this.globalSer.alertWithList({\r\n      header: 'Seleccione',\r\n      inputs,\r\n      confirmAction: (selectedValue) => {\r\n        this.formData.rolesList = selectedValue;\r\n        this.formData.rolesSelected = this.getRoles(selectedValue);\r\n      }\r\n    });\r\n  }\r\n\r\n  async validate() {\r\n    let msg: string | null = null;\r\n\r\n    if (!this.formData.file) msg = 'Disculpe, pero debe cargar el archivo PDF a compartir.';\r\n    else if (this.formData.title.length < 4) msg = 'Disculpe, pero debe indicar un título al archivo que va a compartir.';\r\n    else if (this.formData.rolesList.length === 0)\r\n      msg = 'Disculpe, pero debe indicar a que tipos de usuario se le compartirá el documento.';\r\n\r\n    if (msg) this.globalSer.presentAlert('¡Error!', msg || 'Disculpe, pero debe completar el formulario.');\r\n    else this.confirmAction();\r\n  }\r\n\r\n  async confirmAction() {\r\n    await this.globalSer.alertConfirm({\r\n      header: '¡Confirme!',\r\n      message: '¿Está seguro qué desea subir este documento?',\r\n      confirmAction: () => this.saveDocument()\r\n    });\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { SubirPageRoutingModule } from './subir-routing.module';\r\n\r\nimport { SubirPage } from './subir.page';\r\nimport {ComponentsModule} from '../../../components/components.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    SubirPageRoutingModule,\r\n    ComponentsModule\r\n  ],\r\n  declarations: [SubirPage]\r\n})\r\nexport class SubirPageModule {}\r\n"],"sourceRoot":"webpack:///"}