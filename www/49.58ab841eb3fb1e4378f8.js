(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{"3V3w":function(e,o,i){"use strict";i.r(o),i.d(o,"RegistroPageModule",function(){return W});var t=i("ofXK"),n=i("3Pt+"),a=i("TEn/"),r=i("tyNb"),l=i("mrSG"),b=i("Wgwc"),c=i.n(b),s=i("FA8q"),d=i("Hx5O"),u=i("OmbT"),m=i("fXoL"),f=i("1Ldg"),p=i("QTu/"),h=i("4WDQ"),g=i("iN9u"),M=i("wJOZ");function L(e,o){if(1&e){const e=m.Nb();m.Mb(0,"ion-col",8),m.Mb(1,"ion-item"),m.Mb(2,"ion-label",9),m.pc(3,"Seleccione un grupo familiar (*)"),m.Lb(),m.Mb(4,"ion-input",15),m.Ub("click",function(){return m.ic(e),m.Wb(2).modalGroups()}),m.Lb(),m.Lb(),m.Lb()}if(2&e){const e=m.Wb(2);m.xb(4),m.Zb("readonly",!0)("value",e.getGroupLabel())}}function D(e,o){if(1&e){const e=m.Nb();m.Mb(0,"ion-col",8),m.Mb(1,"ion-item"),m.Mb(2,"ion-label",9),m.pc(3,"Petici\xf3n (opcional)"),m.Lb(),m.Mb(4,"ion-input",13),m.Ub("ngModelChange",function(o){return m.ic(e),m.Wb(3).formData.petition=o}),m.Lb(),m.Lb(),m.Lb()}if(2&e){const e=m.Wb(3);m.xb(4),m.Zb("ngModel",e.formData.petition)}}function v(e,o){if(1&e){const e=m.Nb();m.Mb(0,"ion-col",8),m.Mb(1,"ion-item"),m.Mb(2,"ion-label",9),m.pc(3,"Seleccione un miembro (*)"),m.Lb(),m.Mb(4,"ion-input",15),m.Ub("click",function(){return m.ic(e),m.Wb(3).modalMember()}),m.Lb(),m.Lb(),m.Lb()}if(2&e){const e=m.Wb(3);m.xb(4),m.Zb("readonly",!0)("value",e.getReferredNames())}}function x(e,o){if(1&e){const e=m.Nb();m.Mb(0,"ion-col",5),m.Mb(1,"ion-row"),m.nc(2,D,5,1,"ion-col",20),m.Mb(3,"ion-col",8),m.Mb(4,"ion-item",18),m.Mb(5,"ion-label",6),m.pc(6,"Soy el consolidador"),m.Lb(),m.Mb(7,"ion-checkbox",19),m.Ub("ionChange",function(){return m.ic(e),m.Wb(2).setCheckedValue("iAmConsolidator")}),m.Lb(),m.Lb(),m.Lb(),m.nc(8,v,5,2,"ion-col",20),m.Lb(),m.Lb()}if(2&e){const e=m.Wb(2);m.xb(2),m.Zb("ngIf",e.formData.consolidated),m.xb(5),m.Zb("checked",e.formData.iAmConsolidator),m.xb(1),m.Zb("ngIf",e.formData.consolidated&&!e.formData.iAmConsolidator)}}function y(e,o){if(1&e){const e=m.Nb();m.Mb(0,"ion-col",4),m.Mb(1,"ion-card"),m.Mb(2,"ion-card-content"),m.Mb(3,"ion-row"),m.Mb(4,"ion-col",5),m.Mb(5,"ion-text",6),m.Mb(6,"p"),m.Kb(7,"ion-icon",7),m.pc(8," Todos los miembros registrados dispondr\xe1n de la siguiente contrase\xf1a para el acceso: "),m.Mb(9,"b"),m.Mb(10,"i"),m.pc(11,"alma1234"),m.Lb(),m.Lb(),m.pc(12,". Estos podr\xe1n cambiarla (si lo desean) desde la Aplicaci\xf3n M\xf3vil o desde el Panel Administrador (en caso disponga del rol). "),m.Lb(),m.Lb(),m.Lb(),m.Mb(13,"ion-col",8),m.Mb(14,"ion-item"),m.Mb(15,"ion-label",9),m.pc(16,"N\xba de Tel\xe9fono (*)"),m.Lb(),m.Mb(17,"ion-input",10),m.Ub("ngModelChange",function(o){return m.ic(e),m.Wb().formData.phone=o})("keypress",function(o){return m.ic(e),m.Wb().validateOnlyNumbers(o)}),m.Lb(),m.Lb(),m.Mb(18,"ion-text",6),m.Mb(19,"i",11),m.pc(20,"El valor de este campo ser\xe1 el usuario para el acceso a la plataforma."),m.Lb(),m.Lb(),m.Lb(),m.Mb(21,"ion-col",8),m.Mb(22,"ion-item"),m.Mb(23,"ion-label",9),m.pc(24,"Nombre(s) (*)"),m.Lb(),m.Mb(25,"ion-input",12),m.Ub("ngModelChange",function(o){return m.ic(e),m.Wb().formData.names=o})("keyup",function(o){return m.ic(e),m.Wb().validateOnlyLetters(o)}),m.Lb(),m.Lb(),m.Lb(),m.Mb(26,"ion-col",8),m.Mb(27,"ion-item"),m.Mb(28,"ion-label",9),m.pc(29,"Apellido(s) (*)"),m.Lb(),m.Mb(30,"ion-input",12),m.Ub("ngModelChange",function(o){return m.ic(e),m.Wb().formData.lastNames=o})("keyup",function(o){return m.ic(e),m.Wb().validateOnlyLetters(o)}),m.Lb(),m.Lb(),m.Lb(),m.Mb(31,"ion-col",8),m.Mb(32,"ion-item"),m.Mb(33,"ion-label",9),m.pc(34,"Correo electr\xf3nico"),m.Lb(),m.Mb(35,"ion-input",13),m.Ub("ngModelChange",function(o){return m.ic(e),m.Wb().formData.email=o}),m.Lb(),m.Lb(),m.Lb(),m.Mb(36,"ion-col",8),m.Mb(37,"ion-item"),m.Mb(38,"ion-label",9),m.pc(39,"Fecha de nacimiento (*)"),m.Lb(),m.Mb(40,"ion-datetime",14),m.Ub("ngModelChange",function(o){return m.ic(e),m.Wb().formData.birthday=o})("ionChange",function(){return m.ic(e),m.Wb().setDate()}),m.Lb(),m.Lb(),m.Lb(),m.Mb(41,"ion-col",8),m.Mb(42,"ion-item"),m.Mb(43,"ion-label",9),m.pc(44,"Sexo (*)"),m.Lb(),m.Mb(45,"ion-input",15),m.Ub("click",function(){m.ic(e);const o=m.Wb();return o.showAlertList("gender","gender",o.formData.gender)}),m.Lb(),m.Lb(),m.Lb(),m.Mb(46,"ion-col",8),m.Mb(47,"ion-item"),m.Mb(48,"ion-label",9),m.pc(49,"Estado civil"),m.Lb(),m.Mb(50,"ion-input",15),m.Ub("click",function(){m.ic(e);const o=m.Wb();return o.showAlertList("civilStatus","civilStatus",o.formData.civilStatus)}),m.Lb(),m.Lb(),m.Lb(),m.Mb(51,"ion-col",8),m.Mb(52,"ion-item"),m.Mb(53,"ion-label",9),m.pc(54,"Barrio o localidad"),m.Lb(),m.Mb(55,"ion-input",16),m.Ub("ngModelChange",function(o){return m.ic(e),m.Wb().formData.locality=o}),m.Lb(),m.Lb(),m.Lb(),m.Mb(56,"ion-col",8),m.Mb(57,"ion-item"),m.Mb(58,"ion-label",9),m.pc(59,"Direcci\xf3n"),m.Lb(),m.Mb(60,"ion-input",17),m.Ub("ngModelChange",function(o){return m.ic(e),m.Wb().formData.direction=o}),m.Lb(),m.Lb(),m.Lb(),m.Mb(61,"ion-col",5),m.pc(62,"\xa0"),m.Lb(),m.Mb(63,"ion-col",8),m.Mb(64,"ion-item",18),m.Mb(65,"ion-label",6),m.pc(66,"\xbfAsiste a un grupo familiar?"),m.Lb(),m.Mb(67,"ion-checkbox",19),m.Ub("ionChange",function(){return m.ic(e),m.Wb().setCheckedValue("attendGroup")}),m.Lb(),m.Lb(),m.Lb(),m.nc(68,L,5,2,"ion-col",20),m.Kb(69,"ion-col",5),m.Mb(70,"ion-col",8),m.Mb(71,"ion-item",18),m.Mb(72,"ion-label",6),m.pc(73,"El miembro fue consolidado"),m.Lb(),m.Mb(74,"ion-checkbox",19),m.Ub("ionChange",function(){return m.ic(e),m.Wb().setCheckedValue("consolidated")}),m.Lb(),m.Lb(),m.Lb(),m.nc(75,x,9,3,"ion-col",21),m.Mb(76,"ion-col",22),m.Mb(77,"ion-text",6),m.Mb(78,"i",11),m.pc(79,"(*) Campos requeridos."),m.Lb(),m.Lb(),m.Lb(),m.Mb(80,"ion-col",23),m.Mb(81,"ion-button",24),m.Ub("click",function(){return m.ic(e),m.Wb().confirmCancel()}),m.Kb(82,"ion-icon",25),m.pc(83,"\xa0 "),m.Mb(84,"ion-text"),m.pc(85,"Cancelar"),m.Lb(),m.Lb(),m.Mb(86,"ion-button",26),m.Ub("click",function(){return m.ic(e),m.Wb().confirmRegister()}),m.Kb(87,"ion-icon",27),m.pc(88,"\xa0 "),m.Mb(89,"ion-text"),m.pc(90,"Guardar"),m.Lb(),m.Lb(),m.Lb(),m.Lb(),m.Lb(),m.Lb(),m.Lb()}if(2&e){const e=m.Wb();m.xb(17),m.Zb("ngModel",e.formData.phone),m.xb(8),m.Zb("ngModel",e.formData.names),m.xb(5),m.Zb("ngModel",e.formData.lastNames),m.xb(5),m.Zb("ngModel",e.formData.email),m.xb(5),m.ac("max",e.maxDate),m.Zb("ngModel",e.formData.birthday),m.xb(5),m.Zb("readonly",!0)("value",e.gender[e.formData.gender]||""),m.xb(5),m.Zb("readonly",!0)("value",e.civilStatus[e.formData.civilStatus]||""),m.xb(5),m.Zb("ngModel",e.formData.locality),m.xb(5),m.Zb("ngModel",e.formData.direction),m.xb(7),m.Zb("checked",e.formData.attendGroup),m.xb(1),m.Zb("ngIf",e.formData.attendGroup),m.xb(6),m.Zb("checked",e.formData.consolidated),m.xb(1),m.Zb("ngIf",e.formData.consolidated)}}function C(e,o){if(1&e){const e=m.Nb();m.Mb(0,"ion-col",4),m.Mb(1,"ion-card"),m.Mb(2,"ion-card-content"),m.Mb(3,"ion-row"),m.Mb(4,"ion-col",28),m.Kb(5,"ion-img",29),m.Mb(6,"ion-card-title",30),m.pc(7),m.Lb(),m.Lb(),m.Mb(8,"ion-col",23),m.Mb(9,"ion-button",26),m.Ub("click",function(){return m.ic(e),m.Wb().back()}),m.Kb(10,"ion-icon",31),m.pc(11,"\xa0 "),m.Mb(12,"ion-text"),m.pc(13,"Regresar al listado de miembros"),m.Lb(),m.Lb(),m.Lb(),m.Lb(),m.Lb(),m.Lb(),m.Lb()}if(2&e){const e=m.Wb();m.xb(4),m.Zb("size",12),m.xb(1),m.Zb("src","/assets/icon/check.svg"),m.xb(2),m.qc(e.successData.msg)}}const k=[{path:"",component:(()=>{class e{constructor(e,o,i,t,n,a,r){this.axios=e,this.cookiesService=o,this.globalSer=i,this.navCtrl=t,this.detallesMiembroService=n,this.miembrosService=a,this.router=r,this.civilStatus=[],this.gender=[],this.myId=null,this.successRegister=!1,this.successData=null,this.referralData=null,this.groupData=null,this.maxDate=null,this.formData={phone:null,names:null,lastNames:null,email:null,birthday:null,civilStatus:null,gender:null,locality:null,direction:null,petition:null,attendGroup:!1,groupId:null,roles:[5],referred:null,consolidated:!1,iAmConsolidator:!0},this.maxDate=c()().format("YYYY-MM-DD")}ngOnInit(){return Object(l.a)(this,void 0,void 0,function*(){const e=yield this.cookiesService.getCookie("data");e&&(this.myId=e._id),this.globalSer.checkSession()?this.globalSer.checkRoleToEnableAddOrUpdate()?(this.civilStatus=this.detallesMiembroService.civilStatusList,this.gender=this.detallesMiembroService.genderList):(yield this.globalSer.presentAlert("Alerta","Disculpe, pero no cuenta con privilegios para registrar nuevos miembros."),yield this.navCtrl.back()):yield this.router.navigate(["/ingresar"])})}registerMember(){return Object(l.a)(this,void 0,void 0,function*(){yield this.globalSer.presentLoading("Registrando, por favor espere ...");const e=Object.assign({},this.formData);e.iAmConsolidator&&(e.referred=this.myId);const o=yield this.miembrosService.registerUser(e);o&&!o.error?(this.successData=o,this.successRegister=!0,yield this.globalSer.dismissLoading()):o&&o.error?(yield this.globalSer.dismissLoading(),yield this.globalSer.errorSession()):yield this.globalSer.dismissLoading()})}back(){return Object(l.a)(this,void 0,void 0,function*(){yield this.navCtrl.back()})}setCheckedValue(e){this.formData[e]=!this.formData[e],"attendGroup"!==e||this.formData.attendGroup||(this.formData.groupId=null,this.groupData=null),"consolidated"!==e||this.formData.consolidated||(this.formData.iAmConsolidator=!0,this.formData.petition=null,this.formData.referred=null,this.referralData=null),"iAmConsolidator"!==e||this.formData.iAmConsolidator||(this.formData.referred=null,this.referralData=null)}getReferredNames(){return this.referralData?`${this.referralData.names} ${this.referralData.lastNames}`:null}getGroupLabel(){return this.groupData?`Sector: ${this.groupData.sector} / Sub-sector: ${this.groupData.subSector} / Grupo #: ${this.groupData.number}`:null}setDate(){this.formData.birthday&&(this.formData.birthday=c()(this.formData.birthday).format("YYYY-MM-DD"))}validateOnlyNumbers(e){Object(u.p)(e)}validateOnlyLetters(e){Object(u.o)(e)}showAlertList(e,o,i=null){return Object(l.a)(this,void 0,void 0,function*(){const t=[];for(const[e,n]of this[o].entries())t.push({name:"value-"+e,type:"radio",label:n,value:e,checked:null!==i&&i.toString()===e.toString()});yield this.globalSer.alertWithList({header:"Seleccione",inputs:t,confirmAction:o=>{this.formData[e]=o}})})}confirmCancel(){return Object(l.a)(this,void 0,void 0,function*(){yield this.globalSer.alertConfirm({header:"Confirme",message:"\xbfEst\xe1 seguro qu\xe9 desea cancelar el registro?",confirmAction:()=>this.back()})})}modalMember(){return Object(l.a)(this,void 0,void 0,function*(){yield this.globalSer.loadModal(s.a,{selectedId:this.formData.referred},!1,e=>{this.referralData=e||null,this.formData.referred=e?e._id:null})})}modalGroups(){return Object(l.a)(this,void 0,void 0,function*(){yield this.globalSer.loadModal(d.a,{selectedId:this.formData.groupId},!1,e=>{this.groupData=e||null,this.formData.groupId=e?e._id:null})})}validateData(){return Object(u.j)(this.formData.phone)?Object(u.h)(this.formData.names)?Object(u.h)(this.formData.lastNames)?!this.formData.consolidated||this.formData.iAmConsolidator||this.formData.referred?this.formData.attendGroup&&!this.formData.groupId?"Disculpe, pero debe seleccionar un grupo familiar.":null:"Disculpe, pero debe seleccionar un miembro consolidador.":"Disculpe, pero debe indicar un apellido v\xe1lido.":"Disculpe, pero debe indicar un nombre v\xe1lido.":"Disculpe, pero debe indicar un n\xfamero de tel\xe9fono v\xe1lido."}confirmRegister(){return Object(l.a)(this,void 0,void 0,function*(){const e=this.validateData();e?yield this.globalSer.presentAlert("Alerta",e||"Disculpe, pero debe completar el formulario."):yield this.globalSer.alertConfirm({header:"Confirme",message:"\xbfEst\xe1 seguro qu\xe9 desea registar a este nuevo miembro?",confirmAction:()=>this.registerMember()})})}}return e.\u0275fac=function(o){return new(o||e)(m.Jb(f.a),m.Jb(p.a),m.Jb(h.a),m.Jb(a.T),m.Jb(g.a),m.Jb(M.a),m.Jb(r.g))},e.\u0275cmp=m.Db({type:e,selectors:[["app-registro"]],decls:11,vars:2,consts:[["slot","start"],[3,"click"],["name","arrow-back-outline"],["class","ion-no-margin","size","12",4,"ngIf"],["size","12",1,"ion-no-margin"],["size","12"],["color","medium"],["name","alert-circle-outline"],["size","12","size-sm","6"],["position","floating","color","medium"],["autocomplete","off","maxlength","13",1,"ion-text-uppercase",3,"ngModel","ngModelChange","keypress"],[1,"toSmall"],["autocomplete","off",1,"ion-text-uppercase",3,"ngModel","ngModelChange","keyup"],["autocomplete","off",1,"ion-text-uppercase",3,"ngModel","ngModelChange"],["displayFormat","DD/MM/YYYY","min","1910-03-14","doneText","Listo","cancelText","Cancelar",3,"ngModel","max","ngModelChange","ionChange"],["autocomplete","off",1,"no-selected-text",3,"readonly","value","click"],["autocomplete","off","maxlength","100",1,"ion-text-uppercase",3,"ngModel","ngModelChange"],["autocomplete","off","maxlength","250",1,"ion-text-uppercase",3,"ngModel","ngModelChange"],["lines","none"],["slot","start",3,"checked","ionChange"],["size","12","size-sm","6",4,"ngIf"],["size","12",4,"ngIf"],["size","12",1,"ion-margin-top"],["size","12","size-sm","12",1,"ion-margin-top","ion-padding-top","ion-padding-bottom","ion-margin-bottom","ion-text-center"],["color","medium",3,"click"],["name","close-outline"],["color","primary",3,"click"],["name","save-outline"],[1,"ion-text-center",3,"size"],[1,"pictureLogo2",3,"src"],[1,"ion-margin-top"],["name","chevron-back-outline","slot","start"]],template:function(e,o){1&e&&(m.Mb(0,"ion-header"),m.Mb(1,"ion-toolbar"),m.Mb(2,"ion-buttons",0),m.Mb(3,"ion-button",1),m.Ub("click",function(){return o.back()}),m.Kb(4,"ion-icon",2),m.Lb(),m.Lb(),m.Mb(5,"ion-title"),m.pc(6,"Registrar miembro"),m.Lb(),m.Lb(),m.Lb(),m.Mb(7,"ion-content"),m.Mb(8,"ion-row"),m.nc(9,y,91,16,"ion-col",3),m.nc(10,C,14,3,"ion-col",3),m.Lb(),m.Lb()),2&e&&(m.xb(9),m.Zb("ngIf",!o.successRegister),m.xb(1),m.Zb("ngIf",o.successRegister&&o.successData))},directives:[a.r,a.O,a.f,a.e,a.s,a.M,a.o,a.E,t.i,a.n,a.g,a.h,a.J,a.v,a.w,a.u,a.X,n.b,n.e,n.f,a.p,a.W,a.l,a.b,a.t,a.k],styles:[".password-text[_ngcontent-%COMP%]{font-size:2em!important;font-weight:700}"]}),e})()}];let S=(()=>{class e{}return e.\u0275mod=m.Hb({type:e}),e.\u0275inj=m.Gb({factory:function(o){return new(o||e)},imports:[[r.j.forChild(k)],r.j]}),e})(),W=(()=>{class e{}return e.\u0275mod=m.Hb({type:e}),e.\u0275inj=m.Gb({factory:function(o){return new(o||e)},imports:[[t.b,n.a,a.P,S]]}),e})()}}]);