{"version":3,"sources":["./src/app/views/iglesias/detalles/detalles.module.ts","./src/app/views/iglesias/detalles/detalles.page.ts","./src/app/views/iglesias/detalles/detalles.page.scss","./src/app/views/iglesias/detalles/detalles.page.html","./src/app/views/iglesias/detalles/detalles-routing.module.ts"],"names":[],"mappings":"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","file":"detalles-detalles-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DetallesPageRoutingModule } from './detalles-routing.module';\n\nimport { DetallesPage } from './detalles.page';\nimport {ComponentsModule} from '../../../components/components.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    DetallesPageRoutingModule,\n    ComponentsModule\n  ],\n  declarations: [DetallesPage]\n})\nexport class DetallesPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport {NavController} from '@ionic/angular';\nimport {GlobalService} from '../../../services/global.service';\nimport {ActivatedRoute} from '@angular/router';\nimport {IglesiasService} from '../iglesias.service';\nimport {CookiesService} from '../../../services/cookies.service';\n\n@Component({\n  selector: 'app-detalles',\n  templateUrl: './detalles.page.html',\n  styleUrls: ['./detalles.page.scss'],\n})\nexport class DetallesPage implements OnInit {\n\n  id: any = null;\n  church: any = null;\n  title = 'Cargando ...';\n  showEditForm = false;\n\n  constructor(\n    private activateRoute: ActivatedRoute,\n    private cookieService: CookiesService,\n    private globalSer: GlobalService,\n    private iglesiasService: IglesiasService,\n    private navCtrl: NavController,\n  ) { }\n\n  async ngOnInit() {\n    await this.globalSer.presentLoading();\n    this.id = this.activateRoute.snapshot.paramMap.get('id');\n    const data: any = await this.iglesiasService.getChurch(this.id);\n\n    if (data && !data.error) {\n      this.church = data;\n      this.title = data.name;\n      await this.globalSer.dismissLoading();\n    }\n    else if (data && data.error) {\n      await this.globalSer.dismissLoading();\n      await this.globalSer.errorSession();\n    }\n    else await this.globalSer.dismissLoading();\n  }\n\n  async updateData(formData) {\n    await this.globalSer.presentLoading();\n    const data = await this.iglesiasService.updateChurch(this.id, formData);\n\n    if (data && !data.error) {\n      this.church = { ...this.church, ...data.church };\n      // update data churches list\n      const churches = await this.cookieService.getCookie('churches');\n      const index = churches.findIndex(c => c._id === this.id);\n      if (index > -1) {\n        churches[index] = { ...churches[index], ...{ name: data.church.name } };\n      }\n      else churches.push(data.church);\n      await this.cookieService.setCookie('churches', churches);\n      await this.globalSer.dismissLoading();\n      this.setShowEditForm();\n      await this.globalSer.presentAlert(\n        '¡Éxito!',\n        data.msg || 'Se ha actualizado la información de la iglesia exitosamente.'\n      );\n    }\n    else if (data && data.error) {\n      await this.globalSer.dismissLoading();\n      await this.globalSer.errorSession();\n    }\n    else await this.globalSer.dismissLoading();\n  }\n\n  async deleteData() {\n    await this.globalSer.presentLoading();\n    const data = await this.iglesiasService.removeChurch(this.id);\n\n    if (data && !data.error) {\n      const churches = await this.cookieService.getCookie('churches');\n      const list = churches.filter(c => c._id !== this.id);\n      await this.cookieService.setCookie('churches', list);\n      await this.globalSer.dismissLoading();\n      await this.globalSer.presentAlert(\n        '¡Éxito!',\n        data.msg || 'Se ha eliminado la iglesia exitosamente.'\n      );\n      this.back();\n    }\n    else if (data && data.error) {\n      await this.globalSer.dismissLoading();\n      await this.globalSer.errorSession();\n    }\n    else await this.globalSer.dismissLoading();\n  }\n\n  async back() {\n    await this.navCtrl.back();\n  }\n\n  setShowEditForm() {\n    this.showEditForm = !this.showEditForm;\n  }\n\n  getParamsToMap() {\n    return [\n      {\n        type: 'Feature',\n        geometry: this.church.location\n      }\n    ];\n  }\n\n  async confirmDeleteAction() {\n    await this.globalSer.alertConfirm({\n      header: '¡Confirme!',\n      message: '¿Está seguro qué desea esta iglesia?' +\n        '<br><br>NOTA: Todos los miembros asociados a esta iglesia serán asignados a la iglesia principal.',\n      confirmAction: () => this.deleteData()\n    });\n  }\n\n  handleCancel = (): void => this.setShowEditForm();\n  handleSubmit = (data: any) => this.updateData(data);\n\n}\n","export default \".img-church-card {\\n  height: 160px;\\n  width: 100%;\\n  border-radius: 5px;\\n  background-repeat: no-repeat;\\n  background-size: contain !important;\\n  background-position: center !important;\\n  margin: 0 auto;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uXFwuLlxcLi5cXC4uXFwuLlxcZGV0YWxsZXMucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsYUFBQTtFQUNBLFdBQUE7RUFDQSxrQkFBQTtFQUNBLDRCQUFBO0VBQ0EsbUNBQUE7RUFDQSxzQ0FBQTtFQUNBLGNBQUE7QUFDRiIsImZpbGUiOiJkZXRhbGxlcy5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuaW1nLWNodXJjaC1jYXJkIHtcclxuICBoZWlnaHQ6IDE2MHB4O1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xyXG4gIGJhY2tncm91bmQtc2l6ZTogY29udGFpbiAhaW1wb3J0YW50O1xyXG4gIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlciAhaW1wb3J0YW50O1xyXG4gIG1hcmdpbjogMCBhdXRvO1xyXG59XHJcbiJdfQ== */\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\" *ngIf=\\\"!showEditForm\\\">\\n      <ion-button (click)=\\\"back()\\\">\\n        <ion-icon name=\\\"arrow-back-outline\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n    <ion-title>{{ showEditForm ? 'Editar iglesia' : title }}</ion-title>\\n    <ion-buttons slot=\\\"end\\\" *ngIf=\\\"church\\\">\\n      <ion-button color=\\\"medium\\\" (click)=\\\"setShowEditForm()\\\" *ngIf=\\\"showEditForm\\\">\\n        <ion-icon name=\\\"close-outline\\\" slot=\\\"start\\\"></ion-icon>\\n        <ion-text>Cancelar</ion-text>\\n      </ion-button>\\n      <ion-button color=\\\"primary\\\" (click)=\\\"setShowEditForm()\\\" *ngIf=\\\"!showEditForm\\\">\\n        <ion-icon name=\\\"create-outline\\\" slot=\\\"start\\\"></ion-icon>\\n        <ion-text>Editar</ion-text>\\n      </ion-button>\\n      <ion-button color=\\\"danger\\\" (click)=\\\"confirmDeleteAction()\\\" *ngIf=\\\"!showEditForm && id !== '624a357644f15f3ce8200c2f'\\\">\\n        <ion-icon name=\\\"trash-outline\\\" slot=\\\"start\\\"></ion-icon>\\n        <ion-text>Eliminar</ion-text>\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\n  <ion-row class=\\\"ion-margin\\\" *ngIf=\\\"church && !showEditForm\\\">\\n    <ion-col size=\\\"12\\\">\\n      <div\\n        class=\\\"img-church-card\\\"\\n        [ngStyle]=\\\"{height: '300px', 'background-image': 'url('+church.picture+'), url(/assets/cruz.png)'}\\\"\\n        *ngIf=\\\"church.picture\\\"\\n      >\\n      </div>\\n      <div\\n        class=\\\"img-church-card\\\"\\n        [ngStyle]=\\\"{height: '300px', 'background-image': 'url(/assets/cruz.png)'}\\\"\\n        *ngIf=\\\"!church.picture\\\"\\n      ></div>\\n    </ion-col>\\n\\n\\n    <ion-col size=\\\"12\\\">\\n      <ion-row>\\n\\n        <ion-col size=\\\"12\\\" [sizeSm]=\\\"8\\\">\\n          <ion-row>\\n            <ion-col size=\\\"12\\\">\\n              <ion-text color=\\\"primary\\\">\\n                <h2>{{ church.name || '????' }}</h2>\\n              </ion-text>\\n            </ion-col>\\n            <ion-col size=\\\"12\\\">\\n              <ion-text color=\\\"medium\\\"><b>Teléfono(s):</b></ion-text>\\n            </ion-col>\\n            <ion-col size=\\\"12\\\">\\n              <ion-text color=\\\"medium\\\">{{ church.phone1 || 'No indicado'}}{{ church.phone2 ? (' - ' + church.phone2) : ''}}</ion-text>\\n            </ion-col>\\n            <ion-col size=\\\"12\\\">\\n              <ion-text color=\\\"medium\\\"><b>Resumen:</b></ion-text>\\n            </ion-col>\\n            <ion-col size=\\\"12\\\">\\n              <ion-text color=\\\"medium\\\">{{ church?.description || 'No indicado.' }}</ion-text>\\n            </ion-col>\\n            <ion-col size=\\\"12\\\">\\n              <ion-text color=\\\"medium\\\"><b>Dirección:</b></ion-text>\\n            </ion-col>\\n            <ion-col size=\\\"12\\\">\\n              <ion-text color=\\\"medium\\\">{{ church.address || 'No indicado'}}</ion-text>\\n            </ion-col>\\n          </ion-row>\\n        </ion-col>\\n\\n        <ion-col size=\\\"12\\\" size-sm=\\\"4\\\">\\n          <ion-row>\\n            <ion-col size=\\\"12\\\">\\n              <ion-text color=\\\"medium\\\"><b>Ubicación:</b></ion-text>\\n            </ion-col>\\n            <ion-col>\\n              <div class=\\\"div-map\\\">\\n                <app-map\\n                  [coords]=\\\"getParamsToMap()\\\"\\n                  [height]=\\\"'100%'\\\"\\n                  [zoom]=\\\"13\\\"\\n                ></app-map>\\n              </div>\\n            </ion-col>\\n          </ion-row>\\n        </ion-col>\\n      </ion-row>\\n    </ion-col>\\n  </ion-row>\\n\\n\\n  <app-iglesias-form\\n    [data]=\\\"church\\\"\\n    [handleCancel]=\\\"handleCancel\\\"\\n    [handleSave]=\\\"handleSubmit\\\"\\n    *ngIf=\\\"church && showEditForm\\\"\\n  ></app-iglesias-form>\\n\\n  <ion-row class=\\\"ion-margin\\\" *ngIf=\\\"church && !showEditForm\\\">\\n\\n  </ion-row>\\n\\n  <ion-row class=\\\"ion-margin\\\" *ngIf=\\\"!church && !showEditForm\\\">\\n    <ion-col size=\\\"12\\\">\\n      <ion-card class=\\\"ion-no-margin ion-no-padding\\\">\\n        <ion-card-content>\\n          <ion-row>\\n            <ion-col size=\\\"12\\\" class=\\\"ion-text-center\\\">\\n              <ion-text>\\n                <p><ion-icon name=\\\"alert-circle-outline\\\"></ion-icon> Disculpe, pero no se logró obtener la información de la iglesia.</p>\\n              </ion-text>\\n            </ion-col>\\n          </ion-row>\\n        </ion-card-content>\\n      </ion-card>\\n    </ion-col>\\n  </ion-row>\\n\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { DetallesPage } from './detalles.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DetallesPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class DetallesPageRoutingModule {}\n"],"sourceRoot":"webpack:///"}