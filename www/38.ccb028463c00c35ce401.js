(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{PDbM:function(e,o,i){"use strict";i.r(o),i.d(o,"CrearPageModule",function(){return f});var t=i("ofXK"),n=i("3Pt+"),r=i("TEn/"),l=i("tyNb"),s=i("mrSG"),a=i("lmIc"),c=i("fXoL"),b=i("4WDQ"),u=i("BpEJ");const d=[{path:"",component:(()=>{class e{constructor(e,o,i,t){this.globalSer=e,this.navCtrl=o,this.cursosService=i,this.router=t,this.levels=[],this.formData={title:null,description:null,level:null,toRoles:[]}}ngOnInit(){return Object(s.a)(this,void 0,void 0,function*(){this.globalSer.checkRoleToEnableAddOrUpdate()||this.back(),this.globalSer.checkSession()?this.levels=this.cursosService.levelsList:yield this.router.navigate(["/ingresar"])})}back(){this.navCtrl.back()}registerCourse(){return Object(s.a)(this,void 0,void 0,function*(){yield this.globalSer.presentLoading("Agregando curso, por favor espere ...");const e=Object.assign({},this.formData),o=yield this.cursosService.createCourse(e);o&&!o.error?(yield this.globalSer.dismissLoading(),yield this.globalSer.presentAlert("\xc9xito",o||"Se ha registrado el nuevo cuso exitosamente."),yield this.back()):o&&o.error?(yield this.globalSer.dismissLoading(),yield this.globalSer.errorSession()):yield this.globalSer.dismissLoading()})}getLevel(e){const o=this.levels.find(o=>o.val===e)||null;return o?o.label:null}getRoles(e){let o="";if(e.length>0)for(const i of e)""===o?o=a.b[i-1]:o+=", "+a.b[i-1];return o}showLevelsListAlert(e=[]){return Object(s.a)(this,void 0,void 0,function*(){const o=[];for(const i of this.levels)o.push({name:"lvls",type:"radio",label:i.label,value:i.val,checked:i.val===e});yield this.globalSer.alertWithList({inputs:o,confirmAction:e=>{this.formData.level=e}})})}showRoleListAlert(e=[]){return Object(s.a)(this,void 0,void 0,function*(){const o=[];for(const[i,t]of a.b.entries())o.push({name:"roles",type:"checkbox",label:t,value:i+1,checked:e.indexOf(i+1)>-1});yield this.globalSer.alertWithList({inputs:o,confirmAction:e=>{this.formData.toRoles=e}})})}confirmCancel(){return Object(s.a)(this,void 0,void 0,function*(){yield this.globalSer.alertConfirm({header:"Confirme",message:"\xbfEst\xe1 seguro qu\xe9 desea cancelar el registro del nuevo curso?",confirmAction:()=>this.back()})})}confirmRegister(){return Object(s.a)(this,void 0,void 0,function*(){const e=this.cursosService.validationRegister(this.formData);e?yield this.globalSer.presentAlert("Alerta",e||"Disculpe, pero debe completar el formulario."):yield this.globalSer.alertConfirm({header:"Confirme",message:"\xbfEst\xe1 seguro qu\xe9 desea registrar este curso?",confirmAction:()=>this.registerCourse()})})}}return e.\u0275fac=function(o){return new(o||e)(c.Jb(b.a),c.Jb(r.U),c.Jb(u.a),c.Jb(l.g))},e.\u0275cmp=c.Db({type:e,selectors:[["app-crear"]],decls:53,vars:9,consts:[["slot","start"],[3,"click"],["name","arrow-back-outline"],[1,"ion-no-margin","ion-no-padding",3,"size"],[3,"size"],["size","12"],["position","floating","color","medium"],["maxlength","25",1,"ion-text-uppercase",3,"ngModel","ngModelChange"],["rows","5",3,"ngModel","ngModelChange"],["autocomplete","off",1,"no-selected-text",3,"readonly","value","click"],["size","12","size-sm","12",1,"ion-margin-top"],["color","medium"],[1,"toSmall"],["size","12","size-sm","12",1,"ion-margin-top","ion-margin-bottom","ion-text-center"],["color","medium",3,"click"],["name","close-outline","slot","start"],["color","primary",3,"click"],["name","save-outline","slot","start"]],template:function(e,o){1&e&&(c.Mb(0,"ion-header"),c.Mb(1,"ion-toolbar"),c.Mb(2,"ion-buttons",0),c.Mb(3,"ion-button",1),c.Ub("click",function(){return o.confirmCancel()}),c.Kb(4,"ion-icon",2),c.Lb(),c.Lb(),c.Mb(5,"ion-title"),c.pc(6,"Crear curso"),c.Lb(),c.Lb(),c.Lb(),c.Mb(7,"ion-content"),c.Mb(8,"ion-row"),c.Mb(9,"ion-col",3),c.Mb(10,"ion-card"),c.Mb(11,"ion-card-header"),c.Mb(12,"ion-card-title"),c.pc(13,"Complete el formulario para nuevos cursos"),c.Lb(),c.Lb(),c.Mb(14,"ion-card-content"),c.Mb(15,"ion-row"),c.Mb(16,"ion-col",4),c.Mb(17,"ion-row"),c.Mb(18,"ion-col",5),c.Mb(19,"ion-item"),c.Mb(20,"ion-label",6),c.pc(21,"Nombre del curso (*)"),c.Lb(),c.Mb(22,"ion-input",7),c.Ub("ngModelChange",function(e){return o.formData.title=e}),c.Lb(),c.Lb(),c.Lb(),c.Mb(23,"ion-col",5),c.Mb(24,"ion-item"),c.Mb(25,"ion-label",6),c.pc(26,"Descripcion del curso (*)"),c.Lb(),c.Mb(27,"ion-textarea",8),c.Ub("ngModelChange",function(e){return o.formData.description=e}),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Mb(28,"ion-col",4),c.Mb(29,"ion-row"),c.Mb(30,"ion-col",5),c.Mb(31,"ion-item"),c.Mb(32,"ion-label",6),c.pc(33,"Nivel del curso (*)"),c.Lb(),c.Mb(34,"ion-input",9),c.Ub("click",function(){return o.showLevelsListAlert(o.formData.level)}),c.Lb(),c.Lb(),c.Lb(),c.Mb(35,"ion-col",5),c.Mb(36,"ion-item"),c.Mb(37,"ion-label",6),c.pc(38,"Roles a los que va dirigido (*)"),c.Lb(),c.Mb(39,"ion-input",9),c.Ub("click",function(){return o.showRoleListAlert(o.formData.toRoles)}),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Mb(40,"ion-col",10),c.Mb(41,"ion-text",11),c.Mb(42,"i",12),c.pc(43,"(*) Campos requeridos."),c.Lb(),c.Lb(),c.Lb(),c.Mb(44,"ion-col",13),c.Mb(45,"ion-button",14),c.Ub("click",function(){return o.confirmCancel()}),c.Kb(46,"ion-icon",15),c.Mb(47,"ion-text"),c.pc(48,"Cancelar"),c.Lb(),c.Lb(),c.Mb(49,"ion-button",16),c.Ub("click",function(){return o.confirmRegister()}),c.Kb(50,"ion-icon",17),c.Mb(51,"ion-text"),c.pc(52,"Guardar"),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Lb()),2&e&&(c.xb(9),c.Zb("size",12),c.xb(7),c.Zb("size",6),c.xb(6),c.Zb("ngModel",o.formData.title),c.xb(5),c.Zb("ngModel",o.formData.description),c.xb(1),c.Zb("size",6),c.xb(6),c.Zb("readonly",!0)("value",o.getLevel(o.formData.level)),c.xb(5),c.Zb("readonly",!0)("value",o.getRoles(o.formData.toRoles)))},directives:[r.r,r.P,r.f,r.e,r.s,r.N,r.o,r.E,r.n,r.g,r.i,r.k,r.h,r.v,r.w,r.u,r.Y,n.b,n.e,n.f,r.L,r.K],styles:[".micursor[_ngcontent-%COMP%]{cursor:pointer}.pictureSize200[_ngcontent-%COMP%]{max-height:200px}.w-100[_ngcontent-%COMP%]{width:100%!important}"]}),e})()}];let m=(()=>{class e{}return e.\u0275mod=c.Hb({type:e}),e.\u0275inj=c.Gb({factory:function(o){return new(o||e)},imports:[[l.j.forChild(d)],l.j]}),e})();var h=i("zioG");let f=(()=>{class e{}return e.\u0275mod=c.Hb({type:e}),e.\u0275inj=c.Gb({factory:function(o){return new(o||e)},imports:[[t.b,n.a,r.Q,m,h.b]]}),e})()}}]);