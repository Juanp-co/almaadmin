(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{AQDP:function(i,t,e){var o,n,s;!function(a){if("object"==typeof i.exports){var r=a(0,t);void 0!==r&&(i.exports=r)}else n=[e,t],void 0===(s="function"==typeof(o=a)?o.apply(t,n):o)||(i.exports=s)}(function(i,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=void 0;t.default=["es-CO",[["a.\xa0m.","p.\xa0m."],e,e],e,[["D","L","M","M","J","V","S"],["dom.","lun.","mar.","mi\xe9.","jue.","vie.","s\xe1b."],["domingo","lunes","martes","mi\xe9rcoles","jueves","viernes","s\xe1bado"],["DO","LU","MA","MI","JU","VI","SA"]],[["d","l","m","m","j","v","s"],["dom.","lun.","mar.","mi\xe9.","jue.","vie.","s\xe1b."],["domingo","lunes","martes","mi\xe9rcoles","jueves","viernes","s\xe1bado"],["DO","LU","MA","MI","JU","VI","SA"]],[["E","F","M","A","M","J","J","A","S","O","N","D"],["ene.","feb.","mar.","abr.","may.","jun.","jul.","ago.","sep.","oct.","nov.","dic."],["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]],[["E","F","M","A","M","J","J","A","S","O","N","D"],["ene.","feb.","mar.","abr.","may.","jun.","jul.","ago.","sept.","oct.","nov.","dic."],["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]],[["a. C.","d. C."],e,["antes de Cristo","despu\xe9s de Cristo"]],0,[6,0],["d/MM/yy","d/MM/y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",e,"{1} 'a' 'las' {0}",e],[",",".",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0\xa0%","\xa4\xa0#,##0.00","#E0"],"COP","$","peso colombiano",{AUD:[e,"$"],BRL:[e,"R$"],CAD:[e,"$"],CNY:[e,"\xa5"],COP:["$"],ESP:["\u20a7"],EUR:[e,"\u20ac"],FKP:[e,"FK\xa3"],GBP:[e,"\xa3"],HKD:[e,"$"],ILS:[e,"\u20aa"],INR:[e,"\u20b9"],JPY:[e,"\xa5"],KRW:[e,"\u20a9"],MXN:[e,"$"],NZD:[e,"$"],RON:[e,"L"],SSP:[e,"SD\xa3"],SYP:[e,"S\xa3"],TWD:[e,"NT$"],USD:["US$","$"],VEF:[e,"BsF"],VND:[e,"\u20ab"],XAF:[],XCD:[e,"$"],XOF:[]},"ltr",function(i){return 1===i?1:5}]})},qmMc:function(i,t,e){"use strict";e.r(t),e.d(t,"ReportesPageModule",function(){return I});var o=e("ofXK"),n=e("AQDP"),s=e.n(n),a=e("3Pt+"),r=e("TEn/"),l=e("tyNb"),b=e("mrSG"),c=e("Wgwc"),d=e.n(c),u=e("OmbT"),h=e("fXoL"),p=e("4WDQ"),m=e("ai4U"),g=e("0HKr");function f(i,t){if(1&i){const i=h.Nb();h.Mb(0,"ion-col",6),h.Mb(1,"ion-item"),h.Mb(2,"ion-label",7),h.pc(3,"Grupo seleccionado"),h.Lb(),h.Mb(4,"ion-input",8),h.Ub("click",function(){h.ic(i);const t=h.Wb(2);return t.showListGroups(null==t.selected?null:t.selected._id)}),h.Lb(),h.Lb(),h.Lb()}if(2&i){const i=h.Wb(2);h.xb(4),h.Zb("readonly",!0)("value",i.getNumberGroup())}}function v(i,t){if(1&i){const i=h.Nb();h.Mb(0,"ion-row",2),h.nc(1,f,5,2,"ion-col",3),h.Mb(2,"ion-col"),h.Mb(3,"ion-button",4),h.Ub("click",function(){return h.ic(i),h.Wb().downloadData()}),h.Kb(4,"ion-icon",5),h.Mb(5,"ion-text"),h.pc(6,"Descargar datos"),h.Lb(),h.Lb(),h.Lb(),h.Lb()}if(2&i){const i=h.Wb();h.xb(1),h.Zb("ngIf",i.listGroups&&i.listGroups.length>0)}}function M(i,t){if(1&i&&(h.Mb(0,"ion-col",19),h.Mb(1,"ion-row",20),h.Mb(2,"ion-col",21),h.Mb(3,"ion-text"),h.Kb(4,"ion-icon",22),h.Kb(5,"br"),h.Mb(6,"span",23),h.pc(7,"Hermanos y ni\xf1os"),h.Lb(),h.Lb(),h.Lb(),h.Mb(8,"ion-col",24),h.Mb(9,"ion-text"),h.Mb(10,"p",25),h.pc(11),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Lb()),2&i){const i=h.Wb(2);h.xb(11),h.rc(" ",i.dataToReport.totals.qty," ")}}function y(i,t){if(1&i&&(h.Mb(0,"ion-col",19),h.Mb(1,"ion-row",20),h.Mb(2,"ion-col",21),h.Mb(3,"ion-text",26),h.Kb(4,"ion-icon",27),h.Kb(5,"br"),h.Mb(6,"span",23),h.pc(7,"Ofrendas"),h.Lb(),h.Lb(),h.Lb(),h.Mb(8,"ion-col",24),h.Mb(9,"ion-text",26),h.Mb(10,"p",25),h.pc(11),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Lb()),2&i){const i=h.Wb(2);h.xb(11),h.rc(" ",i.dataToReport.offering.qty," ")}}function L(i,t){if(1&i&&(h.Mb(0,"ion-col",10),h.Kb(1,"app-chart",28),h.Lb()),2&i){const i=h.Wb(2);h.Zb("sizeSm",i.sizeElems),h.xb(1),h.ac("title",i.dataToReport.data1.title),h.Zb("data",i.dataToReport.data1)("sizeElem",i.sizeElems)}}function x(i,t){if(1&i&&(h.Mb(0,"ion-col",10),h.Kb(1,"app-chart",28),h.Lb()),2&i){const i=h.Wb(2);h.Zb("sizeSm",i.sizeElems),h.xb(1),h.ac("title",i.dataToReport.data2.title),h.Zb("data",i.dataToReport.data2)("sizeElem",i.sizeElems)}}function D(i,t){if(1&i&&(h.Mb(0,"ion-col",10),h.Kb(1,"app-chart",28),h.Lb()),2&i){const i=h.Wb(2);h.Zb("sizeSm",i.sizeElems),h.xb(1),h.ac("title",i.dataToReport.data3.title),h.Zb("data",i.dataToReport.data3)("sizeElem",i.sizeElems)}}function z(i,t){if(1&i&&(h.Mb(0,"ion-col",10),h.Kb(1,"app-chart",28),h.Lb()),2&i){const i=h.Wb(2);h.Zb("sizeSm",i.sizeElems),h.xb(1),h.ac("title",i.dataToReport.data4.title),h.Zb("data",i.dataToReport.data4)("sizeElem",i.sizeElems)}}function w(i,t){if(1&i&&(h.Mb(0,"ion-col",10),h.Kb(1,"app-chart",28),h.Lb()),2&i){const i=h.Wb(2);h.Zb("sizeSm",i.sizeElems),h.xb(1),h.ac("title",i.dataToReport.data5.title),h.Zb("data",i.dataToReport.data5)("sizeElem",i.sizeElems)}}function S(i,t){if(1&i&&(h.Mb(0,"ion-col",10),h.Kb(1,"app-chart",28),h.Lb()),2&i){const i=h.Wb(2);h.Zb("sizeSm",i.sizeElems),h.xb(1),h.ac("title",i.dataToReport.data6.title),h.Zb("data",i.dataToReport.data6)("sizeElem",i.sizeElems)}}function C(i,t){if(1&i){const i=h.Nb();h.Mb(0,"ion-col",30),h.Mb(1,"ion-card",4),h.Ub("click",function(){h.ic(i);const e=t.index;return h.Wb(3).showObservation(e)}),h.Mb(2,"ion-card-content"),h.Mb(3,"ion-text"),h.Mb(4,"p"),h.pc(5),h.Lb(),h.Lb(),h.Mb(6,"ion-text"),h.Mb(7,"span"),h.pc(8),h.Lb(),h.Kb(9,"br"),h.Lb(),h.Mb(10,"ion-text"),h.Mb(11,"i",31),h.pc(12,"Clic para m\xe1s detalles."),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Lb()}if(2&i){const i=t.$implicit;h.xb(5),h.qc(i.observation),h.xb(3),h.qc(i.date)}}function P(i,t){if(1&i&&(h.Mb(0,"ion-row"),h.nc(1,C,13,2,"ion-col",29),h.Lb()),2&i){const i=h.Wb(2);h.zb(6===i.sizeElems?"max-height-250":"max-height-450"),h.xb(1),h.Zb("ngForOf",i.observationsPreview)}}function O(i,t){if(1&i){const i=h.Nb();h.Mb(0,"ion-row",9),h.Mb(1,"ion-col",10),h.Mb(2,"ion-card",11),h.Mb(3,"ion-card-header",11),h.Mb(4,"ion-toolbar",12),h.Mb(5,"ion-buttons",13),h.Mb(6,"ion-button",4),h.Ub("click",function(){return h.ic(i),h.Wb().setShowTotals()}),h.Kb(7,"ion-icon",14),h.Lb(),h.Lb(),h.Mb(8,"ion-title"),h.pc(9,"Totales"),h.Lb(),h.Lb(),h.Lb(),h.Mb(10,"ion-card-content"),h.Mb(11,"ion-row",15),h.nc(12,M,12,1,"ion-col",16),h.nc(13,y,12,1,"ion-col",16),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.nc(14,L,2,4,"ion-col",17),h.nc(15,x,2,4,"ion-col",17),h.nc(16,D,2,4,"ion-col",17),h.nc(17,z,2,4,"ion-col",17),h.nc(18,w,2,4,"ion-col",17),h.nc(19,S,2,4,"ion-col",17),h.Mb(20,"ion-col",10),h.Mb(21,"ion-card",11),h.Mb(22,"ion-card-header",11),h.Mb(23,"ion-toolbar",12),h.Mb(24,"ion-buttons",13),h.Mb(25,"ion-button",4),h.Ub("click",function(){return h.ic(i),h.Wb().setShowObservations()}),h.Kb(26,"ion-icon",14),h.Lb(),h.Lb(),h.Mb(27,"ion-title"),h.pc(28,"Observaciones"),h.Lb(),h.Lb(),h.Lb(),h.Mb(29,"ion-card-content"),h.nc(30,P,2,4,"ion-row",18),h.Lb(),h.Lb(),h.Lb(),h.Lb()}if(2&i){const i=h.Wb();h.xb(1),h.Zb("sizeSm",i.sizeElems),h.xb(6),h.bc("name","chevron-",i.showTotals?"up":"down","-outline"),h.xb(3),h.Ab("",i.showTotals?"":"ion-hide"," ion-no-padding "),h.xb(2),h.Zb("ngIf",i.dataToReport),h.xb(1),h.Zb("ngIf",i.dataToReport),h.xb(1),h.Zb("ngIf",null==i.dataToReport?null:i.dataToReport.data1),h.xb(1),h.Zb("ngIf",null==i.dataToReport?null:i.dataToReport.data2),h.xb(1),h.Zb("ngIf",null==i.dataToReport?null:i.dataToReport.data3),h.xb(1),h.Zb("ngIf",null==i.dataToReport?null:i.dataToReport.data4),h.xb(1),h.Zb("ngIf",null==i.dataToReport?null:i.dataToReport.data5),h.xb(1),h.Zb("ngIf",null==i.dataToReport?null:i.dataToReport.data6),h.xb(1),h.Zb("sizeSm",i.sizeElems),h.xb(6),h.bc("name","chevron-",i.showObservations?"up":"down","-outline"),h.xb(3),h.Ab("",i.showObservations?"":"ion-hide"," ion-no-padding"),h.xb(1),h.Zb("ngIf",(null==i.observationsPreview?null:i.observationsPreview.length)>0)}}let k=(()=>{class i{constructor(i){this.globalSer=i,this.data=null,this.sizeElems=6,this.listGroups=null,this.selected=null,this.report=null,this.observations=null,this.observationsPreview=null,this.dataToReport=null,this.showTotals=!0,this.showObservations=!0}ngOnInit(){return Object(b.a)(this,void 0,void 0,function*(){this.data?(this.listGroups=this.data.map(i=>({_id:i._id,groupName:i.groupName})),this.listGroups.length>0&&(this.selected=this.listGroups[0]),yield this.setDataToReport(this.selected?this.data[0].report:null),yield this.setObservationsValues(this.data.length>0?this.data[0].observations:null)):this.dataToReport=null})}setShowTotals(){this.showTotals=!this.showTotals}setShowObservations(){this.showObservations=!this.showObservations}setObservationsValues(i){return Object(b.a)(this,void 0,void 0,function*(){this.observations=[],this.observationsPreview=[],i&&i.length>0&&(this.observations=i,i.forEach(i=>{this.observationsPreview.push({observation:i.observations.length>50?i.observations.substr(0,50)+" ...":i.observations,date:d()(i.date).format("DD-MM-YYYY HH:mm")})}))})}setDataToReport(i){return Object(b.a)(this,void 0,void 0,function*(){yield this.globalSer.presentLoading(),this.dataToReport=null,this.dataToReport=i?{data1:{title:"Hermanos",data:[{label:"Hermanos",qty:i.brethren},{label:"Amigos",qty:i.friends}]},data2:{title:"Ni\xf1os",data:[{label:"Ni\xf1os",qty:i.christianChildren},{label:"Amigos",qty:i.christianChildrenFriends}]},data3:{title:"Visitas",data:[{label:"Programadas",qty:i.scheduledVisits},{label:"Disipulado",qty:i.discipleshipVisits}]},data4:{title:"Asistencia",data:[{label:"Hermanos",qty:i.churchAttendance},{label:"Ni\xf1os",qty:i.churchAttendanceChildren}]},data5:{title:"Conversiones y reconcilaciones",data:[{label:"Reconciliaciones",qty:i.reconciliations},{label:"Conversiones",qty:i.conversions},{label:"Conversiones de ni\xf1os",qty:i.conversionsChildren}]},data6:{title:"Otros",data:[{label:"Planificaci\xf3n de hnos.",qty:i.brethrenPlanning},{label:"Lectura b\xedblica",qty:i.bibleReading},{label:"Consolidados",qty:i.consolidated}]},totals:{title:"Total de hermanos y ni\xf1os",qty:i.total},offering:{title:"Total de ofrendas",qty:this.globalSer.getCurrency(i.offering||0)}}:null,yield this.globalSer.dismissLoading()})}getNumberGroup(){var i;return(null===(i=this.selected)||void 0===i?void 0:i.groupName)||"Desconocido"}downloadData(){const i=this.data.find(i=>{var t;return i._id===(null===(t=this.selected)||void 0===t?void 0:t._id)})||null;if(i){const t=[{key:"brethren",key2:"Hermanos"},{key:"friends",key2:"Amigos"},{key:"scheduledVisits",key2:"VisitasProgramadas"},{key:"discipleshipVisits",key2:"VisitasAlDisipulado"},{key:"christianChildren",key2:"NinnosCristianos"},{key:"christianChildrenFriends",key2:"NinnosCristianosAmigos"},{key:"offering",key2:"Ofrendas"},{key:"churchAttendance",key2:"AsistenciasALaIglesia"},{key:"churchAttendanceChildren",key2:"AsistenciasNinnosIglesia"},{key:"conversions",key2:"Conversiones"},{key:"reconciliations",key2:"Reconciliaciones"},{key:"conversionsChildren",key2:"ConversionesNinnos"},{key:"brethrenPlanning",key2:"PlanificacionHnos"},{key:"bibleReading",key2:"LecturaBiblica"},{key:"consolidated",key2:"Consolidados"},{key:"total",key2:"TotalPersonas"}],e=[];this.data.forEach(o=>{const n={Grupo:o.groupName,Hermanos:0,Amigos:0,VisitasProgramadas:0,VisitasAlDisipulado:0,NinnosCristianos:0,NinnosCristianosAmigos:0,Ofrendas:0,AsistenciasALaIglesia:0,AsistenciasNinnosIglesia:0,Conversiones:0,Reconciliaciones:0,ConversionesNinnos:0,PlanificacionHnos:0,LecturaBiblica:0,Consolidados:0,TotalPersonas:0};t.forEach(t=>{i.report[t.key]&&(n[t.key2]=o.report[t.key])}),e.push(n)}),this.globalSer.downloadCSVFromJson(`Reporte_Grupos_Familiares_-_${d()().format("YYYY-MM-DD[_]HH:mm:ss")}.csv`,e)}else this.globalSer.presentAlert("Error","Disculpe, pero ha ocurrido un error al momento de descargar la informaci\xf3n.")}showListGroups(i){return Object(b.a)(this,void 0,void 0,function*(){const t=[];for(const e of this.listGroups)t.push({name:"list-groups",type:"radio",label:e.groupName,value:e._id,checked:e._id===i});yield this.globalSer.alertWithList({header:"Seleccione un grupo",inputs:t,confirmAction:t=>Object(b.a)(this,void 0,void 0,function*(){if(t!==i){this.dataToReport=null;const i=this.data.find(i=>(null==i?void 0:i._id)===t)||null;yield this.setDataToReport((null==i?void 0:i.report)||null),this.selected=i||null,yield this.setObservationsValues((null==i?void 0:i.observations)||null)}})})})}showObservation(i){return Object(b.a)(this,void 0,void 0,function*(){const t=this.observations[i]||null;t?yield this.globalSer.presentAlert("Observaci\xf3n",`<b>Fecha: </b>${d()(t.date).format("DD-MM-YYYY HH:mm")} <br><br> ${t.observations}`):yield this.globalSer.presentAlert("Error","Disculpe, pero ha ocurrido un error al momento de cargar la observaci\xf3n.")})}}return i.\u0275fac=function(t){return new(t||i)(h.Jb(p.a))},i.\u0275cmp=h.Db({type:i,selectors:[["app-families-groups-reports"]],inputs:{data:"data",sizeElems:"sizeElems"},decls:2,vars:2,consts:[["class","ion-no-padding ion-margin-start ion-margin-end ion-margin-top",4,"ngIf"],["class","ion-justify-content-center ion-margin-top ion-margin-bottom ion-padding-bottom",4,"ngIf"],[1,"ion-no-padding","ion-margin-start","ion-margin-end","ion-margin-top"],["size","6",4,"ngIf"],[3,"click"],["name","download-outline","slot","start"],["size","6"],["position","floating","color","medium"],["autocomplete","off",1,"no-selected-text",3,"readonly","value","click"],[1,"ion-justify-content-center","ion-margin-top","ion-margin-bottom","ion-padding-bottom"],["size","12",3,"sizeSm"],[1,"ion-no-padding"],["color","primary"],["slot","start"],[3,"name"],[1,"ion-margin-bottom","ion-margin-top"],["size","12",4,"ngIf"],["size","12",3,"sizeSm",4,"ngIf"],[3,"class",4,"ngIf"],["size","12"],[1,"ion-align-items-center"],["size","5",1,"ion-text-center"],["name","body-outline",1,"bigIcon"],[1,"textTotals"],["size","7",1,"ion-text-center","ion-align-items-center"],[1,"bigNumber"],[1,"ion-text-center"],["name","cash-outline",1,"bigIcon"],["typeChart","bar",3,"data","sizeElem","title"],["size","12","size-sm","6",4,"ngFor","ngForOf"],["size","12","size-sm","6"],[1,"toSmall"]],template:function(i,t){1&i&&(h.nc(0,v,7,1,"ion-row",0),h.nc(1,O,31,19,"ion-row",1)),2&i&&(h.Zb("ngIf",t.data),h.xb(1),h.Zb("ngIf",t.dataToReport))},directives:[o.i,r.E,r.n,r.e,r.s,r.J,r.v,r.w,r.u,r.X,r.g,r.i,r.O,r.f,r.M,r.h,g.a,o.h],styles:[""]}),i})();function T(i,t){if(1&i){const i=h.Nb();h.Mb(0,"ion-col",6),h.Mb(1,"ion-card"),h.Mb(2,"ion-card-content"),h.Mb(3,"ion-row"),h.Mb(4,"ion-col",15),h.Mb(5,"ion-item"),h.Mb(6,"ion-label",16),h.pc(7,"N\xba Sector"),h.Lb(),h.Mb(8,"ion-input",17),h.Ub("ngModelChange",function(t){return h.ic(i),h.Wb().queryParams.sector=t})("keypress",function(t){return h.ic(i),h.Wb().validateOnlyNumber(t)}),h.Lb(),h.Lb(),h.Lb(),h.Mb(9,"ion-col",15),h.Mb(10,"ion-item"),h.Mb(11,"ion-label",16),h.pc(12,"N\xba Sub-sector"),h.Lb(),h.Mb(13,"ion-input",17),h.Ub("ngModelChange",function(t){return h.ic(i),h.Wb().queryParams.subSector=t})("keypress",function(t){return h.ic(i),h.Wb().validateOnlyNumber(t)}),h.Lb(),h.Lb(),h.Lb(),h.Mb(14,"ion-col",15),h.Mb(15,"ion-item"),h.Mb(16,"ion-label",16),h.pc(17,"N\xba del grupo"),h.Lb(),h.Mb(18,"ion-input",17),h.Ub("ngModelChange",function(t){return h.ic(i),h.Wb().queryParams.number=t})("keypress",function(t){return h.ic(i),h.Wb().validateOnlyNumber(t)}),h.Lb(),h.Lb(),h.Lb(),h.Mb(19,"ion-col",18),h.Mb(20,"ion-item"),h.Mb(21,"ion-label",16),h.pc(22,"A partir de:"),h.Lb(),h.Mb(23,"ion-datetime",19),h.Ub("ngModelChange",function(t){return h.ic(i),h.Wb().queryParams.initDate=t}),h.Lb(),h.Lb(),h.Lb(),h.Mb(24,"ion-col",18),h.Mb(25,"ion-item"),h.Mb(26,"ion-label",16),h.pc(27,"Hasta:"),h.Lb(),h.Mb(28,"ion-datetime",19),h.Ub("ngModelChange",function(t){return h.ic(i),h.Wb().queryParams.endDate=t}),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Mb(29,"ion-row",20),h.Mb(30,"ion-col",21),h.Mb(31,"ion-button",22),h.Ub("click",function(){return h.ic(i),h.Wb().resetQueryParams()}),h.Kb(32,"ion-icon",23),h.Mb(33,"ion-text"),h.pc(34,"Limpiar"),h.Lb(),h.Lb(),h.Lb(),h.Mb(35,"ion-col",21),h.Mb(36,"ion-button",24),h.Ub("click",function(){return h.ic(i),h.Wb().findData()}),h.Kb(37,"ion-icon",25),h.Mb(38,"ion-text"),h.pc(39,"Aplicar"),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Lb()}if(2&i){const i=h.Wb();h.xb(8),h.Zb("ngModel",i.queryParams.sector),h.xb(5),h.Zb("ngModel",i.queryParams.subSector),h.xb(5),h.Zb("ngModel",i.queryParams.number),h.xb(5),h.Zb("ngModel",i.queryParams.initDate)("min",i.minInitDate)("max",i.maxInitDate),h.xb(5),h.Zb("ngModel",i.queryParams.endDate)("min",i.minEndDate)("max",i.maxEndDate)}}function A(i,t){if(1&i&&h.Kb(0,"app-families-groups-reports",26),2&i){const i=h.Wb();h.Zb("data",i.reportsAlt)("sizeElems",i.sizeElems)}}function R(i,t){if(1&i&&(h.Mb(0,"ion-row"),h.Mb(1,"ion-col",6),h.Mb(2,"ion-card",27),h.Mb(3,"ion-text",28),h.Mb(4,"p",29),h.Kb(5,"ion-icon",30),h.pc(6),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Lb()),2&i){const i=h.Wb();h.xb(6),h.rc(" ",i.showFilter?"No se encontraron resultados.":"No se logr\xf3 obtener la informaci\xf3n."," ")}}const E=[{path:"",component:(()=>{class i{constructor(i,t,e,o){this.globalSer=i,this.gruposService=t,this.navCtrl=e,this.router=o,this.opts=["Ninguno","Sub-sector","Sector"],this.reports=null,this.reportsAlt=null,this.listGroups=null,this.selected=null,this.report=null,this.observations=null,this.observationsPreview=null,this.dataToReport=null,this.totalityOpt=0,this.sizeElems=6,this.showFilter=!1,this.showTotals=!0,this.showObservations=!0,this.minInitDate=d()("2021-01-01").format("YYYY-MM-DD"),this.maxInitDate=d()().format("YYYY-MM-DD"),this.minEndDate=d()("2021-01-01").format("YYYY-MM-DD"),this.maxEndDate=d()().format("YYYY-MM-DD"),this.queryParams={sector:null,subSector:null,number:null,initDate:null,endDate:null}}ngOnInit(){return Object(b.a)(this,void 0,void 0,function*(){this.globalSer.checkSession()?yield this.getData():this.router.navigate(["/ingresar"])})}getData(){return Object(b.a)(this,void 0,void 0,function*(){yield this.globalSer.presentLoading(),this.reports=null,this.listGroups=null,this.selected=null,this.dataToReport=null,this.observations=[],this.observationsPreview=[];const i=yield this.gruposService.getFamiliesGroupsReports(this.queryParams);i&&!i.error?(this.reports=i,yield this.globalSer.dismissLoading(),yield this.setTotalityData(!0)):i&&i.error?(yield this.globalSer.dismissLoading(),yield this.globalSer.errorSession()):yield this.globalSer.dismissLoading()})}back(){return Object(b.a)(this,void 0,void 0,function*(){yield this.navCtrl.back()})}showListResizeAlert(){return Object(b.a)(this,void 0,void 0,function*(){yield this.globalSer.alertWithList({header:"Tama\xf1os de las gr\xe1ficas",inputs:[{name:"resize",type:"radio",label:"Mediano",value:6,checked:6===this.sizeElems},{name:"resize",type:"radio",label:"Grande",value:12,checked:12===this.sizeElems}],confirmAction:i=>{this.sizeElems=i}})})}setShowFilter(){this.showFilter=!this.showFilter}resetQueryParams(){return Object(b.a)(this,void 0,void 0,function*(){this.queryParams.initDate=null,this.queryParams.endDate=null,this.queryParams.sector=null,this.queryParams.subSector=null,this.queryParams.number=null,this.showFilter=!this.showFilter,yield this.getData()})}findData(){return Object(b.a)(this,void 0,void 0,function*(){let i=!1;this.queryParams.initDate&&(this.queryParams.initDate=d()(this.queryParams.initDate).format("YYYY-MM-DD"),i=!0),this.queryParams.endDate&&(this.queryParams.endDate=d()(this.queryParams.endDate).format("YYYY-MM-DD"),i=null!==this.queryParams.initDate),/[0-9]{1,4}/.test(this.queryParams.sector)&&(i=!0),/[0-9]{1,4}/.test(this.queryParams.subSector)&&(i=!0),/[0-9]{1,4}/.test(this.queryParams.number)&&(i=!0),i?yield this.getData():this.globalSer.presentAlert("Alerta","Disculpe, pero debe indicar una fecha inicial")})}validateOnlyNumber(i){Object(u.q)(i)}showListTotality(){return Object(b.a)(this,void 0,void 0,function*(){const i=[];for(const[t,e]of this.opts.entries())i.push({name:"list-opts",type:"radio",label:e,value:t,checked:t===this.totalityOpt});yield this.globalSer.alertWithList({header:"Totalizar por",inputs:i,confirmAction:i=>Object(b.a)(this,void 0,void 0,function*(){this.totalityOpt=i,this.reportsAlt=null,yield this.setTotalityData(!0)})})})}setTotalityData(i=!1){return Object(b.a)(this,void 0,void 0,function*(){i&&(yield this.globalSer.presentLoading());const t=[],e=(i,t)=>(i.bibleReading+=(null==t?void 0:t.bibleReading)||0,i.brethren+=(null==t?void 0:t.brethren)||0,i.brethrenPlanning+=(null==t?void 0:t.brethrenPlanning)||0,i.christianChildren+=(null==t?void 0:t.christianChildren)||0,i.christianChildrenFriends+=(null==t?void 0:t.christianChildrenFriends)||0,i.churchAttendance+=(null==t?void 0:t.churchAttendance)||0,i.churchAttendanceChildren+=(null==t?void 0:t.churchAttendanceChildren)||0,i.consolidated+=(null==t?void 0:t.consolidated)||0,i.conversions+=(null==t?void 0:t.conversions)||0,i.conversionsChildren+=(null==t?void 0:t.conversionsChildren)||0,i.discipleshipVisits+=(null==t?void 0:t.discipleshipVisits)||0,i.friends+=(null==t?void 0:t.friends)||0,i.offering+=(null==t?void 0:t.offering)||0,i.reconciliations+=(null==t?void 0:t.reconciliations)||0,i.scheduledVisits+=(null==t?void 0:t.scheduledVisits)||0,i.total+=(null==t?void 0:t.total)||0,i);let o=null;this.reportsAlt=null;const{length:n}=this.reports;if(n>0){if(0!==this.totalityOpt){let i={_id:null,groupName:null,observations:[],report:{bibleReading:0,brethren:0,brethrenPlanning:0,christianChildren:0,christianChildrenFriends:0,churchAttendance:0,churchAttendanceChildren:0,consolidated:0,conversions:0,conversionsChildren:0,discipleshipVisits:0,friends:0,offering:0,reconciliations:0,scheduledVisits:0,total:0}};this.reports.forEach((n,s)=>{var a;n.group[1===this.totalityOpt?"subSector":"sector"]!==o&&(null!==o&&t.push(i),o=n.group[1===this.totalityOpt?"subSector":"sector"],i={_id:null,groupName:null,observations:[],report:{bibleReading:0,brethren:0,brethrenPlanning:0,christianChildren:0,christianChildrenFriends:0,churchAttendance:0,churchAttendanceChildren:0,consolidated:0,conversions:0,conversionsChildren:0,discipleshipVisits:0,friends:0,offering:0,reconciliations:0,scheduledVisits:0,total:0}},i._id=s,i.groupName="Sector: "+n.group.sector,1===this.totalityOpt&&(i.groupName+=" - SS: "+n.group.subSector)),i.observations=null===(a=i.observations)||void 0===a?void 0:a.concat(n.observations||[]),i.report=e(i.report,n.report)}),n>0&&0===t.length&&i&&t.push(i)}else{let i={_id:null,groupName:null,observations:[],report:{bibleReading:0,brethren:0,brethrenPlanning:0,christianChildren:0,christianChildrenFriends:0,churchAttendance:0,churchAttendanceChildren:0,consolidated:0,conversions:0,conversionsChildren:0,discipleshipVisits:0,friends:0,offering:0,reconciliations:0,scheduledVisits:0,total:0}};this.reports.forEach(o=>{var n;i={_id:null,groupName:null,observations:[],report:{bibleReading:0,brethren:0,brethrenPlanning:0,christianChildren:0,christianChildrenFriends:0,churchAttendance:0,churchAttendanceChildren:0,consolidated:0,conversions:0,conversionsChildren:0,discipleshipVisits:0,friends:0,offering:0,reconciliations:0,scheduledVisits:0,total:0}},i._id=o.group._id,i.groupName="S: "+o.group.sector,i.groupName+=" - SS: "+o.group.subSector,i.groupName+=" - #: "+o.group.number,i.observations=null===(n=i.observations)||void 0===n?void 0:n.concat(o.observations||[]),i.report=e(i.report,o.report),t.push(i)})}this.reportsAlt=t}i&&(yield this.globalSer.dismissLoading())})}}return i.\u0275fac=function(t){return new(t||i)(h.Jb(p.a),h.Jb(m.a),h.Jb(r.T),h.Jb(l.g))},i.\u0275cmp=h.Db({type:i,selectors:[["app-reportes"]],decls:30,vars:5,consts:[["slot","start"],[3,"click"],["name","arrow-back-outline"],["slot","end"],["name","resize-outline","slot","start"],[1,"ion-no-padding","ion-margin-start","ion-margin-end","ion-margin-top"],["size","12"],["size","auto"],[1,"ion-margin-bottom"],["color","medium",3,"click"],["slot","start",3,"name"],["name","calculator-outline","slot","start"],["size","12",4,"ngIf"],[3,"data","sizeElems",4,"ngIf","ngIfElse"],["noReports",""],["size","12","size-sm","4"],["position","floating","color","medium"],["autocomplete","off","maxlength","4",3,"ngModel","ngModelChange","keypress"],["size","12","size-sm","6"],["displayFormat","DD/MM/YYYY","doneText","Listo","cancelText","Cancelar",3,"ngModel","min","max","ngModelChange"],[1,"ion-margin-top"],["size","6",1,"ion-justify-content-center"],["color","light","expand","full",1,"ion-text-center",3,"click"],["name","trash-outline"],["color","primary","expand","full",1,"ion-text-center",3,"click"],["name","checkmark-outline"],[3,"data","sizeElems"],[1,"ion-no-padding"],["color","medium"],[1,"ion-text-center"],["name","alert-circle-outline"]],template:function(i,t){if(1&i&&(h.Mb(0,"ion-header"),h.Mb(1,"ion-toolbar"),h.Mb(2,"ion-buttons",0),h.Mb(3,"ion-button",1),h.Ub("click",function(){return t.back()}),h.Kb(4,"ion-icon",2),h.Lb(),h.Lb(),h.Mb(5,"ion-title"),h.pc(6,"Reportes de grupos familiares"),h.Lb(),h.Mb(7,"ion-buttons",3),h.Mb(8,"ion-button",1),h.Ub("click",function(){return t.showListResizeAlert()}),h.Kb(9,"ion-icon",4),h.Mb(10,"ion-text"),h.pc(11,"Visualizaci\xf3n"),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Mb(12,"ion-content"),h.Mb(13,"ion-row",5),h.Mb(14,"ion-col",6),h.Mb(15,"ion-row"),h.Mb(16,"ion-col",7),h.Mb(17,"div",8),h.Mb(18,"ion-button",9),h.Ub("click",function(){return t.setShowFilter()}),h.Kb(19,"ion-icon",10),h.Mb(20,"ion-text"),h.pc(21,"Filtrar"),h.Lb(),h.Lb(),h.Mb(22,"ion-button",9),h.Ub("click",function(){return t.showListTotality()}),h.Kb(23,"ion-icon",11),h.Mb(24,"ion-text"),h.pc(25),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.nc(26,T,40,9,"ion-col",12),h.Lb(),h.nc(27,A,1,2,"app-families-groups-reports",13),h.nc(28,R,7,1,"ng-template",null,14,h.oc),h.Lb()),2&i){const i=h.hc(29);h.xb(19),h.bc("name","",t.showFilter?"close":"filter","-outline"),h.xb(6),h.qc(t.opts[t.totalityOpt]),h.xb(1),h.Zb("ngIf",t.showFilter),h.xb(1),h.Zb("ngIf",t.reportsAlt)("ngIfElse",i)}},directives:[r.r,r.O,r.f,r.e,r.s,r.M,r.J,r.o,r.E,r.n,o.i,r.g,r.h,r.v,r.w,r.u,r.X,a.b,a.e,a.f,r.p,r.W,k],styles:[".max-height-250[_ngcontent-%COMP%]{max-height:250px!important;overflow-y:auto}.max-height-450[_ngcontent-%COMP%]{max-height:450px!important;overflow-y:auto}.bigNumber[_ngcontent-%COMP%]{font-size:1.5em!important}.bigIcon[_ngcontent-%COMP%]{font-size:3em!important}.textTotals[_ngcontent-%COMP%]{font-size:1em!important;font-weight:700}"]}),i})()}];let N=(()=>{class i{}return i.\u0275mod=h.Hb({type:i}),i.\u0275inj=h.Gb({factory:function(t){return new(t||i)},imports:[[l.j.forChild(E)],l.j]}),i})();var q=e("j1ZV");Object(o.o)(s.a);let I=(()=>{class i{}return i.\u0275mod=h.Hb({type:i}),i.\u0275inj=h.Gb({factory:function(t){return new(t||i)},imports:[[o.b,a.a,r.P,N,q.a]]}),i})()}}]);