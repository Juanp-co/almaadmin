(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{AQDP:function(t,i,e){var o,n,a;!function(s){if("object"==typeof t.exports){var r=s(0,i);void 0!==r&&(t.exports=r)}else n=[e,i],void 0===(a="function"==typeof(o=s)?o.apply(i,n):o)||(t.exports=a)}(function(t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=void 0;i.default=["es-CO",[["a.\xa0m.","p.\xa0m."],e,e],e,[["D","L","M","M","J","V","S"],["dom.","lun.","mar.","mi\xe9.","jue.","vie.","s\xe1b."],["domingo","lunes","martes","mi\xe9rcoles","jueves","viernes","s\xe1bado"],["DO","LU","MA","MI","JU","VI","SA"]],[["d","l","m","m","j","v","s"],["dom.","lun.","mar.","mi\xe9.","jue.","vie.","s\xe1b."],["domingo","lunes","martes","mi\xe9rcoles","jueves","viernes","s\xe1bado"],["DO","LU","MA","MI","JU","VI","SA"]],[["E","F","M","A","M","J","J","A","S","O","N","D"],["ene.","feb.","mar.","abr.","may.","jun.","jul.","ago.","sep.","oct.","nov.","dic."],["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]],[["E","F","M","A","M","J","J","A","S","O","N","D"],["ene.","feb.","mar.","abr.","may.","jun.","jul.","ago.","sept.","oct.","nov.","dic."],["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]],[["a. C.","d. C."],e,["antes de Cristo","despu\xe9s de Cristo"]],0,[6,0],["d/MM/yy","d/MM/y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",e,"{1} 'a' 'las' {0}",e],[",",".",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0\xa0%","\xa4\xa0#,##0.00","#E0"],"COP","$","peso colombiano",{AUD:[e,"$"],BRL:[e,"R$"],CAD:[e,"$"],CNY:[e,"\xa5"],COP:["$"],ESP:["\u20a7"],EUR:[e,"\u20ac"],FKP:[e,"FK\xa3"],GBP:[e,"\xa3"],HKD:[e,"$"],ILS:[e,"\u20aa"],INR:[e,"\u20b9"],JPY:[e,"\xa5"],KRW:[e,"\u20a9"],MXN:[e,"$"],NZD:[e,"$"],RON:[e,"L"],SSP:[e,"SD\xa3"],SYP:[e,"S\xa3"],TWD:[e,"NT$"],USD:["US$","$"],VEF:[e,"BsF"],VND:[e,"\u20ab"],XAF:[],XCD:[e,"$"],XOF:[]},"ltr",function(t){return 1===t?1:5}]})},qmMc:function(t,i,e){"use strict";e.r(i),e.d(i,"ReportesPageModule",function(){return F});var o=e("ofXK"),n=e("AQDP"),a=e.n(n),s=e("3Pt+"),r=e("TEn/"),l=e("tyNb"),b=e("mrSG"),c=e("Wgwc"),d=e.n(c),u=e("OmbT"),h=e("fXoL"),p=e("4WDQ"),m=e("ai4U"),f=e("0HKr");function g(t,i){if(1&t){const t=h.Nb();h.Mb(0,"ion-col",12),h.Mb(1,"ion-item",13),h.Mb(2,"ion-label",14),h.pc(3,"Grupo seleccionado"),h.Lb(),h.Mb(4,"ion-input",15),h.Ub("click",function(){h.ic(t);const i=h.Wb(2);return i.showListGroups(null==i.selected?null:i.selected._id)}),h.Lb(),h.Lb(),h.Lb()}if(2&t){const t=h.Wb(2);h.zb((null==t.listGroups?null:t.listGroups.length)>1?"":"ion-hide"),h.xb(4),h.Zb("readonly",!0)("value",t.getNumberGroup())}}function v(t,i){if(1&t){const t=h.Nb();h.Mb(0,"ion-row",10),h.nc(1,g,5,5,"ion-col",11),h.Mb(2,"ion-col",12),h.Mb(3,"ion-item",13),h.Mb(4,"ion-label",14),h.pc(5,"Modo visualizaci\xf3n"),h.Lb(),h.Mb(6,"ion-input",15),h.Ub("click",function(){return h.ic(t),h.Wb().showListModelDataOpt()}),h.Lb(),h.Lb(),h.Lb(),h.Mb(7,"ion-col"),h.Mb(8,"ion-button",7),h.Ub("click",function(){return h.ic(t),h.Wb().downloadData()}),h.Kb(9,"ion-icon",16),h.Mb(10,"ion-text"),h.pc(11,"Descargar datos"),h.Lb(),h.Lb(),h.Lb(),h.Lb()}if(2&t){const t=h.Wb();h.xb(1),h.Zb("ngIf",(null==t.listGroups?null:t.listGroups.length)>0),h.xb(5),h.ac("value",t.onlyText?"Texto":"Gr\xe1fico"),h.Zb("readonly",!0)}}function M(t,i){if(1&t&&(h.Mb(0,"ion-item"),h.Mb(1,"ion-label"),h.pc(2),h.Lb(),h.Mb(3,"ion-text"),h.pc(4),h.Lb(),h.Lb()),2&t){const t=i.$implicit;h.xb(2),h.qc(t.label),h.xb(2),h.qc(t.value)}}function y(t,i){if(1&t&&(h.Mb(0,"ion-col",3),h.Mb(1,"ion-list"),h.nc(2,M,5,2,"ion-item",17),h.Lb(),h.Lb()),2&t){const t=h.Wb();h.xb(2),h.Zb("ngForOf",t.dataToReportText)}}function L(t,i){if(1&t&&(h.Mb(0,"ion-col",3),h.Mb(1,"ion-row",20),h.Mb(2,"ion-col",21),h.Mb(3,"ion-text"),h.Kb(4,"ion-icon",22),h.Kb(5,"br"),h.Mb(6,"span",23),h.pc(7,"Hermanos y ni\xf1os"),h.Lb(),h.Lb(),h.Lb(),h.Mb(8,"ion-col",24),h.Mb(9,"ion-text"),h.Mb(10,"p",25),h.pc(11),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Lb()),2&t){const t=h.Wb(2);h.xb(11),h.rc(" ",t.dataToReport.totals.qty," ")}}function x(t,i){if(1&t&&(h.Mb(0,"ion-col",3),h.Mb(1,"ion-row",20),h.Mb(2,"ion-col",21),h.Mb(3,"ion-text",26),h.Kb(4,"ion-icon",27),h.Kb(5,"br"),h.Mb(6,"span",23),h.pc(7,"Ofrendas"),h.Lb(),h.Lb(),h.Lb(),h.Mb(8,"ion-col",24),h.Mb(9,"ion-text",26),h.Mb(10,"p",25),h.pc(11),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Lb()),2&t){const t=h.Wb(2);h.xb(11),h.rc(" ",t.dataToReport.offering.qty," ")}}function D(t,i){if(1&t&&(h.Mb(0,"ion-col",28),h.Kb(1,"app-chart",29),h.Lb()),2&t){const t=h.Wb(2);h.xb(1),h.ac("title",t.dataToReport.data1.title),h.Zb("data",t.dataToReport.data1)}}function C(t,i){if(1&t&&(h.Mb(0,"ion-col",28),h.Kb(1,"app-chart",29),h.Lb()),2&t){const t=h.Wb(2);h.xb(1),h.ac("title",t.dataToReport.data2.title),h.Zb("data",t.dataToReport.data2)}}function T(t,i){if(1&t&&(h.Mb(0,"ion-col",28),h.Kb(1,"app-chart",29),h.Lb()),2&t){const t=h.Wb(2);h.xb(1),h.ac("title",t.dataToReport.data3.title),h.Zb("data",t.dataToReport.data3)}}function w(t,i){if(1&t&&(h.Mb(0,"ion-col",28),h.Kb(1,"app-chart",29),h.Lb()),2&t){const t=h.Wb(2);h.xb(1),h.ac("title",t.dataToReport.data4.title),h.Zb("data",t.dataToReport.data4)}}function P(t,i){if(1&t&&(h.Mb(0,"ion-col",28),h.Kb(1,"app-chart",29),h.Lb()),2&t){const t=h.Wb(2);h.xb(1),h.ac("title",t.dataToReport.data5.title),h.Zb("data",t.dataToReport.data5)}}function O(t,i){if(1&t&&(h.Mb(0,"ion-col",28),h.Kb(1,"app-chart",29),h.Lb()),2&t){const t=h.Wb(2);h.xb(1),h.ac("title",t.dataToReport.data6.title),h.Zb("data",t.dataToReport.data6)}}function k(t,i){if(1&t){const t=h.Nb();h.Mb(0,"ion-col",3),h.Mb(1,"ion-row"),h.Mb(2,"ion-col",3),h.Mb(3,"ion-card",4),h.Mb(4,"ion-card-header",4),h.Mb(5,"ion-toolbar",5),h.Mb(6,"ion-buttons",6),h.Mb(7,"ion-button",7),h.Ub("click",function(){return h.ic(t),h.Wb().setShowTotals()}),h.Kb(8,"ion-icon",8),h.Lb(),h.Lb(),h.Mb(9,"ion-title"),h.pc(10,"Totales"),h.Lb(),h.Lb(),h.Lb(),h.Mb(11,"ion-card-content"),h.Mb(12,"ion-row",18),h.nc(13,L,12,1,"ion-col",2),h.nc(14,x,12,1,"ion-col",2),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.nc(15,D,2,2,"ion-col",19),h.nc(16,C,2,2,"ion-col",19),h.nc(17,T,2,2,"ion-col",19),h.nc(18,w,2,2,"ion-col",19),h.nc(19,P,2,2,"ion-col",19),h.nc(20,O,2,2,"ion-col",19),h.Lb(),h.Lb()}if(2&t){const t=h.Wb();h.xb(8),h.bc("name","chevron-",t.showTotals?"up":"down","-outline"),h.xb(3),h.Ab("",t.showTotals?"":"ion-hide"," ion-no-padding "),h.xb(2),h.Zb("ngIf",t.dataToReport),h.xb(1),h.Zb("ngIf",t.dataToReport),h.xb(1),h.Zb("ngIf",t.dataToReport&&t.dataToReport.data1),h.xb(1),h.Zb("ngIf",t.dataToReport&&t.dataToReport.data2),h.xb(1),h.Zb("ngIf",t.dataToReport&&t.dataToReport.data3),h.xb(1),h.Zb("ngIf",t.dataToReport&&t.dataToReport.data4),h.xb(1),h.Zb("ngIf",t.dataToReport&&t.dataToReport.data5),h.xb(1),h.Zb("ngIf",t.dataToReport&&t.dataToReport.data6)}}function A(t,i){if(1&t&&(h.Mb(0,"ion-text"),h.Mb(1,"span"),h.pc(2),h.Lb(),h.Kb(3,"br"),h.Lb()),2&t){const t=h.Wb().$implicit;h.xb(2),h.sc("Por: ",t.member.names," ",t.member.lastNames,"")}}function R(t,i){if(1&t){const t=h.Nb();h.Mb(0,"ion-col",28),h.Mb(1,"ion-card",7),h.Ub("click",function(){h.ic(t);const e=i.index;return h.Wb(2).showObservation(e)}),h.Mb(2,"ion-card-content"),h.Mb(3,"ion-text"),h.Mb(4,"p"),h.pc(5),h.Lb(),h.Lb(),h.nc(6,A,4,2,"ion-text",32),h.Mb(7,"ion-text"),h.Mb(8,"span"),h.pc(9),h.Lb(),h.Kb(10,"br"),h.Lb(),h.Mb(11,"ion-text"),h.Mb(12,"i",33),h.pc(13,"Toca para m\xe1s detalles."),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Lb()}if(2&t){const t=i.$implicit;h.xb(5),h.qc(t.observation),h.xb(1),h.Zb("ngIf",t.member),h.xb(3),h.qc(t.date)}}function S(t,i){if(1&t&&(h.Mb(0,"ion-row",30),h.nc(1,R,14,3,"ion-col",31),h.Lb()),2&t){const t=h.Wb();h.xb(1),h.Zb("ngForOf",t.observationsPreview)}}let N=(()=>{class t{constructor(t){this.globalSer=t,this.data=null,this.listGroups=null,this.selected=null,this.report=null,this.observations=null,this.observationsPreview=null,this.dataToReport=null,this.dataToReportText=null,this.showTotals=!0,this.showObservations=!0,this.onlyText=!0}ngOnInit(){return Object(b.a)(this,void 0,void 0,function*(){this.data?(this.listGroups=this.data.map(t=>({_id:t._id,groupName:t.groupName})),this.listGroups.length>0&&(this.selected=this.listGroups[0]),yield this.setDataToReport(this.selected?this.data[0].report:null),yield this.setObservationsValues(this.data.length>0?this.data[0].observations:null)):this.dataToReport=null})}setShowTotals(){this.showTotals=!this.showTotals}setShowObservations(){this.showObservations=!this.showObservations}setObservationsValues(t){return Object(b.a)(this,void 0,void 0,function*(){this.observations=[],this.observationsPreview=[],t&&t.length>0&&(this.observations=t,t.forEach(t=>{const i=d()(t.date,"YYYY-MM-DD HH:mm:ss",!0).locale("es").format("ddd, DD [de] MMM [de] YYYY - H:mm a");this.observationsPreview.push({observation:t.observations.length>50?t.observations.substr(0,50)+" ...":t.observations,member:t.member,date:i})}))})}setDataToReport(t){return Object(b.a)(this,void 0,void 0,function*(){this.dataToReport=null,this.dataToReport=t?{data1:{title:"Hermanos",data:[{label:"Hermanos",qty:t.brethren},{label:"Amigos",qty:t.friends}]},data2:{title:"Ni\xf1os",data:[{label:"Ni\xf1os",qty:t.christianChildren},{label:"Amigos",qty:t.christianChildrenFriends}]},data3:{title:"Visitas",data:[{label:"Programadas",qty:t.scheduledVisits},{label:"Disipulado",qty:t.discipleshipVisits}]},data4:{title:"Asistencia",data:[{label:"Hermanos",qty:t.churchAttendance},{label:"Ni\xf1os",qty:t.churchAttendanceChildren}]},data5:{title:"Conversiones y reconcilaciones",data:[{label:"Reconciliaciones",qty:t.reconciliations},{label:"Conversiones",qty:t.conversions},{label:"Conversiones de ni\xf1os",qty:t.conversionsChildren}]},data6:{title:"Otros",data:[{label:"Planificaci\xf3n de hnos.",qty:t.brethrenPlanning},{label:"Lectura b\xedblica",qty:t.bibleReading},{label:"Consolidados",qty:t.consolidated}]},totals:{title:"Total de hermanos y ni\xf1os",qty:t.total},offering:{title:"Total de ofrendas",qty:this.globalSer.getCurrency(t.offering||0)}}:null,this.dataToReportText=t?[{label:"Hermanos",value:t.brethren},{label:"Amigos",value:t.friends},{label:"Ni\xf1os",value:t.christianChildren},{label:"Ni\xf1os (amigos)",value:t.christianChildrenFriends},{label:"Visitas programadas",value:t.scheduledVisits},{label:"Visitas disipulado",value:t.discipleshipVisits},{label:"Visitas",value:t.discipleshipVisits},{label:"Asistencia de hnos.",value:t.churchAttendance},{label:"Asistencia de ni\xf1os",value:t.churchAttendanceChildren},{label:"Reconciliaciones",value:t.reconciliations},{label:"Conversiones",value:t.conversions},{label:"Conversiones de ni\xf1os",value:t.conversionsChildren},{label:"Visitas",value:t.discipleshipVisits},{label:"Planif. de hermanos",value:t.discipleshipVisits},{label:"Lectura b\xedblica",value:t.brethrenPlanning},{label:"Consolidaciones",value:t.bibleReading},{label:"Total de hnos. y ni\xf1os",value:t.total},{label:"Total de ofrendas",value:this.globalSer.getCurrency(t.offering||0)}]:null})}getNumberGroup(){var t;return(null===(t=this.selected)||void 0===t?void 0:t.groupName)||"Desconocido"}showListGroups(t){return Object(b.a)(this,void 0,void 0,function*(){const i=[];for(const e of this.listGroups)i.push({name:"list-groups",type:"radio",label:e.groupName,value:e._id,checked:e._id===t});yield this.globalSer.alertWithList({header:"Seleccione un grupo",inputs:i,confirmAction:i=>Object(b.a)(this,void 0,void 0,function*(){if(i!==t){this.dataToReport=null;const t=this.data.find(t=>(null==t?void 0:t._id)===i)||null;yield this.setDataToReport((null==t?void 0:t.report)||null),this.selected=t||null,yield this.setObservationsValues((null==t?void 0:t.observations)||null)}})})})}downloadData(){const t=this.data.find(t=>{var i;return t._id===(null===(i=this.selected)||void 0===i?void 0:i._id)})||null;if(t){const i=[{key:"brethren",key2:"Hermanos"},{key:"friends",key2:"Amigos"},{key:"scheduledVisits",key2:"VisitasProgramadas"},{key:"discipleshipVisits",key2:"VisitasAlDisipulado"},{key:"christianChildren",key2:"NinnosCristianos"},{key:"christianChildrenFriends",key2:"NinnosCristianosAmigos"},{key:"offering",key2:"Ofrendas"},{key:"churchAttendance",key2:"AsistenciasALaIglesia"},{key:"churchAttendanceChildren",key2:"AsistenciasNinnosIglesia"},{key:"conversions",key2:"Conversiones"},{key:"reconciliations",key2:"Reconciliaciones"},{key:"conversionsChildren",key2:"ConversionesNinnos"},{key:"brethrenPlanning",key2:"PlanificacionHnos"},{key:"bibleReading",key2:"LecturaBiblica"},{key:"consolidated",key2:"Consolidados"},{key:"total",key2:"TotalPersonas"}],e=[];this.data.forEach(o=>{const n={Grupo:o.groupName,Hermanos:0,Amigos:0,VisitasProgramadas:0,VisitasAlDisipulado:0,NinnosCristianos:0,NinnosCristianosAmigos:0,Ofrendas:0,AsistenciasALaIglesia:0,AsistenciasNinnosIglesia:0,Conversiones:0,Reconciliaciones:0,ConversionesNinnos:0,PlanificacionHnos:0,LecturaBiblica:0,Consolidados:0,TotalPersonas:0};i.forEach(i=>{t.report[i.key]&&(n[i.key2]=o.report[i.key])}),e.push(n)}),this.globalSer.downloadCSVFromJson(`Reporte_Grupos_Familiares_-_${d()().format("YYYY-MM-DD[_]HH:mm:ss")}.csv`,e)}else this.globalSer.presentAlert("Error","Disculpe, pero ha ocurrido un error al momento de descargar la informaci\xf3n.")}showListModelDataOpt(){return Object(b.a)(this,void 0,void 0,function*(){const t=[];for(const i of[{label:"Texto",value:!0},{label:"Gr\xe1fico",value:!1}])t.push({name:"show-mode-data",type:"radio",label:i.label,value:i.value,checked:i.value===this.onlyText});yield this.globalSer.alertWithList({header:"Seleccione",inputs:t,confirmAction:t=>Object(b.a)(this,void 0,void 0,function*(){this.onlyText=t||!1})})})}showObservation(t){return Object(b.a)(this,void 0,void 0,function*(){const i=this.observations[t]||null;if(i){const t=d()(i.date,"YYYY-MM-DD HH:mm:ss",!0).locale("es").format("ddd, DD [de] MMM [de] YYYY - H:mm a"),e=i.member?`<b>Por:</b> ${i.member.names} ${i.member.lastNames}`:null;yield this.globalSer.presentAlert("Observaci\xf3n",`${e} <br><br>${t}<br><br>${i.observations}`)}else yield this.globalSer.presentAlert("Error","Disculpe, pero ha ocurrido un error al momento de cargar la observaci\xf3n.")})}}return t.\u0275fac=function(i){return new(i||t)(h.Jb(p.a))},t.\u0275cmp=h.Db({type:t,selectors:[["app-families-groups-reports"]],inputs:{data:"data"},decls:15,vars:8,consts:[["class","ion-no-padding ion-margin-start ion-margin-end ion-margin-top",4,"ngIf"],[1,"ion-justify-content-center","ion-margin-top","ion-margin-bottom","ion-padding-bottom"],["size","12",4,"ngIf"],["size","12"],[1,"ion-no-padding"],["color","primary"],["slot","start"],[3,"click"],[3,"name"],["class","max-height-450",4,"ngIf"],[1,"ion-no-padding","ion-margin-start","ion-margin-end","ion-margin-top"],["size","4",3,"class",4,"ngIf"],["size","4"],["color","light"],["position","floating","color","medium"],["autocomplete","off",1,"no-selected-text",3,"readonly","value","click"],["name","download-outline","slot","start"],[4,"ngFor","ngForOf"],[1,"ion-margin-bottom","ion-margin-top"],["size","12","size-sm","6",4,"ngIf"],[1,"ion-align-items-center"],["size","5",1,"ion-text-center"],["name","body-outline",1,"bigIcon"],[1,"textTotals"],["size","7",1,"ion-text-center","ion-align-items-center"],[1,"bigNumber"],[1,"ion-text-center"],["name","cash-outline",1,"bigIcon"],["size","12","size-sm","6"],["typeChart","bar",3,"data","title"],[1,"max-height-450"],["size","12","size-sm","6",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"toSmall"]],template:function(t,i){1&t&&(h.nc(0,v,12,3,"ion-row",0),h.Mb(1,"ion-row",1),h.nc(2,y,3,1,"ion-col",2),h.nc(3,k,21,12,"ion-col",2),h.Mb(4,"ion-col",3),h.Mb(5,"ion-card",4),h.Mb(6,"ion-card-header",4),h.Mb(7,"ion-toolbar",5),h.Mb(8,"ion-buttons",6),h.Mb(9,"ion-button",7),h.Ub("click",function(){return i.setShowObservations()}),h.Kb(10,"ion-icon",8),h.Lb(),h.Lb(),h.Mb(11,"ion-title"),h.pc(12,"Observaciones"),h.Lb(),h.Lb(),h.Lb(),h.Mb(13,"ion-card-content"),h.nc(14,S,2,1,"ion-row",9),h.Lb(),h.Lb(),h.Lb(),h.Lb()),2&t&&(h.Zb("ngIf",i.data),h.xb(2),h.Zb("ngIf",i.onlyText&&i.dataToReportText),h.xb(1),h.Zb("ngIf",!i.onlyText&&i.dataToReport),h.xb(7),h.bc("name","chevron-",i.showObservations?"up":"down","-outline"),h.xb(3),h.Ab("",i.showObservations?"":"ion-hide"," ion-no-padding "),h.xb(1),h.Zb("ngIf",(null==i.observationsPreview?null:i.observationsPreview.length)>0))},directives:[o.i,r.E,r.n,r.g,r.i,r.P,r.f,r.e,r.s,r.N,r.h,r.v,r.w,r.u,r.Y,r.K,r.x,o.h,f.a],styles:[""]}),t})();function Y(t,i){if(1&t){const t=h.Nb();h.Mb(0,"ion-col",4),h.Mb(1,"ion-card"),h.Mb(2,"ion-card-content"),h.Mb(3,"ion-row"),h.Mb(4,"ion-col",13),h.Mb(5,"ion-item"),h.Mb(6,"ion-label",14),h.pc(7,"N\xba Sector"),h.Lb(),h.Mb(8,"ion-input",15),h.Ub("ngModelChange",function(i){return h.ic(t),h.Wb().queryParams.sector=i})("keypress",function(i){return h.ic(t),h.Wb().validateOnlyNumber(i)}),h.Lb(),h.Lb(),h.Lb(),h.Mb(9,"ion-col",13),h.Mb(10,"ion-item"),h.Mb(11,"ion-label",14),h.pc(12,"N\xba Sub-sector"),h.Lb(),h.Mb(13,"ion-input",15),h.Ub("ngModelChange",function(i){return h.ic(t),h.Wb().queryParams.subSector=i})("keypress",function(i){return h.ic(t),h.Wb().validateOnlyNumber(i)}),h.Lb(),h.Lb(),h.Lb(),h.Mb(14,"ion-col",13),h.Mb(15,"ion-item"),h.Mb(16,"ion-label",14),h.pc(17,"N\xba del grupo"),h.Lb(),h.Mb(18,"ion-input",15),h.Ub("ngModelChange",function(i){return h.ic(t),h.Wb().queryParams.number=i})("keypress",function(i){return h.ic(t),h.Wb().validateOnlyNumber(i)}),h.Lb(),h.Lb(),h.Lb(),h.Mb(19,"ion-col",16),h.Mb(20,"ion-item"),h.Mb(21,"ion-label",14),h.pc(22,"A partir de:"),h.Lb(),h.Mb(23,"ion-datetime",17),h.Ub("ngModelChange",function(i){return h.ic(t),h.Wb().queryParams.initDate=i}),h.Lb(),h.Lb(),h.Lb(),h.Mb(24,"ion-col",16),h.Mb(25,"ion-item"),h.Mb(26,"ion-label",14),h.pc(27,"Hasta:"),h.Lb(),h.Mb(28,"ion-datetime",17),h.Ub("ngModelChange",function(i){return h.ic(t),h.Wb().queryParams.endDate=i}),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Mb(29,"ion-row",18),h.Mb(30,"ion-col",19),h.Mb(31,"ion-button",20),h.Ub("click",function(){return h.ic(t),h.Wb().resetQueryParams()}),h.Kb(32,"ion-icon",21),h.Mb(33,"ion-text"),h.pc(34,"Limpiar"),h.Lb(),h.Lb(),h.Lb(),h.Mb(35,"ion-col",19),h.Mb(36,"ion-button",22),h.Ub("click",function(){return h.ic(t),h.Wb().findData()}),h.Kb(37,"ion-icon",23),h.Mb(38,"ion-text"),h.pc(39,"Aplicar"),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Lb()}if(2&t){const t=h.Wb();h.xb(8),h.Zb("ngModel",t.queryParams.sector),h.xb(5),h.Zb("ngModel",t.queryParams.subSector),h.xb(5),h.Zb("ngModel",t.queryParams.number),h.xb(5),h.Zb("ngModel",t.queryParams.initDate)("min",t.minInitDate)("max",t.maxInitDate),h.xb(5),h.Zb("ngModel",t.queryParams.endDate)("min",t.minEndDate)("max",t.maxEndDate)}}function q(t,i){if(1&t&&h.Kb(0,"app-families-groups-reports",24),2&t){const t=h.Wb();h.Zb("data",t.dataAlt)}}function I(t,i){if(1&t&&(h.Mb(0,"ion-row"),h.Mb(1,"ion-col",4),h.Mb(2,"ion-card",25),h.Mb(3,"ion-text",26),h.Mb(4,"p",27),h.Kb(5,"ion-icon",28),h.pc(6),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Lb()),2&t){const t=h.Wb();h.xb(6),h.rc(" ",t.showFilter?"No se encontraron resultados.":"No se logr\xf3 obtener la informaci\xf3n."," ")}}const V=[{path:"",component:(()=>{class t{constructor(t,i,e,o){this.globalSer=t,this.gruposService=i,this.navCtrl=e,this.router=o,this.opts=["Ninguno","Sub-sector","Sector"],this.data=null,this.dataAlt=null,this.totalityOpt=0,this.sizeElems=6,this.showFilter=!1,this.minInitDate=d()("2021-01-01").format("YYYY-MM-DD"),this.maxInitDate=d()().format("YYYY-MM-DD"),this.minEndDate=d()("2021-01-01").format("YYYY-MM-DD"),this.maxEndDate=d()().format("YYYY-MM-DD"),this.queryParams={sector:null,subSector:null,number:null,initDate:null,endDate:null}}ngOnInit(){return Object(b.a)(this,void 0,void 0,function*(){this.globalSer.checkSession()?yield this.getData():this.router.navigate(["/ingresar"])})}getData(){return Object(b.a)(this,void 0,void 0,function*(){this.data=null;const t=yield this.gruposService.getFamiliesGroupsReports(this.queryParams);t&&!t.error?(this.data=t,this.dataAlt=null,yield this.setTotalityData()):t&&t.error&&(yield this.globalSer.errorSession())})}back(){return Object(b.a)(this,void 0,void 0,function*(){yield this.navCtrl.back()})}setShowFilter(){this.showFilter=!this.showFilter}resetQueryParams(){return Object(b.a)(this,void 0,void 0,function*(){this.queryParams.initDate=null,this.queryParams.endDate=null,this.queryParams.sector=null,this.queryParams.subSector=null,this.queryParams.number=null,this.showFilter=!this.showFilter,yield this.getData()})}findData(){return Object(b.a)(this,void 0,void 0,function*(){let t=!1;this.queryParams.initDate&&(this.queryParams.initDate=d()(this.queryParams.initDate).format("YYYY-MM-DD"),t=!0),this.queryParams.endDate&&(this.queryParams.endDate=d()(this.queryParams.endDate).format("YYYY-MM-DD"),t=null!==this.queryParams.initDate),/[0-9]{1,4}/.test(this.queryParams.sector)&&(t=!0),/[0-9]{1,4}/.test(this.queryParams.subSector)&&(t=!0),/[0-9]{1,4}/.test(this.queryParams.number)&&(t=!0),t?yield this.getData():this.globalSer.presentAlert("Alerta","Disculpe, pero debe indicar una fecha inicial.")})}validateOnlyNumber(t){Object(u.q)(t)}showListTotality(){return Object(b.a)(this,void 0,void 0,function*(){const t=[];for(const[i,e]of this.opts.entries())t.push({name:"list-opts",type:"radio",label:e,value:i,checked:i===this.totalityOpt});yield this.globalSer.alertWithList({header:"Totalizar por",inputs:t,confirmAction:t=>{this.totalityOpt=t,this.dataAlt=null,this.setTotalityData(!0)}})})}setTotalityData(t=!1){var i,e;return Object(b.a)(this,void 0,void 0,function*(){t&&(yield this.globalSer.presentLoading());const o=[],n=(t,i)=>(t.bibleReading+=(null==i?void 0:i.bibleReading)||0,t.brethren+=(null==i?void 0:i.brethren)||0,t.brethrenPlanning+=(null==i?void 0:i.brethrenPlanning)||0,t.christianChildren+=(null==i?void 0:i.christianChildren)||0,t.christianChildrenFriends+=(null==i?void 0:i.christianChildrenFriends)||0,t.churchAttendance+=(null==i?void 0:i.churchAttendance)||0,t.churchAttendanceChildren+=(null==i?void 0:i.churchAttendanceChildren)||0,t.consolidated+=(null==i?void 0:i.consolidated)||0,t.conversions+=(null==i?void 0:i.conversions)||0,t.conversionsChildren+=(null==i?void 0:i.conversionsChildren)||0,t.discipleshipVisits+=(null==i?void 0:i.discipleshipVisits)||0,t.friends+=(null==i?void 0:i.friends)||0,t.offering+=(null==i?void 0:i.offering)||0,t.reconciliations+=(null==i?void 0:i.reconciliations)||0,t.scheduledVisits+=(null==i?void 0:i.scheduledVisits)||0,t.total+=(null==i?void 0:i.total)||0,t);let a=null;if(this.dataAlt=null,this.totalityOpt>0){let t={_id:null,groupName:null,observations:[],report:{bibleReading:0,brethren:0,brethrenPlanning:0,christianChildren:0,christianChildrenFriends:0,churchAttendance:0,churchAttendanceChildren:0,consolidated:0,conversions:0,conversionsChildren:0,discipleshipVisits:0,friends:0,offering:0,reconciliations:0,scheduledVisits:0,total:0}};null===(i=this.data)||void 0===i||i.forEach((i,e)=>{var s;i.group[1===this.totalityOpt?"subSector":"sector"]!==a&&(null!==a&&o.push(t),a=i.group[1===this.totalityOpt?"subSector":"sector"],t={_id:null,groupName:null,observations:[],report:{bibleReading:0,brethren:0,brethrenPlanning:0,christianChildren:0,christianChildrenFriends:0,churchAttendance:0,churchAttendanceChildren:0,consolidated:0,conversions:0,conversionsChildren:0,discipleshipVisits:0,friends:0,offering:0,reconciliations:0,scheduledVisits:0,total:0}},t._id=e,t.groupName="Sector: "+i.group.sector,1===this.totalityOpt&&(t.groupName+=" - SS: "+i.group.subSector)),t.observations=null===(s=t.observations)||void 0===s?void 0:s.concat(i.observations||[]),t.report=n(t.report,i.report)}),t&&o.push(t)}else{let t={_id:null,groupName:null,observations:[],report:{bibleReading:0,brethren:0,brethrenPlanning:0,christianChildren:0,christianChildrenFriends:0,churchAttendance:0,churchAttendanceChildren:0,consolidated:0,conversions:0,conversionsChildren:0,discipleshipVisits:0,friends:0,offering:0,reconciliations:0,scheduledVisits:0,total:0}};null===(e=this.data)||void 0===e||e.forEach(i=>{var e;t={_id:null,groupName:null,observations:[],report:{bibleReading:0,brethren:0,brethrenPlanning:0,christianChildren:0,christianChildrenFriends:0,churchAttendance:0,churchAttendanceChildren:0,consolidated:0,conversions:0,conversionsChildren:0,discipleshipVisits:0,friends:0,offering:0,reconciliations:0,scheduledVisits:0,total:0}},t._id=i.group._id,t.groupName="S: "+i.group.sector,t.groupName+=" - SS: "+i.group.subSector,t.groupName+=" - #: "+i.group.number,t.observations=null===(e=t.observations)||void 0===e?void 0:e.concat(i.observations||[]),t.report=n(t.report,i.report),o.push(t)})}this.dataAlt=o,t&&(yield this.globalSer.dismissLoading())})}}return t.\u0275fac=function(i){return new(i||t)(h.Jb(p.a),h.Jb(m.a),h.Jb(r.U),h.Jb(l.g))},t.\u0275cmp=h.Db({type:t,selectors:[["app-reportes"]],decls:25,vars:5,consts:[["slot","start"],[3,"click"],["name","arrow-back-outline"],[1,"ion-no-padding","ion-margin-start","ion-margin-end","ion-margin-top"],["size","12"],["size","auto"],[1,"ion-margin-bottom"],["color","medium",3,"click"],["slot","start",3,"name"],["name","calculator-outline","slot","start"],["size","12",4,"ngIf"],[3,"data",4,"ngIf","ngIfElse"],["noReports",""],["size","12","size-sm","4"],["position","floating","color","medium"],["autocomplete","off","maxlength","4",3,"ngModel","ngModelChange","keypress"],["size","12","size-sm","6"],["displayFormat","DD/MM/YYYY","doneText","Listo","cancelText","Cancelar",3,"ngModel","min","max","ngModelChange"],[1,"ion-margin-top"],["size","6",1,"ion-justify-content-center"],["color","light","expand","full",1,"ion-text-center",3,"click"],["name","trash-outline"],["color","primary","expand","full",1,"ion-text-center",3,"click"],["name","checkmark-outline"],[3,"data"],[1,"ion-no-padding"],["color","medium"],[1,"ion-text-center"],["name","alert-circle-outline"]],template:function(t,i){if(1&t&&(h.Mb(0,"ion-header"),h.Mb(1,"ion-toolbar"),h.Mb(2,"ion-buttons",0),h.Mb(3,"ion-button",1),h.Ub("click",function(){return i.back()}),h.Kb(4,"ion-icon",2),h.Lb(),h.Lb(),h.Mb(5,"ion-title"),h.pc(6,"Reportes de grupos familiares"),h.Lb(),h.Lb(),h.Lb(),h.Mb(7,"ion-content"),h.Mb(8,"ion-row",3),h.Mb(9,"ion-col",4),h.Mb(10,"ion-row"),h.Mb(11,"ion-col",5),h.Mb(12,"div",6),h.Mb(13,"ion-button",7),h.Ub("click",function(){return i.setShowFilter()}),h.Kb(14,"ion-icon",8),h.Mb(15,"ion-text"),h.pc(16,"Filtrar"),h.Lb(),h.Lb(),h.Mb(17,"ion-button",7),h.Ub("click",function(){return i.showListTotality()}),h.Kb(18,"ion-icon",9),h.Mb(19,"ion-text"),h.pc(20),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.nc(21,Y,40,9,"ion-col",10),h.Lb(),h.nc(22,q,1,1,"app-families-groups-reports",11),h.nc(23,I,7,1,"ng-template",null,12,h.oc),h.Lb()),2&t){const t=h.hc(24);h.xb(14),h.bc("name","",i.showFilter?"close":"filter","-outline"),h.xb(6),h.qc(i.opts[i.totalityOpt]),h.xb(1),h.Zb("ngIf",i.showFilter),h.xb(1),h.Zb("ngIf",i.dataAlt)("ngIfElse",t)}},directives:[r.r,r.P,r.f,r.e,r.s,r.N,r.o,r.E,r.n,r.K,o.i,r.g,r.h,r.v,r.w,r.u,r.Y,s.b,s.e,s.f,r.p,r.X,N],styles:[".max-height-250[_ngcontent-%COMP%]{max-height:250px!important;overflow-y:auto}.max-height-450[_ngcontent-%COMP%]{max-height:450px!important;overflow-y:auto}.bigNumber[_ngcontent-%COMP%]{font-size:1.5em!important}.bigIcon[_ngcontent-%COMP%]{font-size:3em!important}.textTotals[_ngcontent-%COMP%]{font-size:1em!important;font-weight:700}"]}),t})()}];let j=(()=>{class t{}return t.\u0275mod=h.Hb({type:t}),t.\u0275inj=h.Gb({factory:function(i){return new(i||t)},imports:[[l.j.forChild(V)],l.j]}),t})();var W=e("j1ZV");Object(o.o)(a.a);let F=(()=>{class t{}return t.\u0275mod=h.Hb({type:t}),t.\u0275inj=h.Gb({factory:function(i){return new(i||t)},imports:[[o.b,s.a,r.Q,j,W.a]]}),t})()}}]);